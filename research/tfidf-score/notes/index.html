<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link href=https://ruihan.org/research/tfidf-score/notes/ rel=canonical><link rel="shortcut icon" href=../../../assets/images/favicon.png><meta name=generator content="mkdocs-1.1.2, mkdocs-material-6.0.2"><title>TF-IDF for Information Retrieval - RUIHAN.ORG</title><link rel=stylesheet href=../../../assets/stylesheets/main.38780c08.min.css><link rel=stylesheet href=../../../assets/stylesheets/palette.3f72e892.min.css><meta name=theme-color content=#000000><link href=https://fonts.gstatic.com rel=preconnect crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback"><style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=black data-md-color-accent=black> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#tf-idf-and-scoring-for-information-retrieval class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class=md-header data-md-component=header> <nav class="md-header-nav md-grid" aria-label=Header> <a href=https://ruihan.org title=RUIHAN.ORG class="md-header-nav__button md-logo" aria-label=RUIHAN.ORG> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg> </a> <label class="md-header-nav__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg> </label> <div class=md-header-nav__title data-md-component=header-title> <div class=md-header-nav__ellipsis> <span class="md-header-nav__topic md-ellipsis"> RUIHAN.ORG </span> <span class="md-header-nav__topic md-ellipsis"> TF-IDF for Information Retrieval </span> </div> </div> <label class="md-header-nav__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query data-md-state=active> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </label> <button type=reset class="md-search__icon md-icon" aria-label=Clear data-md-component=search-reset tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg> </button> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list></ol> </div> </div> </div> </div> </div> <div class=md-header-nav__source> <a href=https://github.com/iurnah/ruihan.org title="Go to repository" class=md-source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg> </div> <div class=md-source__repository> iurnah/ruihan.org </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <nav class="md-tabs md-tabs--active" aria-label=Tabs data-md-component=tabs> <div class="md-tabs__inner md-grid"> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../../../books/ class=md-tabs__link> Books </a> </li> <li class=md-tabs__item> <a href=../../../courses/ class=md-tabs__link> Courses </a> </li> <li class=md-tabs__item> <a href=../../../leetcode/ class=md-tabs__link> Leetcode </a> </li> <li class=md-tabs__item> <a href=../../ class="md-tabs__link md-tabs__link--active"> Research </a> </li> <li class=md-tabs__item> <a href=../../../seedlabs/ class=md-tabs__link> SEED Labs </a> </li> <li class=md-tabs__item> <a href=../../../system-design/ class=md-tabs__link> System Design </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=https://ruihan.org title=RUIHAN.ORG class="md-nav__button md-logo" aria-label=RUIHAN.ORG> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg> </a> RUIHAN.ORG </label> <div class=md-nav__source> <a href=https://github.com/iurnah/ruihan.org title="Go to repository" class=md-source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg> </div> <div class=md-source__repository> iurnah/ruihan.org </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-1 type=checkbox id=nav-1> <label class=md-nav__link for=nav-1> Books <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Books data-md-level=1> <label class=md-nav__title for=nav-1> <span class="md-nav__icon md-icon"></span> Books </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../books/ class=md-nav__link> Index </a> </li> <li class=md-nav__item> <a href=../../../books/accelerated-cpp/notes/ class=md-nav__link> Accelerated C++ </a> </li> <li class=md-nav__item> <a href=../../../books/mining-massive-datasets/notes/ class=md-nav__link> Mining Massive Datasets </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-2 type=checkbox id=nav-2> <label class=md-nav__link for=nav-2> Courses <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Courses data-md-level=1> <label class=md-nav__title for=nav-2> <span class="md-nav__icon md-icon"></span> Courses </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../courses/ class=md-nav__link> Index </a> </li> <li class=md-nav__item> <a href=../../../courses/machine-learning-coursera/notes/ class=md-nav__link> Machine Learning (Coursera) </a> </li> <li class=md-nav__item> <a href=../../../courses/cs224n/lec-notes/ class=md-nav__link> CS224N Lecture Notes </a> </li> <li class=md-nav__item> <a href=../../../courses/cs224n/write-up/ class=md-nav__link> CS224N Write-up </a> </li> <li class=md-nav__item> <a href=../../../courses/coursera-dl4-cnn/notes/ class=md-nav__link> Convolutional Neural Networks </a> </li> <li class=md-nav__item> <a href=../../../courses/mining-massive-datasets/notes/ class=md-nav__link> Mining Massive Data Sets </a> </li> <li class=md-nav__item> <a href=../../../courses/6.431-probability/notes/ class=md-nav__link> 6.431 Probability </a> </li> <li class=md-nav__item> <a href=../../../courses/learning-from-data/notes.md class=md-nav__link> Learning From Data </a> </li> <li class=md-nav__item> <a href=../../../courses/9chap-system-design/notes/ class=md-nav__link> Nine Chapter System Design </a> </li> <li class=md-nav__item> <a href=../../../courses/9chap-dynamic-prog/notes/ class=md-nav__link> Nine Chapter Dynamic Programming </a> </li> <li class=md-nav__item> <a href=../../../courses/func-prog-in-scala/notes/ class=md-nav__link> Functional Programming Principles in Scala </a> </li> <li class=md-nav__item> <a href=../../../courses/applied-scrum-for-agile/notes/ class=md-nav__link> Applied Scrum for Agile Project Management </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-3 type=checkbox id=nav-3> <label class=md-nav__link for=nav-3> Leetcode <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Leetcode data-md-level=1> <label class=md-nav__title for=nav-3> <span class="md-nav__icon md-icon"></span> Leetcode </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../leetcode/ class=md-nav__link> Index </a> </li> <li class=md-nav__item> <a href=../../../leetcode/array/notes/ class=md-nav__link> Array </a> </li> <li class=md-nav__item> <a href=../../../leetcode/backtracking/notes/ class=md-nav__link> Backtracking </a> </li> <li class=md-nav__item> <a href=../../../leetcode/binary-search/notes/ class=md-nav__link> Binary Search </a> </li> <li class=md-nav__item> <a href=../../../leetcode/breadth-first-search/notes/ class=md-nav__link> Breadth-First Search (BFS) </a> </li> <li class=md-nav__item> <a href=../../../leetcode/depth-first-search/notes/ class=md-nav__link> Depth-First Search (DFS) </a> </li> <li class=md-nav__item> <a href=../../../leetcode/dynamic-programming/notes/ class=md-nav__link> Dynamic Programming </a> </li> <li class=md-nav__item> <a href=../../../leetcode/graph/notes/ class=md-nav__link> Graph </a> </li> <li class=md-nav__item> <a href=../../../leetcode/heap/notes/ class=md-nav__link> Heap </a> </li> <li class=md-nav__item> <a href=../../../leetcode/interval/notes/ class=md-nav__link> Interval </a> </li> <li class=md-nav__item> <a href=../../../leetcode/linked-list/notes/ class=md-nav__link> Linked List </a> </li> <li class=md-nav__item> <a href=../../../leetcode/math/notes/ class=md-nav__link> Math </a> </li> <li class=md-nav__item> <a href=../../../leetcode/stack/notes/ class=md-nav__link> Stack </a> </li> <li class=md-nav__item> <a href=../../../leetcode/string/notes/ class=md-nav__link> String </a> </li> <li class=md-nav__item> <a href=../../../leetcode/tree/notes/ class=md-nav__link> Tree </a> </li> <li class=md-nav__item> <a href=../../../leetcode/trie/notes/ class=md-nav__link> Trie </a> </li> <li class=md-nav__item> <a href=../../../leetcode/union-find/notes/ class=md-nav__link> Union Find </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-4 type=checkbox id=nav-4 checked> <label class=md-nav__link for=nav-4> Research <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Research data-md-level=1> <label class=md-nav__title for=nav-4> <span class="md-nav__icon md-icon"></span> Research </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../ class=md-nav__link> Index </a> </li> <li class=md-nav__item> <a href=../../paper-reading/notes/ class=md-nav__link> Paper Reading </a> </li> <li class=md-nav__item> <a href=../../coalition-game/notes/ class=md-nav__link> Coalition Game </a> </li> <li class=md-nav__item> <a href=../../contextual-bandit/notes/ class=md-nav__link> Contextual Multi-Armed Bandit </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" data-md-toggle=toc type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> TF-IDF for Information Retrieval <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> TF-IDF for Information Retrieval </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=#term-document-incidence-matrices class=md-nav__link> term document incidence matrices </a> </li> <li class=md-nav__item> <a href=#the-inverted-index class=md-nav__link> The inverted index </a> </li> <li class=md-nav__item> <a href=#query-processing class=md-nav__link> Query processing </a> </li> <li class=md-nav__item> <a href=#boolean-query class=md-nav__link> Boolean query </a> </li> <li class=md-nav__item> <a href=#phrase-queries class=md-nav__link> Phrase queries </a> </li> <li class=md-nav__item> <a href=#ranked-retriveval class=md-nav__link> Ranked retriveval </a> </li> <li class=md-nav__item> <a href=#scoring-with-the-jaccard-coefficient class=md-nav__link> Scoring with the Jaccard Coefficient </a> </li> <li class=md-nav__item> <a href=#term-frequency-weighting class=md-nav__link> Term frequency weighting </a> <nav class=md-nav aria-label="Term frequency weighting"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#log-frequency-weighting class=md-nav__link> Log-frequency weighting </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#inverted-document-frequency-weighting class=md-nav__link> (Inverted) Document frequency weighting </a> </li> <li class=md-nav__item> <a href=#collection-frequency-vs-document-frequency class=md-nav__link> collection frequency vs document frequency </a> </li> <li class=md-nav__item> <a href=#tf-idf-weighting class=md-nav__link> TF-IDF weighting </a> </li> <li class=md-nav__item> <a href=#vector-space-model class=md-nav__link> Vector Space Model </a> </li> <li class=md-nav__item> <a href=#application-for-https-request-embedding class=md-nav__link> application for https request embedding </a> </li> <li class=md-nav__item> <a href=#problem class=md-nav__link> problem </a> </li> <li class=md-nav__item> <a href=#solution class=md-nav__link> Solution </a> <nav class=md-nav aria-label=Solution> <ul class=md-nav__list> <li class=md-nav__item> <a href=#calculate-tf-idf-for-individual-header-fields class=md-nav__link> calculate tf-idf for individual header fields </a> </li> <li class=md-nav__item> <a href=#tokenize-all-request-facets class=md-nav__link> tokenize all request facets </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#intuitions class=md-nav__link> Intuitions </a> </li> <li class=md-nav__item> <a href=#practical-consideration class=md-nav__link> Practical consideration </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-5 type=checkbox id=nav-5> <label class=md-nav__link for=nav-5> SEED Labs <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="SEED Labs" data-md-level=1> <label class=md-nav__title for=nav-5> <span class="md-nav__icon md-icon"></span> SEED Labs </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../seedlabs/ class=md-nav__link> Index </a> </li> <li class=md-nav__item> <a href=../../../seedlabs/applied-crypto/notes/ class=md-nav__link> Applied Cryptograph Notes </a> </li> <li class=md-nav__item> <a href=../../../seedlabs/public-key-cryptography-and-pki/notes/ class=md-nav__link> Public Key Cryptography and PKI </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-6 type=checkbox id=nav-6> <label class=md-nav__link for=nav-6> System Design <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="System Design" data-md-level=1> <label class=md-nav__title for=nav-6> <span class="md-nav__icon md-icon"></span> System Design </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../system-design/ class=md-nav__link> Index </a> </li> <li class=md-nav__item> <a href=../../../system-design/browser/notes.md class=md-nav__link> How Browser Works </a> </li> <li class=md-nav__item> <a href=../../../system-design/concurrency/notes/ class=md-nav__link> Concurrency and Synchronization </a> </li> <li class=md-nav__item> <a href=../../../system-design/concepts/notes/ class=md-nav__link> Distributed System Concepts </a> </li> <li class=md-nav__item> <a href=../../../system-design/patterns/notes/ class=md-nav__link> Design Patterns </a> </li> <li class=md-nav__item> <a href=../../../system-design/problems/tinyurl/notes/ class=md-nav__link> How to Design TinyUrl </a> </li> <li class=md-nav__item> <a href=../../../system-design/problems/twitter/notes/ class=md-nav__link> How to Design Twitter </a> </li> <li class=md-nav__item> <a href=../../../system-design/problems/ticketmaster/notes/ class=md-nav__link> How to Design Ticketmaster </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=#term-document-incidence-matrices class=md-nav__link> term document incidence matrices </a> </li> <li class=md-nav__item> <a href=#the-inverted-index class=md-nav__link> The inverted index </a> </li> <li class=md-nav__item> <a href=#query-processing class=md-nav__link> Query processing </a> </li> <li class=md-nav__item> <a href=#boolean-query class=md-nav__link> Boolean query </a> </li> <li class=md-nav__item> <a href=#phrase-queries class=md-nav__link> Phrase queries </a> </li> <li class=md-nav__item> <a href=#ranked-retriveval class=md-nav__link> Ranked retriveval </a> </li> <li class=md-nav__item> <a href=#scoring-with-the-jaccard-coefficient class=md-nav__link> Scoring with the Jaccard Coefficient </a> </li> <li class=md-nav__item> <a href=#term-frequency-weighting class=md-nav__link> Term frequency weighting </a> <nav class=md-nav aria-label="Term frequency weighting"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#log-frequency-weighting class=md-nav__link> Log-frequency weighting </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#inverted-document-frequency-weighting class=md-nav__link> (Inverted) Document frequency weighting </a> </li> <li class=md-nav__item> <a href=#collection-frequency-vs-document-frequency class=md-nav__link> collection frequency vs document frequency </a> </li> <li class=md-nav__item> <a href=#tf-idf-weighting class=md-nav__link> TF-IDF weighting </a> </li> <li class=md-nav__item> <a href=#vector-space-model class=md-nav__link> Vector Space Model </a> </li> <li class=md-nav__item> <a href=#application-for-https-request-embedding class=md-nav__link> application for https request embedding </a> </li> <li class=md-nav__item> <a href=#problem class=md-nav__link> problem </a> </li> <li class=md-nav__item> <a href=#solution class=md-nav__link> Solution </a> <nav class=md-nav aria-label=Solution> <ul class=md-nav__list> <li class=md-nav__item> <a href=#calculate-tf-idf-for-individual-header-fields class=md-nav__link> calculate tf-idf for individual header fields </a> </li> <li class=md-nav__item> <a href=#tokenize-all-request-facets class=md-nav__link> tokenize all request facets </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#intuitions class=md-nav__link> Intuitions </a> </li> <li class=md-nav__item> <a href=#practical-consideration class=md-nav__link> Practical consideration </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content> <article class="md-content__inner md-typeset"> <h1 id=tf-idf-and-scoring-for-information-retrieval>TF-IDF and Scoring for Information Retrieval<a class=headerlink href=#tf-idf-and-scoring-for-information-retrieval title="Permanent link">&para;</a></h1> <ul> <li><a href="https://www.youtube.com/watch?v=e81nC0LO0A8&list=PLaZQkZp6WhWwoDuD6pQCmgVyDbUWl_ZUi&index=2">Youtube Lecture by Dr. Manning</a></li> <li><a href=../06vect.pdf>Book chapter</a></li> <li><a href=../lecture6-tfidf.ppt>tfidf slides</a></li> </ul> <h2 id=term-document-incidence-matrices>term document incidence matrices<a class=headerlink href=#term-document-incidence-matrices title="Permanent link">&para;</a></h2> <p>not practical because of the sparsity.</p> <h2 id=the-inverted-index>The inverted index<a class=headerlink href=#the-inverted-index title="Permanent link">&para;</a></h2> <p>token to document list mapping</p> <ul> <li>word -&gt; [doc1, doc2, ...]</li> <li>UA -&gt; [2020-04-01 13:03:23, 2020-04-01 13:03:23]</li> </ul> <h2 id=query-processing>Query processing<a class=headerlink href=#query-processing title="Permanent link">&para;</a></h2> <p>If we want to query which document have the phrash "information retrival", we'd like to take the invert index postings list for "information" and "retrival", then find the document that have both word. (by run a merge algorithm on the two postings list)</p> <h2 id=boolean-query>Boolean query<a class=headerlink href=#boolean-query title="Permanent link">&para;</a></h2> <p>Mainly leverage the boolean operation on the list merging algorithm.</p> <h2 id=phrase-queries>Phrase queries<a class=headerlink href=#phrase-queries title="Permanent link">&para;</a></h2> <p>no longer suffice to store <code>&lt;term, doc&gt;</code> entries.</p> <ul> <li>First attempt, biword indexes. treat the two words phrase as a single phrase.</li> <li>For longer phrase queries, we can broken into the boolean query on biword.<ul> <li>false positive, two words not adjacent</li> <li>index blowup due to big dictionary</li> </ul> </li> <li>positional indexes, store the positions of each token occurs at a document.<ul> <li>use a merge algorithm to recursively at the document level.</li> </ul> </li> </ul> <p><img alt="processing a phrase query" src=../fig/phrase-query.png> </p> <h2 id=ranked-retriveval>Ranked retriveval<a class=headerlink href=#ranked-retriveval title="Permanent link">&para;</a></h2> <ul> <li>"How can we rank-order the documents in the collection with respect to a query?"</li> <li>assign a score to each document - say in <code>[0, 1]</code> - to each document.</li> <li>This score measures how well document and query match.</li> <li>We need a way to assigning a score to a query/document pair.</li> <li>The more frequent a term appears in a document, the higher the score for the document.</li> </ul> <h2 id=scoring-with-the-jaccard-coefficient>Scoring with the Jaccard Coefficient<a class=headerlink href=#scoring-with-the-jaccard-coefficient title="Permanent link">&para;</a></h2> <ul> <li>doesn't consider term frequency.</li> <li>wee need a better way of normalizing for length. (compare with cosine similarity)</li> </ul> <h2 id=term-frequency-weighting>Term frequency weighting<a class=headerlink href=#term-frequency-weighting title="Permanent link">&para;</a></h2> <ul> <li>binary vector <span><span class=MathJax_Preview>\in {0, 1}</span><script type=math/tex>\in {0, 1}</script></span></li> <li>count vector</li> <li>bag of words model</li> </ul> <div class="admonition tip"> <p class=admonition-title>Tip</p> <p>We want to use TF when computing query-document match scores, but the relevance does not increase proportionally with term frequency</p> </div> <h3 id=log-frequency-weighting>Log-frequency weighting<a class=headerlink href=#log-frequency-weighting title="Permanent link">&para;</a></h3> <div> <div class=MathJax_Preview> w_{t, d} = \begin{cases} 1 + \log_{10} (tf_{t,d}), &amp; tf_{t,d} \ge 0 \\ 0, &amp; \textrm{otherwise} \end{cases} </div> <script type="math/tex; mode=display">
w_{t, d} =
\begin{cases}
  1 + \log_{10} (tf_{t,d}), & tf_{t,d} \ge 0 \\
  0,  &  \textrm{otherwise}
\end{cases}
</script> </div> <p>Score for a document-query pair: sum over terms in both <span><span class=MathJax_Preview>q</span><script type=math/tex>q</script></span> and <span><span class=MathJax_Preview>d</span><script type=math/tex>d</script></span>:</p> <div> <div class=MathJax_Preview> \textrm{score} = \sum_{t\in q \cap d} (1 + \log_{10} (tf_{t, d})) </div> <script type="math/tex; mode=display">
\textrm{score} = \sum_{t\in q \cap d} (1 + \log_{10} (tf_{t, d}))
</script> </div> <p>The score is <span><span class=MathJax_Preview>0</span><script type=math/tex>0</script></span> if none of the terms is presented in the document.</p> <h2 id=inverted-document-frequency-weighting>(Inverted) Document frequency weighting<a class=headerlink href=#inverted-document-frequency-weighting title="Permanent link">&para;</a></h2> <ul> <li>idea: Rare terms are more informative than frequent terms.</li> <li><span><span class=MathJax_Preview>df_t</span><script type=math/tex>df_t</script></span> is an inverse measure of informativeness of term <span><span class=MathJax_Preview>t</span><script type=math/tex>t</script></span>.</li> <li>There is one idf value for each term <span><span class=MathJax_Preview>t</span><script type=math/tex>t</script></span> in a collection.</li> </ul> <div> <div class=MathJax_Preview> idf_t = \log_{10}(N/df_t) </div> <script type="math/tex; mode=display">
idf_t = \log_{10}(N/df_t)
</script> </div> <p><img alt="IDF example" src=../fig/idf-example.png></p> <div class="admonition question"> <p class=admonition-title>Question</p> <p>Does idf have an effect on ranking for one-term queries, like "iPhone"? The answer is no, but why?</p> </div> <h2 id=collection-frequency-vs-document-frequency>collection frequency vs document frequency<a class=headerlink href=#collection-frequency-vs-document-frequency title="Permanent link">&para;</a></h2> <p><img alt="collection frequency" src=../fig/collection-freq.png></p> <h2 id=tf-idf-weighting>TF-IDF weighting<a class=headerlink href=#tf-idf-weighting title="Permanent link">&para;</a></h2> <div> <div class=MathJax_Preview> \textrm{score}(q, d) = \sum_{t\in q \cap d} tf_{t, d} \times idf_{t} </div> <script type="math/tex; mode=display">
\textrm{score}(q, d) = \sum_{t\in q \cap d} tf_{t, d} \times idf_{t}
</script> </div> <ul> <li>binary vector -&gt; count vector -&gt; weight matrix</li> </ul> <h2 id=vector-space-model>Vector Space Model<a class=headerlink href=#vector-space-model title="Permanent link">&para;</a></h2> <ul> <li>Euclidean distance, not a good option. because different vector length can have large distance</li> </ul> <h2 id=application-for-https-request-embedding>application for https request embedding<a class=headerlink href=#application-for-https-request-embedding title="Permanent link">&para;</a></h2> <p>If we can build a dataset, given a "query", it can efficiently retrive how many relevant "document" are in the past 2 hours? We will be able to tell wether the "query" is mallicious or not.</p> <p>in anti-abuse, we can use the current request as the query, all the reprevious request data that are indexed as the "documents". This will give us a score about the current request. This score can tell us the malliciousness of the request.</p> <h2 id=problem>problem<a class=headerlink href=#problem title="Permanent link">&para;</a></h2> <ul> <li>Current distribution score cannot identify scraping that routates headers.<ul> <li>How to up weight bad requests with certain patterns?</li> </ul> </li> <li>Currently, no good way to block signals with low false positives.<ul> <li>How to use score instead of text pattern matching to reduce false positives?</li> </ul> </li> </ul> <h2 id=solution>Solution<a class=headerlink href=#solution title="Permanent link">&para;</a></h2> <h3 id=calculate-tf-idf-for-individual-header-fields>calculate tf-idf for individual header fields<a class=headerlink href=#calculate-tf-idf-for-individual-header-fields title="Permanent link">&para;</a></h3> <p>This solution models a collection of requests during a window as a document.</p> <ul> <li>term frequency = count of each UA, HC, CC, and RF in a time window</li> <li>document frequency = count of how many windows each UA, HC, CC, and RF occurs</li> </ul> <p>The window can be a time window or a fixed size window. In the fixed size window, instead of dividing by equal time slots, we divide by the fixed number of requests and treat each collection as a document. This model can also be used for the tokenized solution.</p> <h3 id=tokenize-all-request-facets>tokenize all request facets<a class=headerlink href=#tokenize-all-request-facets title="Permanent link">&para;</a></h3> <p>This solution is to break down the header fields into tokens and use a set of tokens as the query. Compare this to a phrase retrival task.</p> <p>term frequency = count of each token</p> <div class="admonition question"> <p class=admonition-title>Question</p> <p>Can we use the cosine similarity to compare two queries? Because the similarity measure described in the lectures is for query-document pair. Can we compare query-query pair? Whether the TF-IDF embedding can capture enough similarity info and used for clustering?</p> </div> <h2 id=intuitions>Intuitions<a class=headerlink href=#intuitions title="Permanent link">&para;</a></h2> <p>Using TF-IDF, we can measure the speed of damage from requests possess similar attributes (belongs to certain attacks). Specifically, given a request in realtime, it can check the current TF, and DF, and calculate the TF-IDF. All these three values are useful for us.</p> <ul> <li>TF - If TF is greater than a threshold setting. We can it is may be a high qps scraping. If TF is moderate or very small, we can check DF.</li> <li>DF - If DF is very large, the "term" maybe common to all sample in the space. If DF streak is not long enough in a series of previous documents. there might be a spike of increase for the term in some window before. If DF is very small, and the TF is large, we detected a spike.</li> </ul> <table> <thead> <tr> <th>#</th> <th>TF</th> <th>DF</th> <th>result</th> <th></th> </tr> </thead> <tbody> <tr> <td>1</td> <td>large</td> <td>small</td> <td>bad</td> <td>v</td> </tr> <tr> <td>2</td> <td>large</td> <td>large</td> <td>bad/good</td> <td>x</td> </tr> <tr> <td>3</td> <td>small</td> <td>large</td> <td>bad/good</td> <td>x</td> </tr> <tr> <td>4</td> <td>small</td> <td>small</td> <td>good</td> <td>x</td> </tr> </tbody> </table> <p>TF and IDF used separately can help to observe bad signals, but they are not enough. We will need to use TF-IDF to help us to enhance our believe about the badness of a request.</p> <p>TF-IDF</p> <h2 id=practical-consideration>Practical consideration<a class=headerlink href=#practical-consideration title="Permanent link">&para;</a></h2> <ul> <li>How to calculation TF-IDF in sliding windows?</li> </ul> <p>title: HTTP requests embedding to score and search bot traffic.</p> </article> </div> </div> </main> <footer class=md-footer> <div class=md-footer-nav> <nav class="md-footer-nav__inner md-grid" aria-label=Footer> <a href=../../contextual-bandit/notes/ class="md-footer-nav__link md-footer-nav__link--prev" rel=prev> <div class="md-footer-nav__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </div> <div class=md-footer-nav__title> <div class=md-ellipsis> <span class=md-footer-nav__direction> Previous </span> Contextual Multi-Armed Bandit </div> </div> </a> <a href=../../../seedlabs/ class="md-footer-nav__link md-footer-nav__link--next" rel=next> <div class=md-footer-nav__title> <div class=md-ellipsis> <span class=md-footer-nav__direction> Next </span> Index </div> </div> <div class="md-footer-nav__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg> </div> </a> </nav> </div> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-footer-copyright> <div class=md-footer-copyright__highlight> Copyright &copy; 2020 Rui Han </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> </div> </div> </footer> </div> <script src=../../../assets/javascripts/vendor.77e55a48.min.js></script> <script src=../../../assets/javascripts/bundle.9554a270.min.js></script><script id=__lang type=application/json>{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing"}</script> <script>
        app = initialize({
          base: "../../..",
          features: ['navigation.tabs'],
          search: Object.assign({
            worker: "../../../assets/javascripts/worker/search.4ac00218.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script> <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML"></script> </body> </html>