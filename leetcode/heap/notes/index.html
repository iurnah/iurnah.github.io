<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="ie=edge"><link href=https://ruihan.org/leetcode/heap/notes/ rel=canonical><meta name=lang:clipboard.copy content="Copy to clipboard"><meta name=lang:clipboard.copied content="Copied to clipboard"><meta name=lang:search.language content=en><meta name=lang:search.pipeline.stopwords content=True><meta name=lang:search.pipeline.trimmer content=True><meta name=lang:search.result.none content="No matching documents"><meta name=lang:search.result.one content="1 matching document"><meta name=lang:search.result.other content="# matching documents"><meta name=lang:search.tokenizer content=[\s\-]+><link rel="shortcut icon" href=../../../assets/images/favicon.png><meta name=generator content="mkdocs-1.1, mkdocs-material-4.6.3"><title>Heap - RUIHAN.ORG</title><link rel=stylesheet href=../../../assets/stylesheets/application.adb8469c.css><link rel=stylesheet href=../../../assets/stylesheets/application-palette.a8b3c06d.css><meta name=theme-color content><script src=../../../assets/javascripts/modernizr.86422ebf.js></script><link href=https://fonts.gstatic.com rel=preconnect crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback"><style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style><link rel=stylesheet href=../../../assets/fonts/material-icons.css></head> <body dir=ltr data-md-color-primary=black data-md-color-accent=black> <svg class=md-svg> <defs> <svg xmlns=http://www.w3.org/2000/svg width=416 height=448 viewbox="0 0 416 448" id=__github><path fill=currentColor d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg> </defs> </svg> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay data-md-component=overlay for=__drawer></label> <a href=#heap tabindex=0 class=md-skip> Skip to content </a> <header class=md-header data-md-component=header> <nav class="md-header-nav md-grid"> <div class=md-flex> <div class="md-flex__cell md-flex__cell--shrink"> <a href=https://ruihan.org title=RUIHAN.ORG aria-label=RUIHAN.ORG class="md-header-nav__button md-logo"> <i class=md-icon></i> </a> </div> <div class="md-flex__cell md-flex__cell--shrink"> <label class="md-icon md-icon--menu md-header-nav__button" for=__drawer></label> </div> <div class="md-flex__cell md-flex__cell--stretch"> <div class="md-flex__ellipsis md-header-nav__title" data-md-component=title> <span class=md-header-nav__topic> RUIHAN.ORG </span> <span class=md-header-nav__topic> Heap </span> </div> </div> <div class="md-flex__cell md-flex__cell--shrink"> <label class="md-icon md-icon--search md-header-nav__button" for=__search></label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input aria-label=search name=query placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=query data-md-state=active> <label class="md-icon md-search__icon" for=__search></label> <button type=reset class="md-icon md-search__icon" data-md-component=reset tabindex=-1> &#xE5CD; </button> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=result> <div class=md-search-result__meta> Type to start searching </div> <ol class=md-search-result__list></ol> </div> </div> </div> </div> </div> </div> <div class="md-flex__cell md-flex__cell--shrink"> <div class=md-header-nav__source> <a href=https://github.com/iurnah/ruihan.org title="Go to repository" class=md-source data-md-source=github> <div class=md-source__icon> <svg viewbox="0 0 24 24" width=24 height=24> <use xlink:href=#__github width=24 height=24></use> </svg> </div> <div class=md-source__repository> iurnah/ruihan.org </div> </a> </div> </div> </div> </nav> </header> <div class=md-container> <nav class="md-tabs md-tabs--active" data-md-component=tabs> <div class="md-tabs__inner md-grid"> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../../../books/ class=md-tabs__link> Books </a> </li> <li class=md-tabs__item> <a href=../../../courses/ class=md-tabs__link> Courses </a> </li> <li class=md-tabs__item> <a href=../../ class="md-tabs__link md-tabs__link--active"> Leetcode </a> </li> <li class=md-tabs__item> <a href=../../../research/ class=md-tabs__link> Research </a> </li> <li class=md-tabs__item> <a href=../../../seedlabs/ class=md-tabs__link> SEED Labs </a> </li> <li class=md-tabs__item> <a href=../../../system-design/ class=md-tabs__link> System Design </a> </li> </ul> </div> </nav> <main class=md-main role=main> <div class="md-main__inner md-grid" data-md-component=container> <div class="md-sidebar md-sidebar--primary" data-md-component=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" data-md-level=0> <label class="md-nav__title md-nav__title--site" for=__drawer> <a href=https://ruihan.org title=RUIHAN.ORG class="md-nav__button md-logo"> <i class=md-icon></i> </a> RUIHAN.ORG </label> <div class=md-nav__source> <a href=https://github.com/iurnah/ruihan.org title="Go to repository" class=md-source data-md-source=github> <div class=md-source__icon> <svg viewbox="0 0 24 24" width=24 height=24> <use xlink:href=#__github width=24 height=24></use> </svg> </div> <div class=md-source__repository> iurnah/ruihan.org </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-1 type=checkbox id=nav-1> <label class=md-nav__link for=nav-1> Books </label> <nav class=md-nav data-md-component=collapsible data-md-level=1> <label class=md-nav__title for=nav-1> Books </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../books/ title=Index class=md-nav__link> Index </a> </li> <li class=md-nav__item> <a href=../../../books/accelerated-cpp/notes/ title="Accelerated C++" class=md-nav__link> Accelerated C++ </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-2 type=checkbox id=nav-2> <label class=md-nav__link for=nav-2> Courses </label> <nav class=md-nav data-md-component=collapsible data-md-level=1> <label class=md-nav__title for=nav-2> Courses </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../courses/ title=Index class=md-nav__link> Index </a> </li> <li class=md-nav__item> <a href=../../../courses/stanford-machine-learning/notes.md title="Stanford Machine Learning" class=md-nav__link> Stanford Machine Learning </a> </li> <li class=md-nav__item> <a href=../../../courses/cs224n/lec-notes/ title="CS224N Lecture Notes" class=md-nav__link> CS224N Lecture Notes </a> </li> <li class=md-nav__item> <a href=../../../courses/cs224n/write-up/ title="CS224N Write-up" class=md-nav__link> CS224N Write-up </a> </li> <li class=md-nav__item> <a href=../../../courses/6.431-probability/notes/ title="6.431 Probability" class=md-nav__link> 6.431 Probability </a> </li> <li class=md-nav__item> <a href=../../../courses/learning-from-data/notes.md title="Learning From Data" class=md-nav__link> Learning From Data </a> </li> <li class=md-nav__item> <a href=../../../courses/9chap-system-design/notes/ title="Nine Chapter System Design" class=md-nav__link> Nine Chapter System Design </a> </li> <li class=md-nav__item> <a href=../../../courses/9chap-dynamic-prog/notes/ title="Nine Chapter Dynamic Programming" class=md-nav__link> Nine Chapter Dynamic Programming </a> </li> <li class=md-nav__item> <a href=../../../courses/func-prog-in-scala/notes/ title="Functional Programming Principles in Scala" class=md-nav__link> Functional Programming Principles in Scala </a> </li> <li class=md-nav__item> <a href=../../../courses/applied-scrum-for-agile/notes/ title="Applied Scrum for Agile Project Management" class=md-nav__link> Applied Scrum for Agile Project Management </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-3 type=checkbox id=nav-3 checked> <label class=md-nav__link for=nav-3> Leetcode </label> <nav class=md-nav data-md-component=collapsible data-md-level=1> <label class=md-nav__title for=nav-3> Leetcode </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../ title=Index class=md-nav__link> Index </a> </li> <li class=md-nav__item> <a href=../../array/notes/ title=Array class=md-nav__link> Array </a> </li> <li class=md-nav__item> <a href=../../backtracking/notes/ title=Backtracking class=md-nav__link> Backtracking </a> </li> <li class=md-nav__item> <a href=../../binary-search/notes/ title="Binary Search" class=md-nav__link> Binary Search </a> </li> <li class=md-nav__item> <a href=../../breadth-first-search/notes/ title="Breadth-First Search (BFS)" class=md-nav__link> Breadth-First Search (BFS) </a> </li> <li class=md-nav__item> <a href=../../depth-first-search/notes/ title="Depth-First Search (DFS)" class=md-nav__link> Depth-First Search (DFS) </a> </li> <li class=md-nav__item> <a href=../../dynamic-programming/notes/ title="Dynamic Programming" class=md-nav__link> Dynamic Programming </a> </li> <li class=md-nav__item> <a href=../../graph/notes/ title=Graph class=md-nav__link> Graph </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-toggle md-nav__toggle" data-md-toggle=toc type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> Heap </label> <a href=./ title=Heap class="md-nav__link md-nav__link--active"> Heap </a> <nav class="md-nav md-nav--secondary"> <label class=md-nav__title for=__toc>Table of contents</label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=#binary-heap-properties class=md-nav__link> Binary heap properties </a> </li> <li class=md-nav__item> <a href=#heap-sort class=md-nav__link> Heap sort </a> <nav class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a href=#heap-implementation-using-array class=md-nav__link> Heap implementation using array </a> </li> <li class=md-nav__item> <a href=#heap-implementation-using-heapnode class=md-nav__link> Heap implementation using HeapNode </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#priority-queue-operations class=md-nav__link> Priority queue operations </a> <nav class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a href=#supported-operations class=md-nav__link> Supported operations </a> </li> <li class=md-nav__item> <a href=#c-stl-priority-queue class=md-nav__link> C++ STL priority queue </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#priority-queue class=md-nav__link> Priority Queue </a> <nav class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a href=#merge-k-sorted-lists class=md-nav__link> Merge k Sorted Lists </a> </li> <li class=md-nav__item> <a href=#minimum-unique-word-abbreviation class=md-nav__link> Minimum Unique Word Abbreviation </a> </li> <li class=md-nav__item> <a href=#smallest-range-covering-elements-from-k-lists class=md-nav__link> Smallest Range Covering Elements from K Lists </a> </li> <li class=md-nav__item> <a href=#kth-largest-element-in-an-array class=md-nav__link> Kth Largest Element in an Array </a> </li> <li class=md-nav__item> <a href=#the-skyline-problem class=md-nav__link> The Skyline Problem </a> <nav class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a href=#sliding-window-median class=md-nav__link> Sliding Window Median </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#use-priority-queue-to-rearange-tasks-characters-string-etc class=md-nav__link> Use priority queue to rearange tasks (characters, string, etc.) </a> <nav class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a href=#rearrange-string-k-distance-apart class=md-nav__link> Rearrange String k Distance Apart </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#task-scheduler class=md-nav__link> Task Scheduler </a> <nav class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a href=#reorganize-string class=md-nav__link> Reorganize String </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#topological-sorting class=md-nav__link> Topological sorting </a> <nav class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a href=#course-schedule class=md-nav__link> Course Schedule </a> </li> <li class=md-nav__item> <a href=#course-schedule-ii class=md-nav__link> Course Schedule II </a> </li> <li class=md-nav__item> <a href=#alien-dictionary class=md-nav__link> Alien Dictionary </a> </li> <li class=md-nav__item> <a href=#sequence-reconstruction class=md-nav__link> Sequence Reconstruction </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../interval/notes/ title=Interval class=md-nav__link> Interval </a> </li> <li class=md-nav__item> <a href=../../linked-list/notes/ title="Linked List" class=md-nav__link> Linked List </a> </li> <li class=md-nav__item> <a href=../../stack/notes/ title=Stack class=md-nav__link> Stack </a> </li> <li class=md-nav__item> <a href=../../string/notes/ title=String class=md-nav__link> String </a> </li> <li class=md-nav__item> <a href=../../tree/notes/ title=Tree class=md-nav__link> Tree </a> </li> <li class=md-nav__item> <a href=../../trie/notes/ title=Trie class=md-nav__link> Trie </a> </li> <li class=md-nav__item> <a href=../../union-find/notes/ title="Union Find" class=md-nav__link> Union Find </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-4 type=checkbox id=nav-4> <label class=md-nav__link for=nav-4> Research </label> <nav class=md-nav data-md-component=collapsible data-md-level=1> <label class=md-nav__title for=nav-4> Research </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../research/ title=Index class=md-nav__link> Index </a> </li> <li class=md-nav__item> <a href=../../../research/paper-reading/notes/ title="Paper Reading" class=md-nav__link> Paper Reading </a> </li> <li class=md-nav__item> <a href=../../../research/coalition-game/notes/ title="Coalition Game" class=md-nav__link> Coalition Game </a> </li> <li class=md-nav__item> <a href=../../../research/contextual-bandit/notes/ title="Contextual Multi-Armed Bandit" class=md-nav__link> Contextual Multi-Armed Bandit </a> </li> <li class=md-nav__item> <a href=../../../research/tfidf-score/notes/ title="TF-IDF for Information Retrieval" class=md-nav__link> TF-IDF for Information Retrieval </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-5 type=checkbox id=nav-5> <label class=md-nav__link for=nav-5> SEED Labs </label> <nav class=md-nav data-md-component=collapsible data-md-level=1> <label class=md-nav__title for=nav-5> SEED Labs </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../seedlabs/ title=Index class=md-nav__link> Index </a> </li> <li class=md-nav__item> <a href=../../../seedlabs/applied-crypto/notes/ title="Applied Cryptograph Notes" class=md-nav__link> Applied Cryptograph Notes </a> </li> <li class=md-nav__item> <a href=../../../seedlabs/public-key-cryptography-and-pki/notes/ title="Public Key Cryptography and PKI" class=md-nav__link> Public Key Cryptography and PKI </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-6 type=checkbox id=nav-6> <label class=md-nav__link for=nav-6> System Design </label> <nav class=md-nav data-md-component=collapsible data-md-level=1> <label class=md-nav__title for=nav-6> System Design </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../system-design/ title=Index class=md-nav__link> Index </a> </li> <li class=md-nav__item> <a href=../../../system-design/concepts/notes/ title="Distributed System Concepts" class=md-nav__link> Distributed System Concepts </a> </li> <li class=md-nav__item> <a href=../../../system-design/patterns/notes/ title="Design Patterns" class=md-nav__link> Design Patterns </a> </li> <li class=md-nav__item> <a href=../../../system-design/problems/tinyurl/notes/ title="How to Design TinyUrl" class=md-nav__link> How to Design TinyUrl </a> </li> <li class=md-nav__item> <a href=../../../system-design/problems/twitter/notes/ title="How to Design Twitter" class=md-nav__link> How to Design Twitter </a> </li> <li class=md-nav__item> <a href=../../../system-design/problems/ticketmaster/notes/ title="How to Design Ticketmaster" class=md-nav__link> How to Design Ticketmaster </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary"> <label class=md-nav__title for=__toc>Table of contents</label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=#binary-heap-properties class=md-nav__link> Binary heap properties </a> </li> <li class=md-nav__item> <a href=#heap-sort class=md-nav__link> Heap sort </a> <nav class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a href=#heap-implementation-using-array class=md-nav__link> Heap implementation using array </a> </li> <li class=md-nav__item> <a href=#heap-implementation-using-heapnode class=md-nav__link> Heap implementation using HeapNode </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#priority-queue-operations class=md-nav__link> Priority queue operations </a> <nav class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a href=#supported-operations class=md-nav__link> Supported operations </a> </li> <li class=md-nav__item> <a href=#c-stl-priority-queue class=md-nav__link> C++ STL priority queue </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#priority-queue class=md-nav__link> Priority Queue </a> <nav class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a href=#merge-k-sorted-lists class=md-nav__link> Merge k Sorted Lists </a> </li> <li class=md-nav__item> <a href=#minimum-unique-word-abbreviation class=md-nav__link> Minimum Unique Word Abbreviation </a> </li> <li class=md-nav__item> <a href=#smallest-range-covering-elements-from-k-lists class=md-nav__link> Smallest Range Covering Elements from K Lists </a> </li> <li class=md-nav__item> <a href=#kth-largest-element-in-an-array class=md-nav__link> Kth Largest Element in an Array </a> </li> <li class=md-nav__item> <a href=#the-skyline-problem class=md-nav__link> The Skyline Problem </a> <nav class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a href=#sliding-window-median class=md-nav__link> Sliding Window Median </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#use-priority-queue-to-rearange-tasks-characters-string-etc class=md-nav__link> Use priority queue to rearange tasks (characters, string, etc.) </a> <nav class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a href=#rearrange-string-k-distance-apart class=md-nav__link> Rearrange String k Distance Apart </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#task-scheduler class=md-nav__link> Task Scheduler </a> <nav class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a href=#reorganize-string class=md-nav__link> Reorganize String </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#topological-sorting class=md-nav__link> Topological sorting </a> <nav class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a href=#course-schedule class=md-nav__link> Course Schedule </a> </li> <li class=md-nav__item> <a href=#course-schedule-ii class=md-nav__link> Course Schedule II </a> </li> <li class=md-nav__item> <a href=#alien-dictionary class=md-nav__link> Alien Dictionary </a> </li> <li class=md-nav__item> <a href=#sequence-reconstruction class=md-nav__link> Sequence Reconstruction </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class=md-content> <article class="md-content__inner md-typeset"> <h1 id=heap>Heap<a class=headerlink href=#heap title="Permanent link">&para;</a></h1> <h2 id=binary-heap-properties>Binary heap properties<a class=headerlink href=#binary-heap-properties title="Permanent link">&para;</a></h2> <p><img alt="Binary Heap" src=../fig/binary-heap.png></p> <ul> <li>Usually implemented using an array of elements but visualized as a complete binary tree (not a full binary tree).</li> <li>From the array index, we can compute the parent index from child's index and vice versa. The element values are partially ordered, briefly, they are ordered level by level. There is no ordering information of element values in the same level.</li> <li>The minimum number of elements in a binary heap with height <span><span class=MathJax_Preview>h</span><script type=math/tex>h</script></span> is <span><span class=MathJax_Preview>2^h</span><script type=math/tex>2^h</script></span>, the maximum elements in it is <span><span class=MathJax_Preview>2^{h + 1} - 1</span><script type=math/tex>2^{h + 1} - 1</script></span></li> <li>The height of a binary heap is the floor of <span><span class=MathJax_Preview>\log n</span><script type=math/tex>\log n</script></span>. <span><span class=MathJax_Preview>n</span><script type=math/tex>n</script></span> is the total number of elements.</li> <li>The minimum element of a maximum heap is in the leaf nodes.</li> <li>With the array representation for storing an n-element heap, the leaves are the nodes indexed by <span><span class=MathJax_Preview>\lfloor n/2 \rfloor + 1, \lfloor n/2 \rfloor + 2, \dots, n</span><script type=math/tex>\lfloor n/2 \rfloor + 1, \lfloor n/2 \rfloor + 2, \dots, n</script></span>.</li> </ul> <h2 id=heap-sort>Heap sort<a class=headerlink href=#heap-sort title="Permanent link">&para;</a></h2> <h3 id=heap-implementation-using-array>Heap implementation using array<a class=headerlink href=#heap-implementation-using-array title="Permanent link">&para;</a></h3> <h3 id=heap-implementation-using-heapnode>Heap implementation using HeapNode<a class=headerlink href=#heap-implementation-using-heapnode title="Permanent link">&para;</a></h3> <h2 id=priority-queue-operations>Priority queue operations<a class=headerlink href=#priority-queue-operations title="Permanent link">&para;</a></h2> <h3 id=supported-operations>Supported operations<a class=headerlink href=#supported-operations title="Permanent link">&para;</a></h3> <table> <thead> <tr> <th>#</th> <th>Operation</th> <th>complexity</th> <th>comment</th> </tr> </thead> <tbody> <tr> <td>1</td> <td>buildMaxHeap(A)</td> <td><span><span class=MathJax_Preview>O(n)</span><script type=math/tex>O(n)</script></span></td> <td>Build a priority queue routine iteratively call <code>maxHeapify()</code> <span><span class=MathJax_Preview>n</span><script type=math/tex>n</script></span> times. The complexity is <span><span class=MathJax_Preview>O(n)</span><script type=math/tex>O(n)</script></span> instead of <span><span class=MathJax_Preview>O(n \log n)</span><script type=math/tex>O(n \log n)</script></span></td> </tr> <tr> <td>2</td> <td>maxHeapify(A, i)</td> <td><span><span class=MathJax_Preview>O(\log n)</span><script type=math/tex>O(\log n)</script></span></td> <td>Maintains the heap properties for subtree rooted at <code>i</code>. Assumes the subtrees of <code>i</code> are max heap before calling this routine.</td> </tr> <tr> <td>3</td> <td>insert()</td> <td><span><span class=MathJax_Preview>O(\log n)</span><script type=math/tex>O(\log n)</script></span></td> <td>Insert a element to the heap.</td> </tr> <tr> <td>4</td> <td>peekMaximum()</td> <td><span><span class=MathJax_Preview>O(1)</span><script type=math/tex>O(1)</script></span></td> <td>Return the max element without remove it from the max-heap.</td> </tr> <tr> <td>5</td> <td>popMaximum()</td> <td><span><span class=MathJax_Preview>O(\log n)</span><script type=math/tex>O(\log n)</script></span></td> <td>Remove the max element from the max-heap.</td> </tr> <tr> <td>6</td> <td>increaseKey()</td> <td><span><span class=MathJax_Preview>O(\log n)</span><script type=math/tex>O(\log n)</script></span></td> <td>Update the element's key. This essentially changed the priority of an element.</td> </tr> <tr> <td>7</td> <td>delete()</td> <td></td> <td>Not supported by the binary heap implementation, but can be achieved by introduce more complex data structures.</td> </tr> </tbody> </table> <h3 id=c-stl-priority-queue>C++ STL priority queue<a class=headerlink href=#c-stl-priority-queue title="Permanent link">&para;</a></h3> <ul> <li> <p>Notice if the elements in the queue is some complex container or object, you have to declare <code>priority_queue</code> with its underline container type, and the binary predicate <code>std::greater</code> if necessary. Here is example in the solution of the problem <a href=#minimum-unique-word-abbreviation>Minimum Unique Word Abbreviation</a></p> <div class=codehilite><pre><span></span><code><span class=n>priority_queue</span><span class=o>&lt;</span><span class=n>pair</span><span class=o>&lt;</span><span class=kt>int</span><span class=p>,</span> <span class=n>string</span><span class=o>&gt;</span><span class=p>,</span> <span class=n>vector</span><span class=o>&lt;</span><span class=n>pair</span><span class=o>&lt;</span><span class=kt>int</span><span class=p>,</span> <span class=n>string</span><span class=o>&gt;&gt;</span><span class=p>,</span> <span class=n>greater</span><span class=o>&lt;</span><span class=n>pair</span><span class=o>&lt;</span><span class=kt>int</span><span class=p>,</span> <span class=n>string</span><span class=o>&gt;&gt;&gt;</span> <span class=n>pq</span><span class=p>;</span>
</code></pre></div> </li> <li> <p>This line of code declared a priority queue <code>pq</code>, whose element is <code>piar&lt;int, string&gt;</code>, with the minimum element on the top. But minimum what? How the priority queue sort a <code>pair&lt;int, string&gt;</code> element? In this case it implicitly sort the <code>pair&lt;int, string&gt;</code> element base on the first int value. How can we sort the priority queue element based on the second value of the <code>pair&lt;int, string&gt;</code>. To achieve that, we cannot use the building function object greater we have write a customized function object and pass to the declaration of the pq like this,</p> <div class=codehilite><pre><span></span><code><span class=k>class</span> <span class=nc>mycomparison</span>
<span class=p>{</span>
<span class=k>public</span><span class=o>:</span>
    <span class=n>mycomparison</span><span class=p>()</span> <span class=p>{}</span>
    <span class=kt>bool</span> <span class=k>operator</span><span class=p>()</span> <span class=p>(</span><span class=k>const</span> <span class=n>pair</span><span class=o>&lt;</span><span class=kt>int</span><span class=p>,</span><span class=n>string</span><span class=o>&gt;</span> <span class=o>&amp;</span><span class=n>a</span><span class=p>,</span>
                     <span class=k>const</span> <span class=n>pair</span><span class=o>&lt;</span><span class=kt>int</span><span class=p>,</span><span class=n>string</span><span class=o>&gt;</span> <span class=o>&amp;</span><span class=n>b</span><span class=p>)</span> <span class=k>const</span>
    <span class=p>{</span>
        <span class=k>return</span> <span class=n>a</span><span class=p>.</span><span class=n>second</span><span class=p>.</span><span class=n>compare</span><span class=p>(</span><span class=n>b</span><span class=p>.</span><span class=n>second</span><span class=p>);</span>
    <span class=p>}</span>
<span class=p>};</span>
<span class=p>...</span>
<span class=n>priority_queue</span><span class=o>&lt;</span><span class=n>pair</span><span class=o>&lt;</span><span class=kt>int</span><span class=p>,</span> <span class=n>string</span><span class=o>&gt;</span><span class=p>,</span> <span class=n>vector</span><span class=o>&lt;</span><span class=n>pair</span><span class=o>&lt;</span><span class=kt>int</span><span class=p>,</span> <span class=n>string</span><span class=o>&gt;&gt;</span><span class=p>,</span> <span class=n>mycomparison</span><span class=o>&gt;</span> <span class=n>pq</span><span class=p>;</span>
<span class=p>...</span>
</code></pre></div> </li> <li> <p>We may need to write customized binary predicate function in order to implement the <code>min-heap</code> or <code>max-heap</code>. The binary predication function is depends on the underline container and also the type of the container element.</p> </li> </ul> <h2 id=priority-queue>Priority Queue<a class=headerlink href=#priority-queue title="Permanent link">&para;</a></h2> <h3 id=merge-k-sorted-lists>Merge k Sorted Lists<a class=headerlink href=#merge-k-sorted-lists title="Permanent link">&para;</a></h3> <p>Solution 1 Priority queue</p> <ul> <li>Use a min priority queue to store all the list, iteratively pop the "min list", take the head node to the final list and push back to the priority queue if the "min list" still have node.</li> <li>Priority queue solution is <span><span class=MathJax_Preview>O(N \log k)</span><script type=math/tex>O(N \log k)</script></span></li> </ul> <div class=codehilite><pre><span></span><code><span class=cm>/**</span>
<span class=cm> * Definition for singly-linked list.</span>
<span class=cm> * struct ListNode {</span>
<span class=cm> *     int val;</span>
<span class=cm> *     ListNode *next;</span>
<span class=cm> *     ListNode(int x) : val(x), next(NULL) {}</span>
<span class=cm> * };</span>
<span class=cm> */</span>
<span class=k>class</span> <span class=nc>listComparison</span> <span class=p>{</span>
<span class=k>public</span><span class=o>:</span>
    <span class=n>listComparison</span><span class=p>()</span> <span class=p>{}</span>
    <span class=kt>bool</span> <span class=k>operator</span><span class=p>(</span><span class=k>const</span> <span class=n>ListNode</span><span class=o>*</span> <span class=n>a</span><span class=p>,</span> <span class=k>const</span> <span class=n>ListNode</span><span class=o>*</span> <span class=n>b</span><span class=p>)</span> <span class=k>const</span> <span class=p>{</span>
        <span class=k>return</span> <span class=n>a</span><span class=o>-&gt;</span><span class=n>val</span> <span class=o>&gt;</span> <span class=n>b</span><span class=o>-&gt;</span><span class=n>val</span><span class=p>;</span>
    <span class=p>}</span>
<span class=p>}</span>

<span class=k>class</span> <span class=nc>Solution</span> <span class=p>{</span>
<span class=k>public</span><span class=o>:</span>
    <span class=n>ListNode</span><span class=o>*</span> <span class=n>mergeKLists</span><span class=p>(</span><span class=n>vector</span><span class=o>&lt;</span><span class=n>ListNode</span><span class=o>*&gt;&amp;</span> <span class=n>lists</span><span class=p>)</span> <span class=p>{</span>
        <span class=n>priority_queue</span><span class=o>&lt;</span><span class=n>ListNode</span><span class=o>*</span><span class=p>,</span> <span class=n>vector</span><span class=o>&lt;</span><span class=n>ListNode</span><span class=o>*&gt;</span><span class=p>,</span> <span class=n>listComparison</span><span class=o>&gt;</span> <span class=n>q</span><span class=p>;</span>
        <span class=k>for</span> <span class=p>(</span><span class=k>auto</span> <span class=nl>list</span> <span class=p>:</span> <span class=n>lists</span><span class=p>)</span> <span class=p>{</span>
            <span class=k>if</span> <span class=p>(</span><span class=n>list</span><span class=p>)</span> <span class=p>{</span>
                <span class=n>q</span><span class=p>.</span><span class=n>push</span><span class=p>(</span><span class=n>list</span><span class=p>);</span>
            <span class=p>}</span>
        <span class=p>}</span>

        <span class=n>ListNode</span> <span class=n>dummy</span><span class=p>(</span><span class=n>INT_MIN</span><span class=p>);</span>
        <span class=n>ListNode</span> <span class=o>*</span><span class=n>curr</span> <span class=o>=</span> <span class=o>&amp;</span><span class=n>dummy</span><span class=p>;</span>

        <span class=k>while</span> <span class=p>(</span><span class=o>!</span><span class=n>q</span><span class=p>.</span><span class=n>empty</span><span class=p>())</span> <span class=p>{</span>
            <span class=n>curr</span><span class=o>-&gt;</span><span class=n>next</span> <span class=o>=</span> <span class=n>q</span><span class=p>.</span><span class=n>top</span><span class=p>();</span> <span class=n>q</span><span class=p>.</span><span class=n>pop</span><span class=p>();</span>
            <span class=n>curr</span> <span class=o>=</span> <span class=n>curr</span><span class=o>-&gt;</span><span class=n>next</span><span class=p>;</span>
            <span class=k>if</span> <span class=p>(</span><span class=n>curr</span><span class=o>-&gt;</span><span class=n>next</span><span class=p>)</span> <span class=p>{</span>
                <span class=n>q</span><span class=p>.</span><span class=n>push</span><span class=p>(</span><span class=n>curr</span><span class=o>-&gt;</span><span class=n>next</span><span class=p>);</span>
            <span class=p>}</span>
        <span class=p>}</span>

        <span class=k>return</span> <span class=n>dummy</span><span class=p>.</span><span class=n>next</span><span class=p>;</span>
    <span class=p>}</span>
<span class=p>}</span>
</code></pre></div> <p>Solution 2 Divide and conquer merge</p> <ul> <li>Use the divide and conquer idea to reduce the problem to a smaller problem and then solve the smallest problem, combined together with the solution of small problems, we will arrived at the final solution.</li> <li>Compare the following solution to merge sort algorithm.</li> <li>The complexity is <span><span class=MathJax_Preview>O(N \log k)</span><script type=math/tex>O(N \log k)</script></span> . Because merge two list will take <span><span class=MathJax_Preview>O(N)</span><script type=math/tex>O(N)</script></span>, and we will do <span><span class=MathJax_Preview>O(\log k)</span><script type=math/tex>O(\log k)</script></span> time of merging.</li> </ul> <div class=codehilite><pre><span></span><code><span class=k>class</span> <span class=nc>Solution</span> <span class=p>{</span>
<span class=k>public</span><span class=o>:</span>
    <span class=n>ListNode</span><span class=o>*</span> <span class=n>mergeKLists</span><span class=p>(</span><span class=n>vector</span><span class=o>&lt;</span><span class=n>ListNode</span><span class=o>*&gt;&amp;</span> <span class=n>lists</span><span class=p>)</span> <span class=p>{</span>
        <span class=k>return</span> <span class=n>mergeKListsHelper</span><span class=p>(</span><span class=n>lists</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=n>lists</span><span class=p>.</span><span class=n>size</span><span class=p>()</span> <span class=o>-</span> <span class=mi>1</span><span class=p>);</span>
    <span class=p>}</span>

    <span class=n>ListNode</span><span class=o>*</span> <span class=n>mergeKListsHelper</span><span class=p>(</span><span class=n>vector</span><span class=o>&lt;</span><span class=n>ListNode</span><span class=o>*&gt;&amp;</span> <span class=n>lists</span><span class=p>,</span> <span class=kt>int</span> <span class=n>s</span><span class=p>,</span> <span class=kt>int</span> <span class=n>e</span><span class=p>)</span> <span class=p>{</span>
        <span class=k>if</span> <span class=p>(</span><span class=n>s</span> <span class=o>&gt;</span> <span class=n>e</span><span class=p>)</span> <span class=k>return</span> <span class=k>nullptr</span><span class=p>;</span>
        <span class=k>if</span> <span class=p>(</span><span class=n>s</span> <span class=o>==</span> <span class=n>e</span><span class=p>)</span> <span class=k>return</span> <span class=n>lists</span><span class=p>[</span><span class=n>s</span><span class=p>];</span>
        <span class=k>if</span> <span class=p>(</span><span class=n>s</span> <span class=o>&lt;</span> <span class=n>e</span><span class=p>)</span> <span class=p>{</span>
            <span class=kt>int</span> <span class=n>m</span> <span class=o>=</span> <span class=n>s</span> <span class=o>+</span> <span class=p>(</span><span class=n>e</span> <span class=o>-</span> <span class=n>s</span><span class=p>)</span> <span class=o>/</span> <span class=mi>2</span><span class=p>;</span>
            <span class=n>ListNode</span><span class=o>*</span> <span class=n>l1</span> <span class=o>=</span> <span class=n>mergeKListsHelper</span><span class=p>(</span><span class=n>lists</span><span class=p>,</span> <span class=n>s</span><span class=p>,</span> <span class=n>m</span><span class=p>);</span>
            <span class=n>ListNode</span><span class=o>*</span> <span class=n>l2</span> <span class=o>=</span> <span class=n>mergeKListsHelper</span><span class=p>(</span><span class=n>lists</span><span class=p>,</span> <span class=n>m</span> <span class=o>+</span> <span class=mi>1</span><span class=p>,</span> <span class=n>e</span><span class=p>);</span>
            <span class=k>return</span> <span class=nf>merge</span><span class=p>(</span><span class=n>l1</span><span class=p>,</span> <span class=n>l2</span><span class=p>);</span>
        <span class=p>}</span>
    <span class=p>}</span>

    <span class=n>ListNode</span><span class=o>*</span> <span class=n>merge</span><span class=p>(</span><span class=n>ListNode</span><span class=o>*</span> <span class=n>l1</span><span class=p>,</span> <span class=n>ListNode</span><span class=o>*</span> <span class=n>l2</span><span class=p>)</span> <span class=p>{</span>
        <span class=n>ListNode</span> <span class=n>dummy</span><span class=p>(</span><span class=n>INT_MIN</span><span class=p>);</span>
        <span class=n>ListNode</span> <span class=o>*</span><span class=n>curr</span> <span class=o>=</span> <span class=o>&amp;</span><span class=n>dummy</span><span class=p>;</span>

        <span class=k>while</span> <span class=p>(</span><span class=n>l1</span> <span class=o>&amp;&amp;</span> <span class=n>l2</span><span class=p>)</span> <span class=p>{</span>
            <span class=k>if</span> <span class=p>(</span><span class=n>l1</span><span class=o>-&gt;</span><span class=n>val</span> <span class=o>&lt;</span> <span class=n>l2</span><span class=o>-&gt;</span><span class=n>val</span><span class=p>)</span> <span class=p>{</span>
                <span class=n>curr</span><span class=o>-&gt;</span><span class=n>next</span> <span class=o>=</span> <span class=n>l1</span><span class=p>;</span>
                <span class=n>l1</span> <span class=o>=</span> <span class=n>l1</span><span class=o>-&gt;</span><span class=n>next</span><span class=p>;</span>
            <span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
                <span class=n>curr</span><span class=o>-&gt;</span><span class=n>next</span> <span class=o>=</span> <span class=n>l2</span><span class=p>;</span>
                <span class=n>l2</span> <span class=o>=</span> <span class=n>l2</span><span class=o>-&gt;</span><span class=n>next</span><span class=p>;</span>
            <span class=p>}</span>
            <span class=n>curr</span> <span class=o>=</span> <span class=n>curr</span><span class=o>-&gt;</span><span class=n>next</span><span class=p>;</span>
        <span class=p>}</span>

        <span class=n>curr</span><span class=o>-&gt;</span><span class=n>next</span> <span class=o>=</span> <span class=n>l1</span> <span class=o>?</span> <span class=nl>l1</span> <span class=p>:</span> <span class=n>l2</span><span class=p>;</span>

        <span class=k>return</span> <span class=n>dummy</span><span class=p>.</span><span class=n>next</span><span class=p>;</span>
    <span class=p>}</span>
<span class=p>};</span>
</code></pre></div> <h3 id=minimum-unique-word-abbreviation>Minimum Unique Word Abbreviation<a class=headerlink href=#minimum-unique-word-abbreviation title="Permanent link">&para;</a></h3> <h3 id=smallest-range-covering-elements-from-k-lists>Smallest Range Covering Elements from K Lists<a class=headerlink href=#smallest-range-covering-elements-from-k-lists title="Permanent link">&para;</a></h3> <p>Solution 1 Priority queue</p> <ul> <li>Notice this solution pushed some meta data to the priority queue.</li> </ul> <div class=codehilite><pre><span></span><code><span class=k>class</span> <span class=nc>Solution</span> <span class=p>{</span>
<span class=k>public</span><span class=o>:</span>
    <span class=k>struct</span> <span class=n>mycompare</span> <span class=p>{</span>
        <span class=kt>bool</span> <span class=k>operator</span> <span class=p>()</span> <span class=p>(</span><span class=n>pair</span><span class=o>&lt;</span><span class=kt>int</span><span class=p>,</span> <span class=kt>int</span><span class=o>&gt;&amp;</span> <span class=n>a</span><span class=p>,</span> <span class=n>pair</span><span class=o>&lt;</span><span class=kt>int</span><span class=p>,</span> <span class=kt>int</span><span class=o>&gt;&amp;</span> <span class=n>b</span><span class=p>)</span> <span class=p>{</span>
            <span class=k>return</span> <span class=n>a</span><span class=p>.</span><span class=n>first</span> <span class=o>&gt;</span> <span class=n>b</span><span class=p>.</span><span class=n>first</span><span class=p>;</span>
        <span class=p>}</span>  
    <span class=p>};</span>

    <span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;</span> <span class=n>smallestRange</span><span class=p>(</span><span class=n>vector</span><span class=o>&lt;</span><span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;&gt;&amp;</span> <span class=n>nums</span><span class=p>)</span> <span class=p>{</span>
        <span class=kt>int</span> <span class=n>n</span> <span class=o>=</span> <span class=n>nums</span><span class=p>.</span><span class=n>size</span><span class=p>();</span>
        <span class=n>priority_queue</span><span class=o>&lt;</span><span class=n>pair</span><span class=o>&lt;</span><span class=kt>int</span><span class=p>,</span> <span class=kt>int</span><span class=o>&gt;</span><span class=p>,</span> <span class=n>vector</span><span class=o>&lt;</span><span class=n>pair</span><span class=o>&lt;</span><span class=kt>int</span><span class=p>,</span> <span class=kt>int</span><span class=o>&gt;&gt;</span><span class=p>,</span> <span class=n>mycompare</span><span class=o>&gt;</span> <span class=n>pq</span><span class=p>;</span>

        <span class=kt>int</span> <span class=n>end</span> <span class=o>=</span> <span class=n>INT_MIN</span><span class=p>;</span>
        <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>n</span><span class=p>;</span> <span class=n>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
            <span class=n>end</span> <span class=o>=</span> <span class=n>max</span><span class=p>(</span><span class=n>end</span><span class=p>,</span> <span class=n>nums</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=mi>0</span><span class=p>]);</span>
            <span class=c1>// push the first element of kth vector and k to the pq</span>
            <span class=n>pq</span><span class=p>.</span><span class=n>push</span><span class=p>({</span><span class=n>nums</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=mi>0</span><span class=p>],</span> <span class=n>i</span><span class=p>});</span>
        <span class=p>}</span>

        <span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;</span> <span class=n>idx</span><span class=p>(</span><span class=n>n</span><span class=p>,</span> <span class=mi>0</span><span class=p>);</span> <span class=c1>// keep tracking the index to the k arrays.</span>

        <span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;</span> <span class=n>res</span> <span class=o>=</span> <span class=p>{</span><span class=o>-</span><span class=mi>100000</span><span class=p>,</span> <span class=mi>100000</span><span class=p>};</span> <span class=c1>// the range is given.</span>
        <span class=k>while</span> <span class=p>(</span><span class=n>pq</span><span class=p>.</span><span class=n>size</span><span class=p>()</span> <span class=o>==</span> <span class=n>n</span><span class=p>)</span> <span class=p>{</span>
            <span class=kt>int</span> <span class=n>start</span> <span class=o>=</span> <span class=n>pq</span><span class=p>.</span><span class=n>top</span><span class=p>().</span><span class=n>first</span><span class=p>;</span>
            <span class=kt>int</span> <span class=n>k</span> <span class=o>=</span> <span class=n>pq</span><span class=p>.</span><span class=n>top</span><span class=p>().</span><span class=n>second</span><span class=p>;</span>
            <span class=n>pq</span><span class=p>.</span><span class=n>pop</span><span class=p>();</span>

            <span class=k>if</span> <span class=p>(</span><span class=n>end</span> <span class=o>-</span> <span class=n>start</span> <span class=o>&lt;</span> <span class=n>res</span><span class=p>[</span><span class=mi>1</span><span class=p>]</span> <span class=o>-</span> <span class=n>res</span><span class=p>[</span><span class=mi>0</span><span class=p>])</span> <span class=p>{</span>
                <span class=n>res</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span> <span class=o>=</span> <span class=n>start</span><span class=p>;</span>
                <span class=n>res</span><span class=p>[</span><span class=mi>1</span><span class=p>]</span> <span class=o>=</span> <span class=n>end</span><span class=p>;</span>
            <span class=p>}</span>
            <span class=c1>// if nums[k] have more element, we push next to the queue.</span>
            <span class=k>if</span> <span class=p>(</span><span class=o>++</span><span class=n>idx</span><span class=p>[</span><span class=n>k</span><span class=p>]</span> <span class=o>&lt;</span> <span class=n>nums</span><span class=p>[</span><span class=n>k</span><span class=p>].</span><span class=n>size</span><span class=p>())</span> <span class=p>{</span>
                <span class=n>pq</span><span class=p>.</span><span class=n>push</span><span class=p>({</span><span class=n>nums</span><span class=p>[</span><span class=n>k</span><span class=p>][</span><span class=n>idx</span><span class=p>[</span><span class=n>k</span><span class=p>]],</span> <span class=n>k</span><span class=p>});</span>
                <span class=n>end</span> <span class=o>=</span> <span class=n>max</span><span class=p>(</span><span class=n>end</span><span class=p>,</span> <span class=n>nums</span><span class=p>[</span><span class=n>k</span><span class=p>][</span><span class=n>idx</span><span class=p>[</span><span class=n>k</span><span class=p>]]);</span>
            <span class=p>}</span>
        <span class=p>}</span>

        <span class=k>return</span> <span class=n>res</span><span class=p>;</span>
    <span class=p>}</span>
<span class=p>};</span>
</code></pre></div> <h3 id=kth-largest-element-in-an-array>Kth Largest Element in an Array<a class=headerlink href=#kth-largest-element-in-an-array title="Permanent link">&para;</a></h3> <p>Solution 1 priority queue</p> <ul> <li>Build a heap takes <code>O(n)</code>.</li> <li>max-heap <code>O(n) + O(klogk)</code>.</li> </ul> <div class=codehilite><pre><span></span><code><span class=k>class</span> <span class=nc>Solution</span> <span class=p>{</span>
<span class=k>public</span><span class=o>:</span>
    <span class=kt>int</span> <span class=n>findKthLargest</span><span class=p>(</span><span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;&amp;</span> <span class=n>nums</span><span class=p>,</span> <span class=kt>int</span> <span class=n>k</span><span class=p>)</span> <span class=p>{</span>
        <span class=n>priority_queue</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;</span> <span class=n>pq</span><span class=p>(</span><span class=n>nums</span><span class=p>.</span><span class=n>begin</span><span class=p>(),</span> <span class=n>nums</span><span class=p>.</span><span class=n>end</span><span class=p>());</span>
        <span class=n>k</span><span class=o>--</span><span class=p>;</span>
        <span class=k>while</span> <span class=p>(</span><span class=n>k</span><span class=o>--</span> <span class=o>&gt;</span> <span class=mi>0</span><span class=p>)</span> <span class=p>{</span>
            <span class=n>pq</span><span class=p>.</span><span class=n>pop</span><span class=p>();</span>
        <span class=p>}</span>

        <span class=k>return</span> <span class=n>pq</span><span class=p>.</span><span class=n>top</span><span class=p>();</span>
    <span class=p>}</span>
<span class=p>};</span>
</code></pre></div> <p>Solution 2 priority queue min-heap <code>O(n*logk)</code>.</p> <div class=codehilite><pre><span></span><code><span class=k>class</span> <span class=nc>Solution</span> <span class=p>{</span>
<span class=k>public</span><span class=o>:</span>
    <span class=kt>int</span> <span class=n>findKthLargest</span><span class=p>(</span><span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;&amp;</span> <span class=n>nums</span><span class=p>,</span> <span class=kt>int</span> <span class=n>k</span><span class=p>)</span> <span class=p>{</span>
        <span class=n>priority_queue</span><span class=o>&lt;</span><span class=kt>int</span><span class=p>,</span> <span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;</span><span class=p>,</span> <span class=n>greater</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;&gt;</span> <span class=n>pq</span><span class=p>;</span>

        <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=nl>n</span> <span class=p>:</span> <span class=n>nums</span><span class=p>)</span> <span class=p>{</span>
            <span class=n>pq</span><span class=p>.</span><span class=n>push</span><span class=p>(</span><span class=n>n</span><span class=p>);</span>
            <span class=k>if</span> <span class=p>(</span><span class=n>pq</span><span class=p>.</span><span class=n>size</span><span class=p>()</span> <span class=o>&gt;</span> <span class=n>k</span><span class=p>)</span> <span class=p>{</span>
                <span class=n>pq</span><span class=p>.</span><span class=n>pop</span><span class=p>();</span>
            <span class=p>}</span>
        <span class=p>}</span>

        <span class=k>return</span> <span class=n>pq</span><span class=p>.</span><span class=n>top</span><span class=p>();</span>
    <span class=p>}</span>
<span class=p>};</span>
</code></pre></div> <p>Solution 3 quickselect algorithm</p> <div class=codehilite><pre><span></span><code><span class=k>class</span> <span class=nc>Solution</span> <span class=p>{</span>
<span class=k>public</span><span class=o>:</span>
    <span class=kt>int</span> <span class=n>findKthLargest</span><span class=p>(</span><span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;&amp;</span> <span class=n>nums</span><span class=p>,</span> <span class=kt>int</span> <span class=n>k</span><span class=p>)</span> <span class=p>{</span>
        <span class=kt>int</span> <span class=n>n</span> <span class=o>=</span> <span class=n>nums</span><span class=p>.</span><span class=n>size</span><span class=p>();</span>
        <span class=k>if</span> <span class=p>(</span><span class=n>n</span> <span class=o>&lt;</span> <span class=n>k</span><span class=p>)</span> <span class=k>return</span> <span class=mi>0</span><span class=p>;</span>

        <span class=k>return</span> <span class=nf>orderStats</span><span class=p>(</span><span class=n>nums</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=n>n</span> <span class=o>-</span> <span class=mi>1</span><span class=p>,</span> <span class=n>k</span><span class=p>);</span>
    <span class=p>}</span>

    <span class=kt>int</span> <span class=n>orderStats</span><span class=p>(</span><span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;&amp;</span> <span class=n>nums</span><span class=p>,</span> <span class=kt>int</span> <span class=n>start</span><span class=p>,</span> <span class=kt>int</span> <span class=n>end</span><span class=p>,</span> <span class=kt>int</span> <span class=n>k</span><span class=p>)</span> <span class=p>{</span>
        <span class=k>if</span> <span class=p>(</span><span class=n>start</span> <span class=o>==</span> <span class=n>end</span><span class=p>)</span> <span class=k>return</span> <span class=n>nums</span><span class=p>[</span><span class=n>start</span><span class=p>];</span>

        <span class=kt>int</span> <span class=n>p</span> <span class=o>=</span> <span class=n>partition</span><span class=p>(</span><span class=n>nums</span><span class=p>,</span> <span class=n>start</span><span class=p>,</span> <span class=n>end</span><span class=p>);</span>
        <span class=kt>int</span> <span class=n>order</span> <span class=o>=</span> <span class=n>p</span> <span class=o>-</span> <span class=n>start</span> <span class=o>+</span> <span class=mi>1</span><span class=p>;</span>
        <span class=k>if</span> <span class=p>(</span><span class=n>order</span> <span class=o>==</span> <span class=n>k</span><span class=p>)</span> <span class=p>{</span>
            <span class=k>return</span> <span class=n>nums</span><span class=p>[</span><span class=n>p</span><span class=p>];</span>
        <span class=p>}</span> <span class=k>else</span> <span class=k>if</span> <span class=p>(</span><span class=n>order</span> <span class=o>&gt;</span> <span class=n>k</span><span class=p>)</span> <span class=p>{</span>
            <span class=k>return</span> <span class=n>orderStats</span><span class=p>(</span><span class=n>nums</span><span class=p>,</span> <span class=n>start</span><span class=p>,</span> <span class=n>p</span> <span class=o>-</span> <span class=mi>1</span><span class=p>,</span> <span class=n>k</span><span class=p>);</span>
        <span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
            <span class=k>return</span> <span class=n>orderStats</span><span class=p>(</span><span class=n>nums</span><span class=p>,</span> <span class=n>p</span> <span class=o>+</span> <span class=mi>1</span><span class=p>,</span> <span class=n>end</span><span class=p>,</span> <span class=n>k</span> <span class=o>-</span> <span class=n>order</span><span class=p>);</span>
        <span class=p>}</span>
    <span class=p>}</span>

    <span class=kt>int</span> <span class=n>partition</span><span class=p>(</span><span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;&amp;</span> <span class=n>nums</span><span class=p>,</span> <span class=kt>int</span> <span class=n>start</span><span class=p>,</span> <span class=kt>int</span> <span class=n>end</span><span class=p>)</span> <span class=p>{</span>
        <span class=k>if</span> <span class=p>(</span><span class=n>start</span> <span class=o>==</span> <span class=n>end</span><span class=p>)</span> <span class=k>return</span> <span class=mi>0</span><span class=p>;</span>

        <span class=kt>int</span> <span class=n>p</span> <span class=o>=</span> <span class=n>start</span> <span class=o>+</span> <span class=n>floor</span><span class=p>(</span><span class=n>rand</span><span class=p>()</span> <span class=o>%</span> <span class=p>(</span><span class=n>end</span> <span class=o>-</span> <span class=n>start</span> <span class=o>+</span> <span class=mi>1</span><span class=p>));</span>
        <span class=n>swap</span><span class=p>(</span><span class=n>nums</span><span class=p>[</span><span class=n>p</span><span class=p>],</span> <span class=n>nums</span><span class=p>[</span><span class=n>end</span><span class=p>]);</span>

        <span class=kt>int</span> <span class=n>pivot</span> <span class=o>=</span> <span class=n>nums</span><span class=p>[</span><span class=n>end</span><span class=p>];</span>
        <span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=n>start</span> <span class=o>-</span> <span class=mi>1</span><span class=p>,</span> <span class=n>j</span><span class=p>;</span>

        <span class=k>for</span> <span class=p>(</span><span class=n>j</span> <span class=o>=</span> <span class=n>start</span><span class=p>;</span> <span class=n>j</span> <span class=o>&lt;</span> <span class=n>end</span><span class=p>;</span> <span class=o>++</span><span class=n>j</span><span class=p>)</span> <span class=p>{</span>
            <span class=k>if</span> <span class=p>(</span><span class=n>nums</span><span class=p>[</span><span class=n>j</span><span class=p>]</span> <span class=o>&gt;=</span> <span class=n>pivot</span><span class=p>)</span> <span class=p>{</span>
                <span class=n>swap</span><span class=p>(</span><span class=n>nums</span><span class=p>[</span><span class=o>++</span><span class=n>i</span><span class=p>],</span> <span class=n>nums</span><span class=p>[</span><span class=n>j</span><span class=p>]);</span>
            <span class=p>}</span>
        <span class=p>}</span>

        <span class=n>swap</span><span class=p>(</span><span class=n>nums</span><span class=p>[</span><span class=n>end</span><span class=p>],</span> <span class=n>nums</span><span class=p>[</span><span class=n>i</span> <span class=o>+</span> <span class=mi>1</span><span class=p>]);</span>
        <span class=k>return</span> <span class=n>i</span> <span class=o>+</span> <span class=mi>1</span><span class=p>;</span>
    <span class=p>}</span>
<span class=p>};</span>
</code></pre></div> <h3 id=the-skyline-problem>The Skyline Problem<a class=headerlink href=#the-skyline-problem title="Permanent link">&para;</a></h3> <p>Solution 1 priority queue maximum heap</p> <div class=codehilite><pre><span></span><code><span class=k>class</span> <span class=nc>Solution</span> <span class=p>{</span>
<span class=k>public</span><span class=o>:</span>
    <span class=n>vector</span><span class=o>&lt;</span><span class=n>pair</span><span class=o>&lt;</span><span class=kt>int</span><span class=p>,</span> <span class=kt>int</span><span class=o>&gt;&gt;</span> <span class=n>getSkyline</span><span class=p>(</span><span class=n>vector</span><span class=o>&lt;</span><span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;&gt;&amp;</span> <span class=n>buildings</span><span class=p>)</span> <span class=p>{</span>
        <span class=n>vector</span><span class=o>&lt;</span><span class=n>pair</span><span class=o>&lt;</span><span class=kt>int</span><span class=p>,</span> <span class=kt>int</span><span class=o>&gt;&gt;</span> <span class=n>res</span><span class=p>;</span>
        <span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=p>,</span> <span class=n>x</span> <span class=o>=</span> <span class=mi>0</span><span class=p>,</span> <span class=n>h</span> <span class=o>=</span> <span class=mi>0</span><span class=p>,</span> <span class=n>len</span> <span class=o>=</span> <span class=n>buildings</span><span class=p>.</span><span class=n>size</span><span class=p>();</span>
        <span class=n>priority_queue</span><span class=o>&lt;</span><span class=n>pair</span><span class=o>&lt;</span><span class=kt>int</span><span class=p>,</span> <span class=kt>int</span><span class=o>&gt;&gt;</span> <span class=n>q</span><span class=p>;</span> <span class=c1>// max heap store &lt;height, end&gt;</span>

        <span class=k>while</span> <span class=p>(</span><span class=n>i</span> <span class=o>&lt;</span> <span class=n>len</span> <span class=o>||</span> <span class=o>!</span><span class=n>q</span><span class=p>.</span><span class=n>empty</span><span class=p>())</span> <span class=p>{</span>
            <span class=c1>// building i start before the end of current tallest building</span>
            <span class=k>if</span> <span class=p>(</span><span class=n>q</span><span class=p>.</span><span class=n>empty</span><span class=p>()</span> <span class=o>||</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>len</span> <span class=o>&amp;&amp;</span> <span class=n>buildings</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=mi>0</span><span class=p>]</span> <span class=o>&lt;=</span> <span class=n>q</span><span class=p>.</span><span class=n>top</span><span class=p>().</span><span class=n>second</span><span class=p>)</span> <span class=p>{</span>
                <span class=n>x</span> <span class=o>=</span> <span class=n>buildings</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=mi>0</span><span class=p>];</span> <span class=c1>// current start</span>
                <span class=c1>// overlapped start of multiple buildings (compare to if)</span>
                <span class=k>while</span> <span class=p>(</span><span class=n>i</span> <span class=o>&lt;</span> <span class=n>len</span> <span class=o>&amp;&amp;</span> <span class=n>buildings</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=mi>0</span><span class=p>]</span> <span class=o>==</span> <span class=n>x</span><span class=p>)</span> <span class=p>{</span>
                    <span class=n>q</span><span class=p>.</span><span class=n>push</span><span class=p>({</span><span class=n>buildings</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=mi>2</span><span class=p>],</span> <span class=n>buildings</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=mi>1</span><span class=p>]});</span>
                    <span class=n>i</span><span class=o>++</span><span class=p>;</span>
                <span class=p>}</span>
            <span class=p>}</span> <span class=k>else</span> <span class=p>{</span> <span class=c1>// building i start after the end of current tallest building</span>
                <span class=n>x</span> <span class=o>=</span> <span class=n>q</span><span class=p>.</span><span class=n>top</span><span class=p>().</span><span class=n>second</span><span class=p>;</span> <span class=c1>// current end</span>
                <span class=c1>// pop all buildings that end &lt;= currently tallest buildings</span>
                <span class=k>while</span> <span class=p>(</span><span class=o>!</span><span class=n>q</span><span class=p>.</span><span class=n>empty</span><span class=p>()</span> <span class=o>&amp;&amp;</span> <span class=n>q</span><span class=p>.</span><span class=n>top</span><span class=p>().</span><span class=n>second</span> <span class=o>&lt;=</span> <span class=n>x</span><span class=p>)</span>
                    <span class=n>q</span><span class=p>.</span><span class=n>pop</span><span class=p>();</span>
            <span class=p>}</span>

            <span class=n>h</span> <span class=o>=</span> <span class=n>q</span><span class=p>.</span><span class=n>empty</span><span class=p>()</span> <span class=o>?</span> <span class=mi>0</span> <span class=o>:</span> <span class=n>q</span><span class=p>.</span><span class=n>top</span><span class=p>().</span><span class=n>first</span><span class=p>;</span>
            <span class=k>if</span> <span class=p>(</span><span class=n>res</span><span class=p>.</span><span class=n>empty</span><span class=p>()</span> <span class=o>||</span> <span class=n>res</span><span class=p>.</span><span class=n>back</span><span class=p>().</span><span class=n>second</span> <span class=o>!=</span> <span class=n>h</span><span class=p>)</span> <span class=p>{</span>
                <span class=n>res</span><span class=p>.</span><span class=n>push_back</span><span class=p>({</span><span class=n>x</span><span class=p>,</span> <span class=n>h</span><span class=p>});</span>
            <span class=p>}</span>
        <span class=p>}</span>

        <span class=k>return</span> <span class=n>res</span><span class=p>;</span>
    <span class=p>}</span>
<span class=p>};</span>
</code></pre></div> <p>Solution 2 multiset + scanline solution</p> <div class=codehilite><pre><span></span><code><span class=k>class</span> <span class=nc>Solution</span> <span class=p>{</span>
<span class=k>private</span><span class=o>:</span>
    <span class=k>static</span> <span class=kt>bool</span> <span class=n>cmp</span><span class=p>(</span><span class=n>pair</span><span class=o>&lt;</span><span class=kt>int</span><span class=p>,</span><span class=kt>int</span><span class=o>&gt;</span> <span class=n>p1</span><span class=p>,</span> <span class=n>pair</span><span class=o>&lt;</span><span class=kt>int</span><span class=p>,</span><span class=kt>int</span><span class=o>&gt;</span> <span class=n>p2</span><span class=p>){</span>
        <span class=k>if</span><span class=p>(</span><span class=n>p1</span><span class=p>.</span><span class=n>first</span> <span class=o>!=</span> <span class=n>p2</span><span class=p>.</span><span class=n>first</span><span class=p>)</span> <span class=k>return</span> <span class=n>p1</span><span class=p>.</span><span class=n>first</span> <span class=o>&lt;</span> <span class=n>p2</span><span class=p>.</span><span class=n>first</span><span class=p>;</span>
        <span class=k>return</span> <span class=n>p1</span><span class=p>.</span><span class=n>second</span> <span class=o>&gt;</span> <span class=n>p2</span><span class=p>.</span><span class=n>second</span><span class=p>;</span> <span class=c1>// if x duplicate, tallest building first</span>
    <span class=p>}</span>

<span class=k>public</span><span class=o>:</span>
    <span class=n>vector</span><span class=o>&lt;</span><span class=n>pair</span><span class=o>&lt;</span><span class=kt>int</span><span class=p>,</span> <span class=kt>int</span><span class=o>&gt;&gt;</span> <span class=n>getSkyline</span><span class=p>(</span><span class=n>vector</span><span class=o>&lt;</span><span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;&gt;&amp;</span> <span class=n>buildings</span><span class=p>)</span> <span class=p>{</span>
        <span class=n>vector</span><span class=o>&lt;</span><span class=n>pair</span><span class=o>&lt;</span><span class=kt>int</span><span class=p>,</span> <span class=kt>int</span><span class=o>&gt;&gt;</span> <span class=n>h</span><span class=p>;</span> <span class=c1>// store the start and end.</span>
        <span class=n>vector</span><span class=o>&lt;</span><span class=n>pair</span><span class=o>&lt;</span><span class=kt>int</span><span class=p>,</span> <span class=kt>int</span><span class=o>&gt;&gt;</span> <span class=n>res</span><span class=p>;</span>
        <span class=n>multiset</span><span class=o>&lt;</span><span class=kt>int</span><span class=p>,</span> <span class=n>greater</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;&gt;</span> <span class=n>s</span><span class=p>;</span>
        <span class=kt>int</span> <span class=n>prev</span> <span class=o>=</span> <span class=mi>0</span><span class=p>,</span> <span class=n>curr</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
        <span class=c1>// scanline technique to obtain the starting point and end point</span>
        <span class=k>for</span> <span class=p>(</span><span class=k>auto</span> <span class=o>&amp;</span><span class=nl>a</span> <span class=p>:</span> <span class=n>buildings</span><span class=p>)</span> <span class=p>{</span>
            <span class=n>h</span><span class=p>.</span><span class=n>push_back</span><span class=p>({</span><span class=n>a</span><span class=p>[</span><span class=mi>0</span><span class=p>],</span> <span class=n>a</span><span class=p>[</span><span class=mi>2</span><span class=p>]});</span>
            <span class=n>h</span><span class=p>.</span><span class=n>push_back</span><span class=p>({</span><span class=n>a</span><span class=p>[</span><span class=mi>1</span><span class=p>],</span> <span class=o>-</span><span class=n>a</span><span class=p>[</span><span class=mi>2</span><span class=p>]});</span> <span class=c1>// use &quot;-&quot; mark the end point</span>
        <span class=p>}</span>

        <span class=n>sort</span><span class=p>(</span><span class=n>h</span><span class=p>.</span><span class=n>begin</span><span class=p>(),</span> <span class=n>h</span><span class=p>.</span><span class=n>end</span><span class=p>(),</span> <span class=n>cmp</span><span class=p>);</span>
        <span class=n>s</span><span class=p>.</span><span class=n>insert</span><span class=p>(</span><span class=mi>0</span><span class=p>);</span> <span class=c1>// edge case, consider a.second == 0</span>
        <span class=k>for</span> <span class=p>(</span><span class=k>auto</span> <span class=o>&amp;</span><span class=nl>a</span> <span class=p>:</span> <span class=n>h</span><span class=p>)</span> <span class=p>{</span>
            <span class=k>if</span> <span class=p>(</span><span class=n>a</span><span class=p>.</span><span class=n>second</span> <span class=o>&gt;</span> <span class=mi>0</span><span class=p>)</span> <span class=n>s</span><span class=p>.</span><span class=n>insert</span><span class=p>(</span><span class=n>a</span><span class=p>.</span><span class=n>second</span><span class=p>);</span> <span class=c1>// if it is a start, insert to the set</span>
            <span class=k>else</span> <span class=n>s</span><span class=p>.</span><span class=n>erase</span><span class=p>(</span><span class=n>s</span><span class=p>.</span><span class=n>find</span><span class=p>(</span><span class=o>-</span><span class=n>a</span><span class=p>.</span><span class=n>second</span><span class=p>));</span> <span class=c1>// if it is a end, erase the inserted start</span>
            <span class=n>curr</span> <span class=o>=</span> <span class=o>*</span><span class=n>s</span><span class=p>.</span><span class=n>begin</span><span class=p>();</span> <span class=c1>// take the maximum from the set</span>
            <span class=k>if</span> <span class=p>(</span><span class=n>curr</span> <span class=o>!=</span> <span class=n>prev</span><span class=p>)</span> <span class=p>{</span> <span class=c1>// remove duplicate</span>
                <span class=n>res</span><span class=p>.</span><span class=n>push_back</span><span class=p>({</span><span class=n>a</span><span class=p>.</span><span class=n>first</span><span class=p>,</span> <span class=n>curr</span><span class=p>});</span>
                <span class=n>prev</span> <span class=o>=</span> <span class=n>curr</span><span class=p>;</span>
            <span class=p>}</span>
        <span class=p>}</span>

        <span class=k>return</span> <span class=n>res</span><span class=p>;</span>
    <span class=p>}</span>
<span class=p>};</span>
</code></pre></div> <h4 id=sliding-window-median>Sliding Window Median<a class=headerlink href=#sliding-window-median title="Permanent link">&para;</a></h4> <p>Solution 1 heap + hash (simulated)</p> <div class=codehilite><pre><span></span><code><span class=k>class</span> <span class=nc>Solution</span> <span class=p>{</span>
<span class=k>public</span><span class=o>:</span>
    <span class=n>vector</span><span class=o>&lt;</span><span class=kt>double</span><span class=o>&gt;</span> <span class=n>medianSlidingWindow</span><span class=p>(</span><span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;&amp;</span> <span class=n>nums</span><span class=p>,</span> <span class=kt>int</span> <span class=n>k</span><span class=p>)</span> <span class=p>{</span>
        <span class=kt>int</span> <span class=n>n</span> <span class=o>=</span> <span class=n>nums</span><span class=p>.</span><span class=n>size</span><span class=p>();</span>
        <span class=n>vector</span><span class=o>&lt;</span><span class=kt>double</span><span class=o>&gt;</span> <span class=n>res</span><span class=p>;</span>
        <span class=n>priority_queue</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;</span> <span class=n>lo</span><span class=p>;</span>
        <span class=n>priority_queue</span><span class=o>&lt;</span><span class=kt>int</span><span class=p>,</span> <span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;</span><span class=p>,</span> <span class=n>greater</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;&gt;</span> <span class=n>hi</span><span class=p>;</span>
        <span class=n>unordered_map</span><span class=o>&lt;</span><span class=kt>int</span><span class=p>,</span> <span class=kt>int</span><span class=o>&gt;</span> <span class=n>hash_heap</span><span class=p>;</span>

        <span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
        <span class=k>while</span> <span class=p>(</span><span class=n>i</span> <span class=o>&lt;</span> <span class=n>k</span><span class=p>)</span> <span class=n>lo</span><span class=p>.</span><span class=n>push</span><span class=p>(</span><span class=n>nums</span><span class=p>[</span><span class=n>i</span><span class=o>++</span><span class=p>]);</span>

        <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>j</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>j</span> <span class=o>&lt;</span> <span class=n>k</span> <span class=o>/</span> <span class=mi>2</span><span class=p>;</span> <span class=n>j</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
            <span class=n>hi</span><span class=p>.</span><span class=n>push</span><span class=p>(</span><span class=n>lo</span><span class=p>.</span><span class=n>top</span><span class=p>());</span>
            <span class=n>lo</span><span class=p>.</span><span class=n>pop</span><span class=p>();</span>
        <span class=p>}</span>

        <span class=k>while</span> <span class=p>(</span><span class=nb>true</span><span class=p>)</span> <span class=p>{</span>
            <span class=n>res</span><span class=p>.</span><span class=n>push_back</span><span class=p>(</span><span class=n>k</span> <span class=o>&amp;</span> <span class=mi>1</span> <span class=o>?</span> <span class=n>lo</span><span class=p>.</span><span class=n>top</span><span class=p>()</span> <span class=o>:</span> <span class=p>((</span><span class=kt>double</span><span class=p>)</span> <span class=n>lo</span><span class=p>.</span><span class=n>top</span><span class=p>()</span>  <span class=o>+</span> <span class=p>(</span><span class=kt>double</span><span class=p>)</span> <span class=n>hi</span><span class=p>.</span><span class=n>top</span><span class=p>())</span> <span class=o>*</span> <span class=mf>0.5</span><span class=p>);</span>

            <span class=k>if</span> <span class=p>(</span><span class=n>i</span> <span class=o>&gt;=</span> <span class=n>nums</span><span class=p>.</span><span class=n>size</span><span class=p>())</span> <span class=k>break</span><span class=p>;</span>

            <span class=kt>int</span> <span class=n>out_num</span> <span class=o>=</span> <span class=n>nums</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=n>k</span><span class=p>];</span> <span class=c1>// first element in the window</span>
            <span class=kt>int</span> <span class=n>in_num</span> <span class=o>=</span> <span class=n>nums</span><span class=p>[</span><span class=n>i</span><span class=o>++</span><span class=p>];</span> <span class=c1>// new element entering window</span>
            <span class=kt>int</span> <span class=n>balance</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=c1>// -1, when out_num in lo, +1 when out_num in hi.</span>
            <span class=c1>// balance is the count of element diff in lo and hi.</span>
            <span class=c1>// lo.size() == hi.size() -&gt; balance = 0</span>
            <span class=c1>// lo.size() &gt; hi.size() --&gt; balance &gt; 0</span>
            <span class=c1>// lo.size() &lt; hi.size() --&gt; balance &lt; 0</span>
            <span class=n>balance</span> <span class=o>+=</span> <span class=p>(</span><span class=n>out_num</span> <span class=o>&lt;=</span> <span class=n>lo</span><span class=p>.</span><span class=n>top</span><span class=p>()</span> <span class=o>?</span> <span class=o>-</span><span class=mi>1</span> <span class=o>:</span> <span class=mi>1</span><span class=p>);</span>
            <span class=n>hash_heap</span><span class=p>[</span><span class=n>out_num</span><span class=p>]</span><span class=o>++</span><span class=p>;</span> <span class=c1>// count of the invalid element, will remove when it on the top.</span>

            <span class=k>if</span> <span class=p>(</span><span class=o>!</span><span class=n>lo</span><span class=p>.</span><span class=n>empty</span><span class=p>()</span> <span class=o>&amp;&amp;</span> <span class=n>in_num</span> <span class=o>&lt;=</span> <span class=n>lo</span><span class=p>.</span><span class=n>top</span><span class=p>())</span> <span class=p>{</span>
                <span class=n>balance</span><span class=o>++</span><span class=p>;</span>
                <span class=n>lo</span><span class=p>.</span><span class=n>push</span><span class=p>(</span><span class=n>in_num</span><span class=p>);</span>
            <span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
                <span class=n>balance</span><span class=o>--</span><span class=p>;</span>
                <span class=n>hi</span><span class=p>.</span><span class=n>push</span><span class=p>(</span><span class=n>in_num</span><span class=p>);</span>
            <span class=p>}</span>

            <span class=k>if</span> <span class=p>(</span><span class=n>balance</span> <span class=o>&lt;</span> <span class=mi>0</span><span class=p>)</span> <span class=p>{</span> <span class=c1>// lo lack of element.</span>
                <span class=n>lo</span><span class=p>.</span><span class=n>push</span><span class=p>(</span><span class=n>hi</span><span class=p>.</span><span class=n>top</span><span class=p>());</span>
                <span class=n>hi</span><span class=p>.</span><span class=n>pop</span><span class=p>();</span>
                <span class=n>balance</span><span class=o>++</span><span class=p>;</span>
            <span class=p>}</span> <span class=k>else</span> <span class=k>if</span> <span class=p>(</span><span class=n>balance</span> <span class=o>&gt;</span> <span class=mi>0</span><span class=p>)</span> <span class=p>{</span> <span class=c1>// hi lack of element</span>
                <span class=n>hi</span><span class=p>.</span><span class=n>push</span><span class=p>(</span><span class=n>lo</span><span class=p>.</span><span class=n>top</span><span class=p>());</span>
                <span class=n>lo</span><span class=p>.</span><span class=n>pop</span><span class=p>();</span>
                <span class=n>balance</span><span class=o>--</span><span class=p>;</span>
            <span class=p>}</span>

            <span class=c1>// lazy remove of elements previous removed, mimic hashheap of java.</span>
            <span class=k>while</span> <span class=p>(</span><span class=o>!</span><span class=n>lo</span><span class=p>.</span><span class=n>empty</span><span class=p>()</span> <span class=o>&amp;&amp;</span> <span class=n>hash_heap</span><span class=p>[</span><span class=n>lo</span><span class=p>.</span><span class=n>top</span><span class=p>()])</span> <span class=p>{</span>
                <span class=n>hash_heap</span><span class=p>[</span><span class=n>lo</span><span class=p>.</span><span class=n>top</span><span class=p>()]</span><span class=o>--</span><span class=p>;</span>
                <span class=n>lo</span><span class=p>.</span><span class=n>pop</span><span class=p>();</span>
            <span class=p>}</span>

            <span class=c1>// lazy remove of elements previous removed, mimic hashheap of java.</span>
            <span class=k>while</span> <span class=p>(</span><span class=o>!</span><span class=n>hi</span><span class=p>.</span><span class=n>empty</span><span class=p>()</span> <span class=o>&amp;&amp;</span> <span class=n>hash_heap</span><span class=p>[</span><span class=n>hi</span><span class=p>.</span><span class=n>top</span><span class=p>()])</span> <span class=p>{</span>
                <span class=n>hash_heap</span><span class=p>[</span><span class=n>hi</span><span class=p>.</span><span class=n>top</span><span class=p>()]</span><span class=o>--</span><span class=p>;</span>
                <span class=n>hi</span><span class=p>.</span><span class=n>pop</span><span class=p>();</span>
            <span class=p>}</span>
        <span class=p>}</span>

        <span class=k>return</span> <span class=n>res</span><span class=p>;</span>
    <span class=p>}</span>
<span class=p>};</span>
</code></pre></div> <h2 id=use-priority-queue-to-rearange-tasks-characters-string-etc>Use priority queue to rearange tasks (characters, string, etc.)<a class=headerlink href=#use-priority-queue-to-rearange-tasks-characters-string-etc title="Permanent link">&para;</a></h2> <h3 id=rearrange-string-k-distance-apart>Rearrange String k Distance Apart<a class=headerlink href=#rearrange-string-k-distance-apart title="Permanent link">&para;</a></h3> <p>Solution 1 Greedy + Priority Queue</p> <div class=codehilite><pre><span></span><code><span class=k>class</span> <span class=nc>Solution</span> <span class=p>{</span>
<span class=k>public</span><span class=o>:</span>
  <span class=n>string</span> <span class=n>rearrangeString</span><span class=p>(</span><span class=n>string</span> <span class=n>s</span><span class=p>,</span> <span class=kt>int</span> <span class=n>k</span><span class=p>)</span> <span class=p>{</span>
    <span class=k>if</span> <span class=p>(</span><span class=n>k</span> <span class=o>&lt;=</span> <span class=mi>0</span><span class=p>)</span> <span class=k>return</span> <span class=n>s</span><span class=p>;</span>

    <span class=n>unordered_map</span><span class=o>&lt;</span><span class=kt>char</span><span class=p>,</span> <span class=kt>int</span><span class=o>&gt;</span> <span class=n>mp</span><span class=p>;</span>
    <span class=k>for</span> <span class=p>(</span><span class=k>auto</span><span class=o>&amp;</span> <span class=nl>c</span> <span class=p>:</span> <span class=n>s</span><span class=p>)</span>
      <span class=n>mp</span><span class=p>[</span><span class=n>c</span><span class=p>]</span><span class=o>++</span><span class=p>;</span>

    <span class=n>priority_queue</span><span class=o>&lt;</span><span class=n>pair</span><span class=o>&lt;</span><span class=kt>int</span><span class=p>,</span> <span class=kt>char</span><span class=o>&gt;</span><span class=p>,</span> <span class=n>vector</span><span class=o>&lt;</span><span class=n>pair</span><span class=o>&lt;</span><span class=kt>int</span><span class=p>,</span> <span class=kt>char</span><span class=o>&gt;&gt;</span><span class=p>,</span> <span class=n>std</span><span class=o>::</span><span class=n>less</span><span class=o>&lt;</span><span class=n>pair</span><span class=o>&lt;</span><span class=kt>int</span><span class=p>,</span> <span class=kt>char</span><span class=o>&gt;&gt;&gt;</span> <span class=n>pq</span><span class=p>;</span> <span class=c1>// max heap;</span>

    <span class=k>for</span> <span class=p>(</span><span class=k>auto</span><span class=o>&amp;</span> <span class=nl>p</span> <span class=p>:</span> <span class=n>mp</span><span class=p>)</span> <span class=p>{</span>
      <span class=n>pq</span><span class=p>.</span><span class=n>push</span><span class=p>({</span><span class=n>p</span><span class=p>.</span><span class=n>second</span><span class=p>,</span> <span class=n>p</span><span class=p>.</span><span class=n>first</span><span class=p>});</span>
    <span class=p>}</span>

    <span class=n>string</span> <span class=n>res</span><span class=p>;</span>
    <span class=k>while</span> <span class=p>(</span><span class=o>!</span><span class=n>pq</span><span class=p>.</span><span class=n>empty</span><span class=p>())</span> <span class=p>{</span>
      <span class=n>vector</span><span class=o>&lt;</span><span class=n>pair</span><span class=o>&lt;</span><span class=kt>int</span><span class=p>,</span> <span class=kt>char</span><span class=o>&gt;&gt;</span> <span class=n>used</span><span class=p>;</span>
      <span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
      <span class=k>while</span> <span class=p>(</span><span class=n>i</span> <span class=o>&lt;</span> <span class=n>k</span> <span class=o>&amp;&amp;</span> <span class=o>!</span><span class=n>pq</span><span class=p>.</span><span class=n>empty</span><span class=p>())</span> <span class=p>{</span>
        <span class=k>auto</span> <span class=n>t</span> <span class=o>=</span> <span class=n>pq</span><span class=p>.</span><span class=n>top</span><span class=p>();</span> <span class=n>pq</span><span class=p>.</span><span class=n>pop</span><span class=p>();</span>
        <span class=n>res</span><span class=p>.</span><span class=n>push_back</span><span class=p>(</span><span class=n>t</span><span class=p>.</span><span class=n>second</span><span class=p>);</span>
        <span class=n>i</span><span class=o>++</span><span class=p>;</span>

        <span class=k>if</span> <span class=p>(</span><span class=o>--</span><span class=n>t</span><span class=p>.</span><span class=n>first</span> <span class=o>&gt;</span> <span class=mi>0</span><span class=p>)</span> <span class=p>{</span>
          <span class=n>used</span><span class=p>.</span><span class=n>push_back</span><span class=p>(</span><span class=n>t</span><span class=p>);</span>
        <span class=p>}</span>
      <span class=p>}</span>

      <span class=k>if</span> <span class=p>(</span><span class=n>i</span> <span class=o>!=</span> <span class=n>k</span> <span class=o>&amp;&amp;</span> <span class=n>used</span><span class=p>.</span><span class=n>size</span><span class=p>())</span>
        <span class=k>return</span> <span class=s>&quot;&quot;</span><span class=p>;</span>

      <span class=k>for</span> <span class=p>(</span><span class=k>auto</span><span class=o>&amp;</span> <span class=nl>p</span> <span class=p>:</span> <span class=n>used</span><span class=p>)</span> <span class=p>{</span>
        <span class=n>pq</span><span class=p>.</span><span class=n>push</span><span class=p>(</span><span class=n>p</span><span class=p>);</span>
      <span class=p>}</span>
    <span class=p>}</span>

    <span class=k>return</span> <span class=n>res</span><span class=p>;</span>
  <span class=p>}</span>
<span class=p>};</span>
</code></pre></div> <h2 id=task-scheduler>Task Scheduler<a class=headerlink href=#task-scheduler title="Permanent link">&para;</a></h2> <p>Solution 1 Greedy + Priority Queue</p> <div class=codehilite><pre><span></span><code><span class=k>class</span> <span class=nc>Solution</span> <span class=p>{</span>
<span class=k>public</span><span class=o>:</span>
  <span class=k>class</span> <span class=nc>cmp</span> <span class=p>{</span>
  <span class=k>public</span><span class=o>:</span>
    <span class=n>cmp</span> <span class=p>()</span> <span class=p>{}</span>
    <span class=kt>bool</span> <span class=k>operator</span><span class=p>()(</span><span class=k>const</span> <span class=n>pair</span><span class=o>&lt;</span><span class=kt>int</span><span class=p>,</span> <span class=kt>char</span><span class=o>&gt;&amp;</span> <span class=n>a</span><span class=p>,</span> <span class=k>const</span> <span class=n>pair</span><span class=o>&lt;</span><span class=kt>int</span><span class=p>,</span> <span class=kt>char</span><span class=o>&gt;&amp;</span> <span class=n>b</span><span class=p>){</span>
      <span class=k>return</span> <span class=n>a</span><span class=p>.</span><span class=n>first</span> <span class=o>&lt;</span> <span class=n>b</span><span class=p>.</span><span class=n>first</span><span class=p>;</span>
    <span class=p>}</span>
  <span class=p>};</span>

  <span class=kt>int</span> <span class=nf>leastInterval</span><span class=p>(</span><span class=n>vector</span><span class=o>&lt;</span><span class=kt>char</span><span class=o>&gt;&amp;</span> <span class=n>tasks</span><span class=p>,</span> <span class=kt>int</span> <span class=n>n</span><span class=p>)</span> <span class=p>{</span>
    <span class=kt>int</span> <span class=n>chmap</span><span class=p>[</span><span class=mi>26</span><span class=p>]</span> <span class=o>=</span> <span class=p>{</span><span class=mi>0</span><span class=p>};</span>
    <span class=n>priority_queue</span><span class=o>&lt;</span><span class=n>pair</span><span class=o>&lt;</span><span class=kt>int</span><span class=p>,</span> <span class=kt>char</span><span class=o>&gt;</span><span class=p>,</span> <span class=n>vector</span><span class=o>&lt;</span><span class=n>pair</span><span class=o>&lt;</span><span class=kt>int</span><span class=p>,</span> <span class=kt>char</span><span class=o>&gt;&gt;</span><span class=p>,</span> <span class=n>cmp</span><span class=o>&gt;</span> <span class=n>pq</span><span class=p>;</span>
    <span class=k>for</span> <span class=p>(</span><span class=kt>char</span> <span class=nl>c</span> <span class=p>:</span> <span class=n>tasks</span><span class=p>)</span> <span class=p>{</span>
      <span class=n>chmap</span><span class=p>[</span><span class=n>c</span> <span class=o>-</span> <span class=sc>&#39;A&#39;</span><span class=p>]</span><span class=o>++</span><span class=p>;</span>
    <span class=p>}</span>

    <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=mi>26</span><span class=p>;</span> <span class=o>++</span><span class=n>i</span><span class=p>)</span> <span class=p>{</span>
      <span class=k>if</span> <span class=p>(</span><span class=n>chmap</span><span class=p>[</span><span class=n>i</span><span class=p>])</span> <span class=p>{</span>
        <span class=n>pq</span><span class=p>.</span><span class=n>push</span><span class=p>({</span><span class=n>chmap</span><span class=p>[</span><span class=n>i</span><span class=p>],</span> <span class=n>i</span> <span class=o>+</span> <span class=sc>&#39;A&#39;</span><span class=p>});</span>
      <span class=p>}</span>
    <span class=p>}</span>

    <span class=kt>int</span> <span class=n>cycle</span> <span class=o>=</span> <span class=n>n</span> <span class=o>+</span> <span class=mi>1</span><span class=p>;</span>
    <span class=kt>int</span> <span class=n>res</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
    <span class=k>while</span> <span class=p>(</span><span class=o>!</span><span class=n>pq</span><span class=p>.</span><span class=n>empty</span><span class=p>())</span> <span class=p>{</span>
      <span class=n>vector</span><span class=o>&lt;</span><span class=n>pair</span><span class=o>&lt;</span><span class=kt>int</span><span class=p>,</span> <span class=kt>char</span><span class=o>&gt;&gt;</span> <span class=n>used</span><span class=p>;</span>
      <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>cycle</span><span class=p>;</span> <span class=o>++</span><span class=n>i</span><span class=p>)</span> <span class=p>{</span> <span class=c1>// pick total of n + 1 in freq order</span>
        <span class=k>if</span> <span class=p>(</span><span class=o>!</span><span class=n>pq</span><span class=p>.</span><span class=n>empty</span><span class=p>())</span> <span class=p>{</span>
          <span class=n>used</span><span class=p>.</span><span class=n>push_back</span><span class=p>(</span><span class=n>pq</span><span class=p>.</span><span class=n>top</span><span class=p>());</span> <span class=n>pq</span><span class=p>.</span><span class=n>pop</span><span class=p>();</span>
        <span class=p>}</span>
      <span class=p>}</span>

      <span class=k>for</span> <span class=p>(</span><span class=k>auto</span> <span class=nl>p</span> <span class=p>:</span> <span class=n>used</span><span class=p>)</span> <span class=p>{</span>
        <span class=k>if</span> <span class=p>(</span><span class=o>--</span><span class=n>p</span><span class=p>.</span><span class=n>first</span><span class=p>)</span> <span class=p>{</span>
          <span class=n>pq</span><span class=p>.</span><span class=n>push</span><span class=p>(</span><span class=n>p</span><span class=p>);</span>  <span class=c1>// put back used chars if extra char exist after the useage.</span>
        <span class=p>}</span>
      <span class=p>}</span>

      <span class=c1>// handled partial cycle and full cycle</span>
      <span class=n>res</span> <span class=o>+=</span> <span class=o>!</span><span class=n>pq</span><span class=p>.</span><span class=n>empty</span><span class=p>()</span> <span class=o>?</span> <span class=nl>cycle</span> <span class=p>:</span> <span class=n>used</span><span class=p>.</span><span class=n>size</span><span class=p>();</span>
    <span class=p>}</span>

    <span class=k>return</span> <span class=n>res</span><span class=p>;</span>
  <span class=p>}</span>
<span class=p>};</span>
</code></pre></div> <h3 id=reorganize-string>Reorganize String<a class=headerlink href=#reorganize-string title="Permanent link">&para;</a></h3> <p>Solution 1 Greedy + Priority Queue</p> <div class=codehilite><pre><span></span><code><span class=k>class</span> <span class=nc>Solution</span> <span class=p>{</span>
<span class=k>public</span><span class=o>:</span>
  <span class=k>class</span> <span class=nc>cmp</span> <span class=p>{</span>
  <span class=k>public</span><span class=o>:</span>
    <span class=n>cmp</span> <span class=p>()</span> <span class=p>{}</span>
    <span class=kt>bool</span> <span class=k>operator</span><span class=p>()(</span><span class=k>const</span> <span class=n>pair</span><span class=o>&lt;</span><span class=kt>int</span><span class=p>,</span> <span class=kt>char</span><span class=o>&gt;&amp;</span> <span class=n>a</span><span class=p>,</span><span class=k>const</span> <span class=n>pair</span><span class=o>&lt;</span><span class=kt>int</span><span class=p>,</span> <span class=kt>char</span><span class=o>&gt;&amp;</span> <span class=n>b</span><span class=p>){</span>
      <span class=k>return</span> <span class=n>a</span><span class=p>.</span><span class=n>first</span> <span class=o>&lt;</span> <span class=n>b</span><span class=p>.</span><span class=n>first</span><span class=p>;</span>
    <span class=p>}</span>
  <span class=p>};</span>

  <span class=n>string</span> <span class=nf>reorganizeString</span><span class=p>(</span><span class=n>string</span> <span class=n>S</span><span class=p>)</span> <span class=p>{</span>
    <span class=kt>int</span> <span class=n>n</span> <span class=o>=</span> <span class=n>S</span><span class=p>.</span><span class=n>length</span><span class=p>();</span>
    <span class=kt>int</span> <span class=n>chmap</span><span class=p>[</span><span class=mi>26</span><span class=p>]</span> <span class=o>=</span> <span class=p>{</span><span class=mi>0</span><span class=p>};</span>

    <span class=c1>// max heap</span>
    <span class=n>priority_queue</span><span class=o>&lt;</span><span class=n>pair</span><span class=o>&lt;</span><span class=kt>int</span><span class=p>,</span> <span class=kt>char</span><span class=o>&gt;</span><span class=p>,</span> <span class=n>vector</span><span class=o>&lt;</span><span class=n>pair</span><span class=o>&lt;</span><span class=kt>int</span><span class=p>,</span> <span class=kt>char</span><span class=o>&gt;&gt;</span><span class=p>,</span> <span class=n>cmp</span><span class=o>&gt;</span> <span class=n>pq</span><span class=p>;</span>
    <span class=k>for</span> <span class=p>(</span><span class=k>auto</span><span class=o>&amp;</span> <span class=nl>c</span> <span class=p>:</span> <span class=n>S</span><span class=p>)</span> <span class=p>{</span> <span class=c1>//store to map</span>
      <span class=n>chmap</span><span class=p>[</span><span class=n>c</span> <span class=o>-</span> <span class=sc>&#39;a&#39;</span><span class=p>]</span><span class=o>++</span><span class=p>;</span>
    <span class=p>}</span>

    <span class=c1>// push to priority queue</span>
    <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=mi>26</span><span class=p>;</span> <span class=o>++</span><span class=n>i</span><span class=p>)</span> <span class=p>{</span>
      <span class=k>if</span> <span class=p>(</span><span class=n>chmap</span><span class=p>[</span><span class=n>i</span><span class=p>])</span> <span class=p>{</span>
        <span class=n>pq</span><span class=p>.</span><span class=n>push</span><span class=p>({</span><span class=n>chmap</span><span class=p>[</span><span class=n>i</span><span class=p>],</span> <span class=n>i</span> <span class=o>+</span> <span class=sc>&#39;a&#39;</span><span class=p>});</span>
      <span class=p>}</span>
    <span class=p>}</span>

    <span class=k>if</span> <span class=p>(</span><span class=n>pq</span><span class=p>.</span><span class=n>top</span><span class=p>().</span><span class=n>first</span> <span class=o>&gt;</span> <span class=p>(</span><span class=n>n</span> <span class=o>+</span> <span class=mi>1</span><span class=p>)</span> <span class=o>/</span> <span class=mi>2</span><span class=p>)</span> <span class=k>return</span> <span class=s>&quot;&quot;</span><span class=p>;</span>

    <span class=n>string</span> <span class=n>res</span> <span class=o>=</span> <span class=s>&quot;&quot;</span><span class=p>;</span>
    <span class=k>while</span> <span class=p>(</span><span class=o>!</span><span class=n>pq</span><span class=p>.</span><span class=n>empty</span><span class=p>())</span> <span class=p>{</span>
      <span class=n>pair</span><span class=o>&lt;</span><span class=kt>int</span><span class=p>,</span> <span class=kt>char</span><span class=o>&gt;</span> <span class=n>p</span> <span class=o>=</span> <span class=n>pq</span><span class=p>.</span><span class=n>top</span><span class=p>();</span> <span class=n>pq</span><span class=p>.</span><span class=n>pop</span><span class=p>();</span>
      <span class=k>if</span> <span class=p>(</span><span class=n>res</span><span class=p>.</span><span class=n>empty</span><span class=p>()</span> <span class=o>||</span> <span class=n>res</span><span class=p>.</span><span class=n>back</span><span class=p>()</span> <span class=o>!=</span> <span class=n>p</span><span class=p>.</span><span class=n>second</span><span class=p>)</span> <span class=p>{</span>
        <span class=n>res</span><span class=p>.</span><span class=n>push_back</span><span class=p>(</span><span class=n>p</span><span class=p>.</span><span class=n>second</span><span class=p>);</span>
        <span class=k>if</span> <span class=p>(</span><span class=o>--</span><span class=n>p</span><span class=p>.</span><span class=n>first</span> <span class=o>&gt;</span> <span class=mi>0</span><span class=p>)</span> <span class=p>{</span> <span class=c1>// use one char</span>
          <span class=n>pq</span><span class=p>.</span><span class=n>push</span><span class=p>(</span><span class=n>p</span><span class=p>);</span>
        <span class=p>}</span>
      <span class=p>}</span> <span class=k>else</span> <span class=p>{</span> <span class=c1>// cannot use duplicate char, take another</span>
        <span class=n>pair</span><span class=o>&lt;</span><span class=kt>int</span><span class=p>,</span> <span class=kt>char</span><span class=o>&gt;</span> <span class=n>q</span> <span class=o>=</span> <span class=n>pq</span><span class=p>.</span><span class=n>top</span><span class=p>();</span> <span class=n>pq</span><span class=p>.</span><span class=n>pop</span><span class=p>();</span>
        <span class=n>res</span><span class=p>.</span><span class=n>push_back</span><span class=p>(</span><span class=n>q</span><span class=p>.</span><span class=n>second</span><span class=p>);</span>
        <span class=k>if</span> <span class=p>(</span><span class=o>--</span><span class=n>q</span><span class=p>.</span><span class=n>first</span> <span class=o>&gt;</span> <span class=mi>0</span><span class=p>)</span> <span class=p>{</span> <span class=c1>// use another char</span>
          <span class=n>pq</span><span class=p>.</span><span class=n>push</span><span class=p>(</span><span class=n>q</span><span class=p>);</span>
        <span class=p>}</span>
        <span class=c1>// remember put p back to the pq  </span>
        <span class=n>pq</span><span class=p>.</span><span class=n>push</span><span class=p>(</span><span class=n>p</span><span class=p>);</span>
      <span class=p>}</span>
    <span class=p>}</span>

    <span class=k>return</span> <span class=n>res</span><span class=p>;</span>
  <span class=p>}</span>
<span class=p>};</span>
</code></pre></div> <h2 id=topological-sorting>Topological sorting<a class=headerlink href=#topological-sorting title="Permanent link">&para;</a></h2> <h3 id=course-schedule>Course Schedule<a class=headerlink href=#course-schedule title="Permanent link">&para;</a></h3> <p>Solution 1 DFS</p> <div class=codehilite><pre><span></span><code><span class=k>class</span> <span class=nc>Solution</span> <span class=p>{</span>
<span class=k>public</span><span class=o>:</span>
    <span class=kt>bool</span> <span class=n>canFinish</span><span class=p>(</span><span class=kt>int</span> <span class=n>numCourses</span><span class=p>,</span> <span class=n>vector</span><span class=o>&lt;</span><span class=n>pair</span><span class=o>&lt;</span><span class=kt>int</span><span class=p>,</span> <span class=kt>int</span><span class=o>&gt;&gt;&amp;</span> <span class=n>prerequisites</span><span class=p>)</span> <span class=p>{</span>
        <span class=n>vector</span><span class=o>&lt;</span><span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;&gt;</span> <span class=n>graph</span><span class=p>(</span><span class=n>numCourses</span><span class=p>,</span> <span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;</span><span class=p>(</span><span class=mi>0</span><span class=p>));</span>
        <span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;</span> <span class=n>visit</span><span class=p>(</span><span class=n>numCourses</span><span class=p>,</span> <span class=mi>0</span><span class=p>);</span>

        <span class=cm>/* construct the graph in adjacency list */</span>
        <span class=k>for</span> <span class=p>(</span><span class=k>auto</span> <span class=nl>a</span> <span class=p>:</span> <span class=n>prerequisites</span><span class=p>)</span> <span class=p>{</span>
            <span class=n>graph</span><span class=p>[</span><span class=n>a</span><span class=p>.</span><span class=n>second</span><span class=p>].</span><span class=n>push_back</span><span class=p>(</span><span class=n>a</span><span class=p>.</span><span class=n>first</span><span class=p>);</span>
        <span class=p>}</span>

        <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>numCourses</span><span class=p>;</span> <span class=o>++</span><span class=n>i</span><span class=p>)</span> <span class=p>{</span>
            <span class=k>if</span> <span class=p>(</span><span class=o>!</span><span class=n>canFinishDFS</span><span class=p>(</span><span class=n>graph</span><span class=p>,</span> <span class=n>visit</span><span class=p>,</span> <span class=n>i</span><span class=p>))</span>
                <span class=k>return</span> <span class=nb>false</span><span class=p>;</span>
        <span class=p>}</span>
        <span class=k>return</span> <span class=nb>true</span><span class=p>;</span>
    <span class=p>}</span>

    <span class=kt>bool</span> <span class=n>canFinishDFS</span><span class=p>(</span><span class=n>vector</span><span class=o>&lt;</span><span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;&gt;&amp;</span> <span class=n>graph</span><span class=p>,</span> <span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;&amp;</span> <span class=n>visit</span><span class=p>,</span> <span class=kt>int</span> <span class=n>i</span><span class=p>)</span> <span class=p>{</span>
        <span class=k>if</span> <span class=p>(</span><span class=n>visit</span><span class=p>[</span><span class=n>i</span><span class=p>]</span> <span class=o>==</span> <span class=o>-</span><span class=mi>1</span><span class=p>)</span> <span class=k>return</span> <span class=nb>false</span><span class=p>;</span> <span class=c1>// visiting</span>
        <span class=k>if</span> <span class=p>(</span><span class=n>visit</span><span class=p>[</span><span class=n>i</span><span class=p>]</span> <span class=o>==</span> <span class=mi>1</span><span class=p>)</span> <span class=k>return</span> <span class=nb>true</span><span class=p>;</span>

        <span class=n>visit</span><span class=p>[</span><span class=n>i</span><span class=p>]</span> <span class=o>=</span> <span class=o>-</span><span class=mi>1</span><span class=p>;</span>
        <span class=k>for</span> <span class=p>(</span><span class=k>auto</span> <span class=nl>a</span> <span class=p>:</span> <span class=n>graph</span><span class=p>[</span><span class=n>i</span><span class=p>])</span> <span class=p>{</span>
            <span class=k>if</span> <span class=p>(</span><span class=o>!</span><span class=n>canFinishDFS</span><span class=p>(</span><span class=n>graph</span><span class=p>,</span> <span class=n>visit</span><span class=p>,</span> <span class=n>a</span><span class=p>))</span>
                <span class=k>return</span> <span class=nb>false</span><span class=p>;</span>
        <span class=p>}</span>
        <span class=n>visit</span><span class=p>[</span><span class=n>i</span><span class=p>]</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span>
        <span class=k>return</span> <span class=nb>true</span><span class=p>;</span>
    <span class=p>}</span>
<span class=p>};</span>
</code></pre></div> <p>Solution 2 BFS</p> <div class=codehilite><pre><span></span><code><span class=k>class</span> <span class=nc>Solution</span> <span class=p>{</span>
<span class=k>public</span><span class=o>:</span>
    <span class=kt>bool</span> <span class=n>canFinish</span><span class=p>(</span><span class=kt>int</span> <span class=n>numCourses</span><span class=p>,</span> <span class=n>vector</span><span class=o>&lt;</span><span class=n>pair</span><span class=o>&lt;</span><span class=kt>int</span><span class=p>,</span> <span class=kt>int</span><span class=o>&gt;&gt;&amp;</span> <span class=n>prerequisites</span><span class=p>)</span> <span class=p>{</span>
        <span class=n>vector</span><span class=o>&lt;</span><span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;&gt;</span> <span class=n>graph</span><span class=p>(</span><span class=n>numCourses</span><span class=p>,</span> <span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;</span><span class=p>(</span><span class=mi>0</span><span class=p>));</span>
        <span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;</span> <span class=n>in</span><span class=p>(</span><span class=n>numCourses</span><span class=p>,</span> <span class=mi>0</span><span class=p>);</span>
        <span class=k>for</span> <span class=p>(</span><span class=k>auto</span> <span class=nl>a</span> <span class=p>:</span> <span class=n>prerequisites</span><span class=p>)</span> <span class=p>{</span>
            <span class=n>graph</span><span class=p>[</span><span class=n>a</span><span class=p>.</span><span class=n>second</span><span class=p>].</span><span class=n>push_back</span><span class=p>(</span><span class=n>a</span><span class=p>.</span><span class=n>first</span><span class=p>);</span>
            <span class=o>++</span><span class=n>in</span><span class=p>[</span><span class=n>a</span><span class=p>.</span><span class=n>first</span><span class=p>];</span> <span class=cm>/* indegree of nodes */</span>
        <span class=p>}</span>

        <span class=n>queue</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;</span> <span class=n>q</span><span class=p>;</span>
        <span class=cm>/* locate the &quot;start&quot; of the directed acyclic graph */</span>
        <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>numCourses</span><span class=p>;</span> <span class=o>++</span><span class=n>i</span><span class=p>)</span> <span class=p>{</span>
            <span class=k>if</span> <span class=p>(</span><span class=n>in</span><span class=p>[</span><span class=n>i</span><span class=p>]</span> <span class=o>==</span> <span class=mi>0</span><span class=p>)</span> <span class=n>q</span><span class=p>.</span><span class=n>push</span><span class=p>(</span><span class=n>i</span><span class=p>);</span>
        <span class=p>}</span>

        <span class=k>while</span> <span class=p>(</span><span class=o>!</span><span class=n>q</span><span class=p>.</span><span class=n>empty</span><span class=p>())</span> <span class=p>{</span>
            <span class=kt>int</span> <span class=n>t</span> <span class=o>=</span> <span class=n>q</span><span class=p>.</span><span class=n>front</span><span class=p>();</span> <span class=n>q</span><span class=p>.</span><span class=n>pop</span><span class=p>();</span>
            <span class=k>for</span> <span class=p>(</span><span class=k>auto</span> <span class=nl>a</span> <span class=p>:</span> <span class=n>graph</span><span class=p>[</span><span class=n>t</span><span class=p>])</span> <span class=p>{</span>
                <span class=o>--</span><span class=n>in</span><span class=p>[</span><span class=n>a</span><span class=p>];</span> <span class=cm>/* visit the edge t-&gt;a */</span>
                <span class=k>if</span> <span class=p>(</span><span class=n>in</span><span class=p>[</span><span class=n>a</span><span class=p>]</span> <span class=o>==</span> <span class=mi>0</span><span class=p>)</span> <span class=n>q</span><span class=p>.</span><span class=n>push</span><span class=p>(</span><span class=n>a</span><span class=p>);</span>
            <span class=p>}</span>
        <span class=p>}</span>

        <span class=cm>/* if there are cycle, (with node indegree &gt; 0) */</span>
        <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>numCourses</span><span class=p>;</span> <span class=o>++</span><span class=n>i</span><span class=p>)</span> <span class=p>{</span>
            <span class=k>if</span><span class=p>(</span><span class=n>in</span><span class=p>[</span><span class=n>i</span><span class=p>]</span> <span class=o>!=</span> <span class=mi>0</span><span class=p>)</span> <span class=k>return</span> <span class=nb>false</span><span class=p>;</span>
        <span class=p>}</span>

        <span class=k>return</span> <span class=nb>true</span><span class=p>;</span>
    <span class=p>}</span>
<span class=p>};</span>
</code></pre></div> <h3 id=course-schedule-ii>Course Schedule II<a class=headerlink href=#course-schedule-ii title="Permanent link">&para;</a></h3> <p>Solution 1 DFS</p> <div class=codehilite><pre><span></span><code><span class=k>class</span> <span class=nc>Solution</span> <span class=p>{</span>
<span class=k>public</span><span class=o>:</span>
    <span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;</span> <span class=n>findOrder</span><span class=p>(</span><span class=kt>int</span> <span class=n>numCourses</span><span class=p>,</span> <span class=n>vector</span><span class=o>&lt;</span><span class=n>pair</span><span class=o>&lt;</span><span class=kt>int</span><span class=p>,</span> <span class=kt>int</span><span class=o>&gt;&gt;&amp;</span> <span class=n>prerequisites</span><span class=p>)</span> <span class=p>{</span>
        <span class=kt>int</span> <span class=n>n</span> <span class=o>=</span> <span class=n>prerequisites</span><span class=p>.</span><span class=n>size</span><span class=p>();</span>
        <span class=n>vector</span><span class=o>&lt;</span><span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;&gt;</span> <span class=n>graph</span><span class=p>(</span><span class=n>numCourses</span><span class=p>,</span> <span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;</span><span class=p>(</span><span class=mi>0</span><span class=p>));</span>
        <span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;</span> <span class=n>visit</span><span class=p>(</span><span class=n>numCourses</span><span class=p>,</span> <span class=mi>0</span><span class=p>);</span> <span class=cm>/* 0: not visited, 1: visiting, -1: visited */</span>
        <span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;</span> <span class=n>res</span><span class=p>;</span>

        <span class=k>for</span> <span class=p>(</span><span class=k>auto</span> <span class=nl>a</span> <span class=p>:</span> <span class=n>prerequisites</span><span class=p>)</span> <span class=p>{</span>
            <span class=n>graph</span><span class=p>[</span><span class=n>a</span><span class=p>.</span><span class=n>second</span><span class=p>].</span><span class=n>push_back</span><span class=p>(</span><span class=n>a</span><span class=p>.</span><span class=n>first</span><span class=p>);</span>
        <span class=p>}</span>

        <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>numCourses</span><span class=p>;</span> <span class=o>++</span><span class=n>i</span><span class=p>)</span> <span class=p>{</span>
            <span class=k>if</span> <span class=p>(</span><span class=o>!</span><span class=n>visit</span><span class=p>[</span><span class=n>i</span><span class=p>]</span> <span class=o>&amp;&amp;</span> <span class=o>!</span><span class=n>findOrderDFS</span><span class=p>(</span><span class=n>graph</span><span class=p>,</span> <span class=n>visit</span><span class=p>,</span> <span class=n>i</span><span class=p>,</span> <span class=n>res</span><span class=p>))</span> <span class=p>{</span>
                <span class=k>return</span> <span class=p>{};</span>
            <span class=p>}</span>
        <span class=p>}</span>

        <span class=n>reverse</span><span class=p>(</span><span class=n>res</span><span class=p>.</span><span class=n>begin</span><span class=p>(),</span> <span class=n>res</span><span class=p>.</span><span class=n>end</span><span class=p>());</span>

        <span class=k>return</span> <span class=n>res</span><span class=p>;</span>
    <span class=p>}</span>

    <span class=kt>bool</span> <span class=n>findOrderDFS</span><span class=p>(</span><span class=n>vector</span><span class=o>&lt;</span><span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;&gt;&amp;</span> <span class=n>graph</span><span class=p>,</span> <span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;&amp;</span> <span class=n>visit</span><span class=p>,</span> <span class=kt>int</span> <span class=n>i</span><span class=p>,</span> <span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;&amp;</span> <span class=n>res</span><span class=p>)</span> <span class=p>{</span>
        <span class=k>if</span> <span class=p>(</span><span class=n>visit</span><span class=p>[</span><span class=n>i</span><span class=p>]</span> <span class=o>==</span> <span class=mi>1</span><span class=p>)</span> <span class=k>return</span> <span class=nb>false</span><span class=p>;</span> <span class=cm>/* visiting */</span>
        <span class=k>if</span> <span class=p>(</span><span class=n>visit</span><span class=p>[</span><span class=n>i</span><span class=p>]</span> <span class=o>==</span> <span class=o>-</span><span class=mi>1</span><span class=p>)</span> <span class=k>return</span> <span class=nb>true</span><span class=p>;</span>

        <span class=n>visit</span><span class=p>[</span><span class=n>i</span><span class=p>]</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span>
        <span class=k>for</span> <span class=p>(</span><span class=k>auto</span> <span class=nl>a</span> <span class=p>:</span> <span class=n>graph</span><span class=p>[</span><span class=n>i</span><span class=p>])</span> <span class=p>{</span>
            <span class=k>if</span> <span class=p>(</span><span class=o>!</span><span class=n>findOrderDFS</span><span class=p>(</span><span class=n>graph</span><span class=p>,</span> <span class=n>visit</span><span class=p>,</span> <span class=n>a</span><span class=p>,</span> <span class=n>res</span><span class=p>))</span> <span class=p>{</span>
                <span class=k>return</span> <span class=nb>false</span><span class=p>;</span>
            <span class=p>}</span>
        <span class=p>}</span>

        <span class=n>visit</span><span class=p>[</span><span class=n>i</span><span class=p>]</span> <span class=o>=</span> <span class=o>-</span><span class=mi>1</span><span class=p>;</span>
        <span class=n>res</span><span class=p>.</span><span class=n>push_back</span><span class=p>(</span><span class=n>i</span><span class=p>);</span>
        <span class=k>return</span> <span class=nb>true</span><span class=p>;</span>
    <span class=p>}</span>
<span class=p>};</span>
</code></pre></div> <p>Solution 2 BFS</p> <div class=codehilite><pre><span></span><code><span class=k>class</span> <span class=nc>Solution</span> <span class=p>{</span>
<span class=k>public</span><span class=o>:</span>
    <span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;</span> <span class=n>findOrder</span><span class=p>(</span><span class=kt>int</span> <span class=n>numCourses</span><span class=p>,</span> <span class=n>vector</span><span class=o>&lt;</span><span class=n>pair</span><span class=o>&lt;</span><span class=kt>int</span><span class=p>,</span> <span class=kt>int</span><span class=o>&gt;&gt;&amp;</span> <span class=n>prerequisites</span><span class=p>)</span> <span class=p>{</span>
        <span class=n>vector</span><span class=o>&lt;</span><span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;&gt;</span> <span class=n>graph</span><span class=p>(</span><span class=n>numCourses</span><span class=p>,</span> <span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;</span><span class=p>(</span><span class=mi>0</span><span class=p>));</span>
        <span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;</span> <span class=n>in</span><span class=p>(</span><span class=n>numCourses</span><span class=p>,</span> <span class=mi>0</span><span class=p>);</span>
        <span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;</span> <span class=n>res</span><span class=p>;</span>
        <span class=c1>// identify the sink edge by indegree</span>
        <span class=k>for</span> <span class=p>(</span><span class=k>auto</span> <span class=nl>a</span> <span class=p>:</span> <span class=n>prerequisites</span><span class=p>)</span> <span class=p>{</span>
            <span class=n>graph</span><span class=p>[</span><span class=n>a</span><span class=p>.</span><span class=n>second</span><span class=p>].</span><span class=n>push_back</span><span class=p>(</span><span class=n>a</span><span class=p>.</span><span class=n>first</span><span class=p>);</span>
            <span class=o>++</span><span class=n>in</span><span class=p>[</span><span class=n>a</span><span class=p>.</span><span class=n>first</span><span class=p>];</span>
        <span class=p>}</span>

        <span class=n>queue</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;</span> <span class=n>q</span><span class=p>;</span>
        <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>numCourses</span><span class=p>;</span> <span class=o>++</span><span class=n>i</span><span class=p>)</span> <span class=p>{</span> <span class=c1>//push the &quot;sink&quot; vetex to the queue</span>
            <span class=k>if</span> <span class=p>(</span><span class=n>in</span><span class=p>[</span><span class=n>i</span><span class=p>]</span> <span class=o>==</span> <span class=mi>0</span><span class=p>)</span> <span class=n>q</span><span class=p>.</span><span class=n>push</span><span class=p>(</span><span class=n>i</span><span class=p>);</span>
        <span class=p>}</span>

        <span class=k>while</span> <span class=p>(</span><span class=o>!</span><span class=n>q</span><span class=p>.</span><span class=n>empty</span><span class=p>())</span> <span class=p>{</span>
            <span class=kt>int</span> <span class=n>t</span> <span class=o>=</span> <span class=n>q</span><span class=p>.</span><span class=n>front</span><span class=p>();</span> <span class=n>q</span><span class=p>.</span><span class=n>pop</span><span class=p>();</span>
            <span class=n>res</span><span class=p>.</span><span class=n>push_back</span><span class=p>(</span><span class=n>t</span><span class=p>);</span>
            <span class=k>for</span> <span class=p>(</span><span class=k>auto</span> <span class=nl>a</span> <span class=p>:</span> <span class=n>graph</span><span class=p>[</span><span class=n>t</span><span class=p>])</span> <span class=p>{</span>
                <span class=o>--</span><span class=n>in</span><span class=p>[</span><span class=n>a</span><span class=p>];</span>
                <span class=k>if</span> <span class=p>(</span><span class=n>in</span><span class=p>[</span><span class=n>a</span><span class=p>]</span> <span class=o>==</span> <span class=mi>0</span><span class=p>)</span> <span class=n>q</span><span class=p>.</span><span class=n>push</span><span class=p>(</span><span class=n>a</span><span class=p>);</span> <span class=c1>// add a new sink vertex</span>
            <span class=p>}</span>
        <span class=p>}</span>
        <span class=c1>// circle detection</span>
        <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>numCourses</span><span class=p>;</span> <span class=o>++</span><span class=n>i</span><span class=p>)</span> <span class=p>{</span>
            <span class=k>if</span> <span class=p>(</span><span class=n>in</span><span class=p>[</span><span class=n>i</span><span class=p>]</span> <span class=o>!=</span> <span class=mi>0</span><span class=p>)</span> <span class=k>return</span> <span class=p>{};</span>
        <span class=p>}</span>

        <span class=k>return</span> <span class=n>res</span><span class=p>;</span>
    <span class=p>}</span>
<span class=p>};</span>
</code></pre></div> <h3 id=alien-dictionary>Alien Dictionary<a class=headerlink href=#alien-dictionary title="Permanent link">&para;</a></h3> <p>Solution 1 Topological Sort</p> <div class=codehilite><pre><span></span><code><span class=k>class</span> <span class=nc>Solution</span> <span class=p>{</span>
<span class=k>public</span><span class=o>:</span>
    <span class=n>string</span> <span class=n>alienOrder</span><span class=p>(</span><span class=n>vector</span><span class=o>&lt;</span><span class=n>string</span><span class=o>&gt;&amp;</span> <span class=n>words</span><span class=p>)</span> <span class=p>{</span>
        <span class=n>set</span><span class=o>&lt;</span><span class=n>pair</span><span class=o>&lt;</span><span class=kt>char</span><span class=p>,</span> <span class=kt>char</span><span class=o>&gt;&gt;</span> <span class=n>g</span><span class=p>;</span> <span class=c1>// adj list graph, second -&gt; first,</span>
        <span class=n>unordered_set</span><span class=o>&lt;</span><span class=kt>char</span><span class=o>&gt;</span> <span class=n>set</span><span class=p>;</span> <span class=c1>// all unique characters set</span>
        <span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;</span> <span class=n>in</span><span class=p>(</span><span class=mi>256</span><span class=p>,</span> <span class=mi>0</span><span class=p>);</span>  <span class=c1>// indegree for each chars</span>

        <span class=n>string</span> <span class=n>res</span> <span class=o>=</span> <span class=s>&quot;&quot;</span><span class=p>;</span>

        <span class=k>for</span> <span class=p>(</span><span class=k>auto</span> <span class=nl>a</span> <span class=p>:</span> <span class=n>words</span><span class=p>)</span> <span class=c1>// store all unique char of the dict words</span>
            <span class=n>set</span><span class=p>.</span><span class=n>insert</span><span class=p>(</span><span class=n>a</span><span class=p>.</span><span class=n>begin</span><span class=p>(),</span> <span class=n>a</span><span class=p>.</span><span class=n>end</span><span class=p>());</span>

        <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>words</span><span class=p>.</span><span class=n>size</span><span class=p>()</span> <span class=o>-</span> <span class=mi>1</span><span class=p>;</span> <span class=n>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
            <span class=kt>int</span> <span class=n>min_len</span> <span class=o>=</span> <span class=n>min</span><span class=p>(</span><span class=n>words</span><span class=p>[</span><span class=n>i</span><span class=p>].</span><span class=n>size</span><span class=p>(),</span> <span class=n>words</span><span class=p>[</span><span class=n>i</span> <span class=o>+</span> <span class=mi>1</span><span class=p>].</span><span class=n>size</span><span class=p>()),</span> <span class=n>j</span><span class=p>;</span>
            <span class=k>for</span> <span class=p>(</span><span class=n>j</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>j</span> <span class=o>&lt;</span> <span class=n>min_len</span><span class=p>;</span> <span class=n>j</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
                <span class=k>if</span> <span class=p>(</span><span class=n>words</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>!=</span> <span class=n>words</span><span class=p>[</span><span class=n>i</span> <span class=o>+</span> <span class=mi>1</span><span class=p>][</span><span class=n>j</span><span class=p>])</span> <span class=p>{</span> <span class=c1>// build graph from the dictionary</span>
                    <span class=n>g</span><span class=p>.</span><span class=n>insert</span><span class=p>({</span><span class=n>words</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>],</span> <span class=n>words</span><span class=p>[</span><span class=n>i</span> <span class=o>+</span> <span class=mi>1</span><span class=p>][</span><span class=n>j</span><span class=p>]});</span> <span class=c1>// word[0][0] is the sink vertex</span>
                    <span class=k>break</span><span class=p>;</span> <span class=c1>// take only one</span>
                <span class=p>}</span>
            <span class=p>}</span>
        <span class=p>}</span>

        <span class=c1>// calculate indegree of nodes</span>
        <span class=k>for</span> <span class=p>(</span><span class=k>auto</span> <span class=nl>c</span> <span class=p>:</span> <span class=n>g</span><span class=p>)</span>
            <span class=o>++</span><span class=n>in</span><span class=p>[</span><span class=n>c</span><span class=p>.</span><span class=n>second</span><span class=p>];</span>

        <span class=c1>// push sink node to the queue</span>
        <span class=n>queue</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;</span> <span class=n>q</span><span class=p>;</span>
        <span class=k>for</span> <span class=p>(</span><span class=kt>char</span> <span class=nl>c</span> <span class=p>:</span> <span class=n>set</span><span class=p>)</span> <span class=p>{</span>
            <span class=k>if</span> <span class=p>(</span><span class=n>in</span><span class=p>[</span><span class=n>c</span><span class=p>]</span> <span class=o>==</span> <span class=mi>0</span><span class=p>)</span> <span class=p>{</span>
                <span class=n>q</span><span class=p>.</span><span class=n>push</span><span class=p>(</span><span class=n>c</span><span class=p>);</span>
                <span class=n>res</span> <span class=o>+=</span> <span class=n>c</span><span class=p>;</span> <span class=c1>// sink vertex added to result</span>
            <span class=p>}</span>
        <span class=p>}</span>

        <span class=k>while</span> <span class=p>(</span><span class=o>!</span><span class=n>q</span><span class=p>.</span><span class=n>empty</span><span class=p>())</span> <span class=p>{</span> <span class=c1>// BFS to output the sorted order</span>
            <span class=kt>char</span> <span class=n>a</span> <span class=o>=</span> <span class=n>q</span><span class=p>.</span><span class=n>front</span><span class=p>();</span> <span class=n>q</span><span class=p>.</span><span class=n>pop</span><span class=p>();</span>
            <span class=k>for</span> <span class=p>(</span><span class=k>auto</span> <span class=nl>c</span> <span class=p>:</span> <span class=n>g</span><span class=p>)</span> <span class=p>{</span>
                <span class=k>if</span> <span class=p>(</span><span class=n>c</span><span class=p>.</span><span class=n>first</span> <span class=o>==</span> <span class=n>a</span><span class=p>)</span> <span class=p>{</span> <span class=c1>// for each incomming edge of sink node a.</span>
                    <span class=o>--</span><span class=n>in</span><span class=p>[</span><span class=n>c</span><span class=p>.</span><span class=n>second</span><span class=p>];</span> <span class=c1>// here we treat the topological order c.second -&gt; c.first</span>
                    <span class=k>if</span> <span class=p>(</span><span class=n>in</span><span class=p>[</span><span class=n>c</span><span class=p>.</span><span class=n>second</span><span class=p>]</span> <span class=o>==</span> <span class=mi>0</span><span class=p>)</span> <span class=p>{</span>
                        <span class=n>q</span><span class=p>.</span><span class=n>push</span><span class=p>(</span><span class=n>c</span><span class=p>.</span><span class=n>second</span><span class=p>);</span>
                        <span class=n>res</span> <span class=o>+=</span> <span class=n>c</span><span class=p>.</span><span class=n>second</span><span class=p>;</span>
                    <span class=p>}</span>
                <span class=p>}</span>
            <span class=p>}</span>
        <span class=p>}</span>

        <span class=k>return</span> <span class=n>res</span><span class=p>.</span><span class=n>size</span><span class=p>()</span> <span class=o>==</span> <span class=n>set</span><span class=p>.</span><span class=n>size</span><span class=p>()</span> <span class=o>?</span> <span class=nl>res</span> <span class=p>:</span> <span class=s>&quot;&quot;</span><span class=p>;</span>
    <span class=p>}</span>
<span class=p>};</span>
</code></pre></div> <h3 id=sequence-reconstruction>Sequence Reconstruction<a class=headerlink href=#sequence-reconstruction title="Permanent link">&para;</a></h3> <p>Solution 1 Topological Sort</p> <div class=codehilite><pre><span></span><code><span class=k>class</span> <span class=nc>Solution</span> <span class=p>{</span>
<span class=k>public</span><span class=o>:</span>
    <span class=kt>bool</span> <span class=n>sequenceReconstruction</span><span class=p>(</span><span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;&amp;</span> <span class=n>org</span><span class=p>,</span> <span class=n>vector</span><span class=o>&lt;</span><span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;&gt;&amp;</span> <span class=n>seqs</span><span class=p>)</span> <span class=p>{</span>
        <span class=kt>int</span> <span class=n>n</span> <span class=o>=</span> <span class=n>org</span><span class=p>.</span><span class=n>size</span><span class=p>();</span>
        <span class=kt>int</span> <span class=n>m</span> <span class=o>=</span> <span class=n>seqs</span><span class=p>.</span><span class=n>size</span><span class=p>();</span>

        <span class=n>vector</span><span class=o>&lt;</span><span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;&gt;</span> <span class=n>graph</span><span class=p>(</span><span class=n>n</span> <span class=o>+</span> <span class=mi>1</span><span class=p>,</span> <span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;</span><span class=p>(</span><span class=mi>0</span><span class=p>));</span>
        <span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;</span> <span class=n>in</span><span class=p>(</span><span class=n>n</span> <span class=o>+</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>0</span><span class=p>);</span>
        <span class=kt>bool</span> <span class=n>empty</span> <span class=o>=</span> <span class=nb>true</span><span class=p>;</span>
        <span class=k>for</span> <span class=p>(</span><span class=k>auto</span> <span class=nl>seq</span> <span class=p>:</span> <span class=n>seqs</span><span class=p>)</span> <span class=p>{</span>
            <span class=k>if</span> <span class=p>(</span><span class=n>seq</span><span class=p>.</span><span class=n>empty</span><span class=p>())</span> <span class=k>continue</span><span class=p>;</span>
            <span class=k>if</span> <span class=p>(</span><span class=n>seq</span><span class=p>.</span><span class=n>size</span><span class=p>()</span> <span class=o>&lt;</span> <span class=mi>2</span> <span class=o>&amp;&amp;</span> <span class=p>(</span><span class=n>seq</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span> <span class=o>&lt;</span> <span class=mi>1</span> <span class=o>||</span> <span class=n>seq</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span> <span class=o>&gt;</span> <span class=n>n</span><span class=p>))</span> <span class=k>return</span> <span class=nb>false</span><span class=p>;</span>
            <span class=n>empty</span> <span class=o>=</span> <span class=nb>false</span><span class=p>;</span>
            <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>seq</span><span class=p>.</span><span class=n>size</span><span class=p>()</span> <span class=o>-</span> <span class=mi>1</span><span class=p>;</span> <span class=o>++</span><span class=n>i</span><span class=p>)</span> <span class=p>{</span>
                <span class=kt>int</span> <span class=n>u</span> <span class=o>=</span> <span class=n>seq</span><span class=p>[</span><span class=n>i</span><span class=p>];</span>
                <span class=kt>int</span> <span class=n>v</span> <span class=o>=</span> <span class=n>seq</span><span class=p>[</span><span class=n>i</span> <span class=o>+</span> <span class=mi>1</span><span class=p>];</span>
                <span class=k>if</span> <span class=p>(</span><span class=n>u</span> <span class=o>&lt;</span> <span class=mi>1</span> <span class=o>||</span> <span class=n>u</span> <span class=o>&gt;</span> <span class=n>n</span> <span class=o>||</span> <span class=n>v</span> <span class=o>&lt;</span> <span class=mi>1</span> <span class=o>||</span> <span class=n>v</span> <span class=o>&gt;</span> <span class=n>n</span><span class=p>)</span> <span class=k>return</span> <span class=nb>false</span><span class=p>;</span>
                <span class=n>graph</span><span class=p>[</span><span class=n>u</span><span class=p>].</span><span class=n>push_back</span><span class=p>(</span><span class=n>v</span><span class=p>);</span> <span class=c1>// build the graph</span>
                <span class=n>in</span><span class=p>[</span><span class=n>v</span><span class=p>]</span><span class=o>++</span><span class=p>;</span> <span class=c1>// compute the indegree</span>
            <span class=p>}</span>
        <span class=p>}</span>

        <span class=k>if</span> <span class=p>(</span><span class=n>empty</span><span class=p>)</span> <span class=k>return</span> <span class=nb>false</span><span class=p>;</span>

        <span class=n>queue</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;</span> <span class=n>q</span><span class=p>;</span>
        <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;=</span> <span class=n>n</span><span class=p>;</span> <span class=o>++</span><span class=n>i</span><span class=p>)</span> <span class=p>{</span>
            <span class=k>if</span> <span class=p>(</span><span class=n>in</span><span class=p>[</span><span class=n>i</span><span class=p>]</span> <span class=o>==</span> <span class=mi>0</span><span class=p>)</span> <span class=p>{</span>
                <span class=n>q</span><span class=p>.</span><span class=n>push</span><span class=p>(</span><span class=n>i</span><span class=p>);</span>
            <span class=p>}</span>
        <span class=p>}</span>

        <span class=kt>int</span> <span class=n>k</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
        <span class=k>while</span> <span class=p>(</span><span class=o>!</span><span class=n>q</span><span class=p>.</span><span class=n>empty</span><span class=p>())</span> <span class=p>{</span> <span class=c1>// BFS to compute the topological order</span>
            <span class=c1>// inorder to get a unique sequence, the q.size() should always be 1,</span>
            <span class=c1>// this means that the topological order is unique, consider the first example</span>
            <span class=k>if</span> <span class=p>(</span><span class=n>q</span><span class=p>.</span><span class=n>size</span><span class=p>()</span> <span class=o>&gt;</span> <span class=mi>1</span><span class=p>)</span> <span class=k>return</span> <span class=nb>false</span><span class=p>;</span>
            <span class=kt>int</span> <span class=n>t</span> <span class=o>=</span> <span class=n>q</span><span class=p>.</span><span class=n>front</span><span class=p>();</span> <span class=n>q</span><span class=p>.</span><span class=n>pop</span><span class=p>();</span>
            <span class=k>if</span> <span class=p>(</span><span class=n>t</span> <span class=o>!=</span> <span class=n>org</span><span class=p>[</span><span class=n>k</span><span class=o>++</span><span class=p>])</span> <span class=k>return</span> <span class=nb>false</span><span class=p>;</span>
            <span class=k>for</span> <span class=p>(</span><span class=k>auto</span> <span class=nl>a</span> <span class=p>:</span> <span class=n>graph</span><span class=p>[</span><span class=n>t</span><span class=p>])</span> <span class=p>{</span>
                <span class=n>in</span><span class=p>[</span><span class=n>a</span><span class=p>]</span><span class=o>--</span><span class=p>;</span>
                <span class=k>if</span> <span class=p>(</span><span class=n>in</span><span class=p>[</span><span class=n>a</span><span class=p>]</span> <span class=o>==</span> <span class=mi>0</span><span class=p>)</span> <span class=n>q</span><span class=p>.</span><span class=n>push</span><span class=p>(</span><span class=n>a</span><span class=p>);</span>
            <span class=p>}</span>
        <span class=p>}</span>

        <span class=k>return</span> <span class=n>k</span> <span class=o>==</span> <span class=n>n</span><span class=p>;</span>
    <span class=p>}</span>
<span class=p>};</span>
</code></pre></div> </article> </div> </div> </main> <footer class=md-footer> <div class=md-footer-nav> <nav class="md-footer-nav__inner md-grid"> <a href=../../graph/notes/ title=Graph class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel=prev> <div class="md-flex__cell md-flex__cell--shrink"> <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i> </div> <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title"> <span class=md-flex__ellipsis> <span class=md-footer-nav__direction> Previous </span> Graph </span> </div> </a> <a href=../../interval/notes/ title=Interval class="md-flex md-footer-nav__link md-footer-nav__link--next" rel=next> <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title"> <span class=md-flex__ellipsis> <span class=md-footer-nav__direction> Next </span> Interval </span> </div> <div class="md-flex__cell md-flex__cell--shrink"> <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i> </div> </a> </nav> </div> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-footer-copyright> <div class=md-footer-copyright__highlight> Copyright &copy; 2020 Rui Han </div> powered by <a href=https://www.mkdocs.org target=_blank rel=noopener>MkDocs</a> and <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs</a> </div> </div> </div> </footer> </div> <script src=../../../assets/javascripts/application.c33a9706.js></script> <script>app.initialize({version:"1.1",url:{base:"../../.."}})</script> <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML"></script> </body> </html>