<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="ie=edge"><link href=https://ruihan.org/leetcode/backtracking/notes/ rel=canonical><meta name=lang:clipboard.copy content="Copy to clipboard"><meta name=lang:clipboard.copied content="Copied to clipboard"><meta name=lang:search.language content=en><meta name=lang:search.pipeline.stopwords content=True><meta name=lang:search.pipeline.trimmer content=True><meta name=lang:search.result.none content="No matching documents"><meta name=lang:search.result.one content="1 matching document"><meta name=lang:search.result.other content="# matching documents"><meta name=lang:search.tokenizer content=[\s\-]+><link rel="shortcut icon" href=../../../assets/images/favicon.png><meta name=generator content="mkdocs-1.1, mkdocs-material-4.6.3"><title>Backtracking - RUIHAN.ORG</title><link rel=stylesheet href=../../../assets/stylesheets/application.adb8469c.css><link rel=stylesheet href=../../../assets/stylesheets/application-palette.a8b3c06d.css><meta name=theme-color content><script src=../../../assets/javascripts/modernizr.86422ebf.js></script><link href=https://fonts.gstatic.com rel=preconnect crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback"><style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style><link rel=stylesheet href=../../../assets/fonts/material-icons.css></head> <body dir=ltr data-md-color-primary=black data-md-color-accent=black> <svg class=md-svg> <defs> <svg xmlns=http://www.w3.org/2000/svg width=416 height=448 viewbox="0 0 416 448" id=__github><path fill=currentColor d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg> </defs> </svg> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay data-md-component=overlay for=__drawer></label> <a href=#backtracking tabindex=0 class=md-skip> Skip to content </a> <header class=md-header data-md-component=header> <nav class="md-header-nav md-grid"> <div class=md-flex> <div class="md-flex__cell md-flex__cell--shrink"> <a href=https://ruihan.org title=RUIHAN.ORG aria-label=RUIHAN.ORG class="md-header-nav__button md-logo"> <i class=md-icon></i> </a> </div> <div class="md-flex__cell md-flex__cell--shrink"> <label class="md-icon md-icon--menu md-header-nav__button" for=__drawer></label> </div> <div class="md-flex__cell md-flex__cell--stretch"> <div class="md-flex__ellipsis md-header-nav__title" data-md-component=title> <span class=md-header-nav__topic> RUIHAN.ORG </span> <span class=md-header-nav__topic> Backtracking </span> </div> </div> <div class="md-flex__cell md-flex__cell--shrink"> <label class="md-icon md-icon--search md-header-nav__button" for=__search></label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input aria-label=search name=query placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=query data-md-state=active> <label class="md-icon md-search__icon" for=__search></label> <button type=reset class="md-icon md-search__icon" data-md-component=reset tabindex=-1> &#xE5CD; </button> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=result> <div class=md-search-result__meta> Type to start searching </div> <ol class=md-search-result__list></ol> </div> </div> </div> </div> </div> </div> <div class="md-flex__cell md-flex__cell--shrink"> <div class=md-header-nav__source> <a href=https://github.com/iurnah/ruihan.org title="Go to repository" class=md-source data-md-source=github> <div class=md-source__icon> <svg viewbox="0 0 24 24" width=24 height=24> <use xlink:href=#__github width=24 height=24></use> </svg> </div> <div class=md-source__repository> iurnah/ruihan.org </div> </a> </div> </div> </div> </nav> </header> <div class=md-container> <nav class="md-tabs md-tabs--active" data-md-component=tabs> <div class="md-tabs__inner md-grid"> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../../../books/ class=md-tabs__link> Books </a> </li> <li class=md-tabs__item> <a href=../../../courses/ class=md-tabs__link> Courses </a> </li> <li class=md-tabs__item> <a href=../../ class="md-tabs__link md-tabs__link--active"> Leetcode </a> </li> <li class=md-tabs__item> <a href=../../../research/ class=md-tabs__link> Research </a> </li> <li class=md-tabs__item> <a href=../../../seedlabs/ class=md-tabs__link> SEED Labs </a> </li> <li class=md-tabs__item> <a href=../../../system-design/ class=md-tabs__link> System Design </a> </li> </ul> </div> </nav> <main class=md-main role=main> <div class="md-main__inner md-grid" data-md-component=container> <div class="md-sidebar md-sidebar--primary" data-md-component=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" data-md-level=0> <label class="md-nav__title md-nav__title--site" for=__drawer> <a href=https://ruihan.org title=RUIHAN.ORG class="md-nav__button md-logo"> <i class=md-icon></i> </a> RUIHAN.ORG </label> <div class=md-nav__source> <a href=https://github.com/iurnah/ruihan.org title="Go to repository" class=md-source data-md-source=github> <div class=md-source__icon> <svg viewbox="0 0 24 24" width=24 height=24> <use xlink:href=#__github width=24 height=24></use> </svg> </div> <div class=md-source__repository> iurnah/ruihan.org </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-1 type=checkbox id=nav-1> <label class=md-nav__link for=nav-1> Books </label> <nav class=md-nav data-md-component=collapsible data-md-level=1> <label class=md-nav__title for=nav-1> Books </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../books/ title=Index class=md-nav__link> Index </a> </li> <li class=md-nav__item> <a href=../../../books/accelerated-cpp/notes/ title="Accelerated C++" class=md-nav__link> Accelerated C++ </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-2 type=checkbox id=nav-2> <label class=md-nav__link for=nav-2> Courses </label> <nav class=md-nav data-md-component=collapsible data-md-level=1> <label class=md-nav__title for=nav-2> Courses </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../courses/ title=Index class=md-nav__link> Index </a> </li> <li class=md-nav__item> <a href=../../../courses/stanford-machine-learning/notes.md title="Stanford Machine Learning" class=md-nav__link> Stanford Machine Learning </a> </li> <li class=md-nav__item> <a href=../../../courses/cs224n/lec-notes/ title="CS224N Lecture Notes" class=md-nav__link> CS224N Lecture Notes </a> </li> <li class=md-nav__item> <a href=../../../courses/cs224n/write-up/ title="CS224N Write-up" class=md-nav__link> CS224N Write-up </a> </li> <li class=md-nav__item> <a href=../../../courses/6.431-probability/notes/ title="6.431 Probability" class=md-nav__link> 6.431 Probability </a> </li> <li class=md-nav__item> <a href=../../../courses/learning-from-data/notes.md title="Learning From Data" class=md-nav__link> Learning From Data </a> </li> <li class=md-nav__item> <a href=../../../courses/func-prog-in-scala/notes/ title="Functional Programming Principles in Scala" class=md-nav__link> Functional Programming Principles in Scala </a> </li> <li class=md-nav__item> <a href=../../../courses/9chap-dynamic-prog/notes/ title="Nine Chapter Dynamic Prog" class=md-nav__link> Nine Chapter Dynamic Prog </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-3 type=checkbox id=nav-3 checked> <label class=md-nav__link for=nav-3> Leetcode </label> <nav class=md-nav data-md-component=collapsible data-md-level=1> <label class=md-nav__title for=nav-3> Leetcode </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../ title=Index class=md-nav__link> Index </a> </li> <li class=md-nav__item> <a href=../../array/notes/ title=Array class=md-nav__link> Array </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-toggle md-nav__toggle" data-md-toggle=toc type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> Backtracking </label> <a href=./ title=Backtracking class="md-nav__link md-nav__link--active"> Backtracking </a> <nav class="md-nav md-nav--secondary"> <label class=md-nav__title for=__toc>Table of contents</label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=#introduction class=md-nav__link> introduction </a> </li> <li class=md-nav__item> <a href=#subnets class=md-nav__link> Subnets </a> </li> <li class=md-nav__item> <a href=#permutation class=md-nav__link> Permutation </a> </li> <li class=md-nav__item> <a href=#combination class=md-nav__link> Combination </a> </li> <li class=md-nav__item> <a href=#partition class=md-nav__link> Partition </a> </li> <li class=md-nav__item> <a href=#summary class=md-nav__link> Summary </a> </li> <li class=md-nav__item> <a href=#problems class=md-nav__link> Problems </a> <nav class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a href=#remove-invalid-parenthesis class=md-nav__link> Remove Invalid Parenthesis </a> </li> <li class=md-nav__item> <a href=#subsets class=md-nav__link> Subsets </a> </li> <li class=md-nav__item> <a href=#subsets-ii class=md-nav__link> Subsets II </a> </li> <li class=md-nav__item> <a href=#permutations class=md-nav__link> Permutations </a> </li> <li class=md-nav__item> <a href=#permutations-ii class=md-nav__link> Permutations II </a> </li> <li class=md-nav__item> <a href=#combinations class=md-nav__link> Combinations </a> </li> <li class=md-nav__item> <a href=#combination-sum class=md-nav__link> Combination Sum </a> </li> <li class=md-nav__item> <a href=#combination-sum-ii class=md-nav__link> Combination Sum II </a> </li> <li class=md-nav__item> <a href=#combination-sum-iii class=md-nav__link> Combination Sum III </a> </li> <li class=md-nav__item> <a href=#combination-sum-iv-backpack-vi class=md-nav__link> Combination Sum IV (Backpack VI) </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../binary-search/notes/ title="Binary Search" class=md-nav__link> Binary Search </a> </li> <li class=md-nav__item> <a href=../../breadth-first-search/notes/ title="Breadth-First Search (BFS)" class=md-nav__link> Breadth-First Search (BFS) </a> </li> <li class=md-nav__item> <a href=../../depth-first-search/notes/ title="Depth-First Search (DFS)" class=md-nav__link> Depth-First Search (DFS) </a> </li> <li class=md-nav__item> <a href=../../dynamic-programming/notes/ title="Dynamic Programming" class=md-nav__link> Dynamic Programming </a> </li> <li class=md-nav__item> <a href=../../graph/notes/ title=Graph class=md-nav__link> Graph </a> </li> <li class=md-nav__item> <a href=../../heap/notes/ title=Heap class=md-nav__link> Heap </a> </li> <li class=md-nav__item> <a href=../../interval/notes/ title=Interval class=md-nav__link> Interval </a> </li> <li class=md-nav__item> <a href=../../string/notes/ title=String class=md-nav__link> String </a> </li> <li class=md-nav__item> <a href=../../union-find/notes/ title="Union Find" class=md-nav__link> Union Find </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-4 type=checkbox id=nav-4> <label class=md-nav__link for=nav-4> Research </label> <nav class=md-nav data-md-component=collapsible data-md-level=1> <label class=md-nav__title for=nav-4> Research </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../research/ title=Index class=md-nav__link> Index </a> </li> <li class=md-nav__item> <a href=../../../research/coalition-game/notes/ title="Coalition Game" class=md-nav__link> Coalition Game </a> </li> <li class=md-nav__item> <a href=../../../research/contextual-bandit/notes/ title="Contextual Multi-Armed Bandit" class=md-nav__link> Contextual Multi-Armed Bandit </a> </li> <li class=md-nav__item> <a href=../../../research/tfidf-score/notes/ title="TF-IDF for Information Retrieval" class=md-nav__link> TF-IDF for Information Retrieval </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-5 type=checkbox id=nav-5> <label class=md-nav__link for=nav-5> SEED Labs </label> <nav class=md-nav data-md-component=collapsible data-md-level=1> <label class=md-nav__title for=nav-5> SEED Labs </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../seedlabs/ title=Index class=md-nav__link> Index </a> </li> <li class=md-nav__item> <a href=../../../seedlabs/applied-crypto/notes/ title="Applied Cryptograph Notes" class=md-nav__link> Applied Cryptograph Notes </a> </li> <li class=md-nav__item> <a href=../../../seedlabs/public-key-cryptography-and-pki/notes/ title="Public Key Cryptography and PKI" class=md-nav__link> Public Key Cryptography and PKI </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-6 type=checkbox id=nav-6> <label class=md-nav__link for=nav-6> System Design </label> <nav class=md-nav data-md-component=collapsible data-md-level=1> <label class=md-nav__title for=nav-6> System Design </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../system-design/ title=Index class=md-nav__link> Index </a> </li> <li class=md-nav__item> <a href=../../../system-design/concepts/notes/ title="Distributed System Concepts" class=md-nav__link> Distributed System Concepts </a> </li> <li class=md-nav__item> <a href=../../../system-design/patterns/notes/ title="Design Patterns" class=md-nav__link> Design Patterns </a> </li> <li class=md-nav__item> <a href=../../../system-design/problems/tinyurl/notes/ title="How to Design TinyUrl" class=md-nav__link> How to Design TinyUrl </a> </li> <li class=md-nav__item> <a href=../../../system-design/problems/twitter/notes/ title="How to Design Twitter" class=md-nav__link> How to Design Twitter </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary"> <label class=md-nav__title for=__toc>Table of contents</label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=#introduction class=md-nav__link> introduction </a> </li> <li class=md-nav__item> <a href=#subnets class=md-nav__link> Subnets </a> </li> <li class=md-nav__item> <a href=#permutation class=md-nav__link> Permutation </a> </li> <li class=md-nav__item> <a href=#combination class=md-nav__link> Combination </a> </li> <li class=md-nav__item> <a href=#partition class=md-nav__link> Partition </a> </li> <li class=md-nav__item> <a href=#summary class=md-nav__link> Summary </a> </li> <li class=md-nav__item> <a href=#problems class=md-nav__link> Problems </a> <nav class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a href=#remove-invalid-parenthesis class=md-nav__link> Remove Invalid Parenthesis </a> </li> <li class=md-nav__item> <a href=#subsets class=md-nav__link> Subsets </a> </li> <li class=md-nav__item> <a href=#subsets-ii class=md-nav__link> Subsets II </a> </li> <li class=md-nav__item> <a href=#permutations class=md-nav__link> Permutations </a> </li> <li class=md-nav__item> <a href=#permutations-ii class=md-nav__link> Permutations II </a> </li> <li class=md-nav__item> <a href=#combinations class=md-nav__link> Combinations </a> </li> <li class=md-nav__item> <a href=#combination-sum class=md-nav__link> Combination Sum </a> </li> <li class=md-nav__item> <a href=#combination-sum-ii class=md-nav__link> Combination Sum II </a> </li> <li class=md-nav__item> <a href=#combination-sum-iii class=md-nav__link> Combination Sum III </a> </li> <li class=md-nav__item> <a href=#combination-sum-iv-backpack-vi class=md-nav__link> Combination Sum IV (Backpack VI) </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class=md-content> <article class="md-content__inner md-typeset"> <h1 id=backtracking>Backtracking<a class=headerlink href=#backtracking title="Permanent link">&para;</a></h1> <h2 id=introduction>introduction<a class=headerlink href=#introduction title="Permanent link">&para;</a></h2> <p>Backtracking algorithm can be used to generate all the subsets of a given set, all the permutation of a given sequence, and all the combinations of k elements from a given set with n elements. The algorithms are very similar but differ in some unique property of each problem.</p> <h2 id=subnets>Subnets<a class=headerlink href=#subnets title="Permanent link">&para;</a></h2> <ul> <li>How many subsets there are for a set with n elements? (<span><span class=MathJax_Preview>2^n</span><script type=math/tex>2^n</script></span>)</li> <li>How to generate all the subsets if there are NO duplicates in the set? (See problem <a href=./#subsets>Subsets</a>)</li> <li>How to generate all the UNIQUE subsets if there are duplicates in the set? (See problem <a href=./#subsets-ii>Subsets II</a>)</li> <li>What are the application of subset?</li> </ul> <h2 id=permutation>Permutation<a class=headerlink href=#permutation title="Permanent link">&para;</a></h2> <ul> <li>How many permutations (number of ordering) of a sequence with n elements? (<span><span class=MathJax_Preview>n!</span><script type=math/tex>n!</script></span>)</li> <li>How to generate all the permutations if there are NO duplicates in the set? (See problem <a href=./#permutations>Permutations</a>)</li> <li>How to generate all the UNIQUE permutations if there are duplicates in the set? (See problem <a href=./#permutations-ii>Permutations II</a>)</li> <li>What are the applications of permutation? (upper bound of sorting algorithms)</li> </ul> <h2 id=combination>Combination<a class=headerlink href=#combination title="Permanent link">&para;</a></h2> <ul> <li>How many combinations of k elements from a set of n elements? (<span><span class=MathJax_Preview>\binom{n}{k}</span><script type=math/tex>\binom{n}{k}</script></span>)</li> <li>How to derive the formula <span><span class=MathJax_Preview>\binom{n}{k} = \frac{n!}{k! (n - k)!}</span><script type=math/tex>\binom{n}{k} = \frac{n!}{k! (n - k)!}</script></span>?<ol> <li>Choose k elements from the set one after another without putting back: <span><span class=MathJax_Preview>n (n - 1) \dots (n - k + 1) = \frac{n!}{(n - k)!}</span><script type=math/tex>n (n - 1) \dots (n - k + 1) = \frac{n!}{(n - k)!}</script></span></li> <li>Calculate the number of ways to choose k elements as <span><span class=MathJax_Preview>\binom{n}{k}</span><script type=math/tex>\binom{n}{k}</script></span>, then order the k elements: <span><span class=MathJax_Preview>\binom{n}{k} \times k!</span><script type=math/tex>\binom{n}{k} \times k!</script></span></li> <li>Equalize the two give us: <span><span class=MathJax_Preview>\binom{n}{k} \times k!</span><script type=math/tex>\binom{n}{k} \times k!</script></span></li> </ol> </li> <li>What’s the relation between the subset and combination?</li> <li>For <code>k</code> from <code>0</code> to <code>n</code>, get all the combinations, all those combinations will form the powerset of the original set of n elements. We have <span><span class=MathJax_Preview>\sum_{k = 0}^{n}\binom{n}{k} = \binom{n}{0} + \binom{n}{1}, \dots, \binom{n}{n} = 2^n\text{(number of all set)}</span><script type=math/tex>\sum_{k = 0}^{n}\binom{n}{k} = \binom{n}{0} + \binom{n}{1}, \dots, \binom{n}{n} = 2^n\text{(number of all set)}</script></span></li> <li>How to generate all the combination if there are NO duplicates in the set? (See problem <a href=./#combinations>Combinations</a>)</li> <li>How to generate all the UNIQUE combinations if there are duplicates in the set? (See problem <a href=./#combination-sum>Combination Sum</a>, <a href=./#combination-sum-ii>Combination Sum II</a>, <a href=./#combination-sum-iii>Combination Sum III</a>, <a href=./#backpack-vi>Backpack VI</a>)</li> <li>What are the applications of combination? (calculate the upper bound of sorting algorithms)</li> </ul> <h2 id=partition>Partition<a class=headerlink href=#partition title="Permanent link">&para;</a></h2> <ul> <li>How many ways can we partition a set of <code>n</code> elements into <code>r</code> groups, with the <code>i</code>-th group have <span><span class=MathJax_Preview>n_i</span><script type=math/tex>n_i</script></span> elements. (<span><span class=MathJax_Preview>\frac{n!}{n_1! n_2!, \dots, n_r!}</span><script type=math/tex>\frac{n!}{n_1! n_2!, \dots, n_r!}</script></span>)<ol> <li>We will look at the problem this way: note the numbfer of different ways of partitioning as <span><span class=MathJax_Preview>C</span><script type=math/tex>C</script></span> , each partition have <span><span class=MathJax_Preview>n_1, n_2, \dots, n_r</span><script type=math/tex>n_1, n_2, \dots, n_r</script></span> elements. We align <span><span class=MathJax_Preview>n_1, n_2, \dots, n_r</span><script type=math/tex>n_1, n_2, \dots, n_r</script></span> together to form a <code>n</code> elements sequence and there are <span><span class=MathJax_Preview>n!</span><script type=math/tex>n!</script></span> of such sequences. Remeber for each partition, there are <span><span class=MathJax_Preview>n_1!</span><script type=math/tex>n_1!</script></span> different sequences. So that we have so we have <span><span class=MathJax_Preview>C \cdot n_1! \cdot n_2! \dots n_r! = n!</span><script type=math/tex>C \cdot n_1! \cdot n_2! \dots n_r! = n!</script></span>, and <span><span class=MathJax_Preview>\frac{n!}{n_1! n_2!, \dots, n_r!}</span><script type=math/tex>\frac{n!}{n_1! n_2!, \dots, n_r!}</script></span></li> </ol> </li> <li>When the <code>r = 2</code>, the partition problem essentially becomes a combination problem.</li> <li>What are the applications of partition? (calculate the upper bound of sorting algorithms)</li> </ul> <h2 id=summary>Summary<a class=headerlink href=#summary title="Permanent link">&para;</a></h2> <p><strong>Subset</strong>, <strong>permutation</strong>, and <strong>combination</strong> problems can be solved using a single code template. Other problems that are involving multiple steps, and asking for multiple eligible results that fulfill certain criteria, could also use this template. The subtlety arise when deal with replicates element in the problems.</p> <p>There are some general principles that I summarized for solving it.</p> <ol> <li>The recursive helper function prototype:</li> </ol> <div class=codehilite><pre><span></span><code><span class=n>helper</span><span class=p>(</span><span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;</span> <span class=n>nums</span><span class=p>,</span> <span class=kt>int</span> <span class=n>n</span><span class=p>,</span> <span class=p>[</span><span class=kt>int</span> <span class=n>cur</span><span class=p>],</span> <span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;</span> <span class=o>&amp;</span><span class=n>subset</span><span class=p>,</span> <span class=n>vector</span><span class=o>&lt;</span><span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;&gt;</span> <span class=o>&amp;</span><span class=n>result</span><span class=p>);</span>
</code></pre></div> <ol> <li>The "<em>select action</em>" could be done through update the index <code>int cur</code> for each level of recursive call.</li> <li>Each <code>for</code> iteration (invoke helper function) is to "<em>select</em>" an element in this level, it recursively adding more elements to the temporary result.</li> <li>To remove duplicate result if duplicate element presented, we first need to be clear about where the duplicate results come from. e.g. In generating the power subsets, the duplicated results due to repeatedly selecting the same element from different original position. (consecutive positions, since it is sorted first). Therefore, the idea to avoid duplicate results is to <strong><em>not</em></strong> select the duplicate elements for a second time to form the same pattern, we use the following template check statement to achieve this.</li> </ol> <div class=codehilite><pre><span></span><code><span class=k>if</span> <span class=p>(</span><span class=n>i</span> <span class=o>!=</span> <span class=n>cur</span> <span class=o>&amp;&amp;</span> <span class=n>nums</span><span class=p>[</span><span class=n>i</span><span class=p>]</span> <span class=o>==</span> <span class=n>nums</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=mi>1</span><span class=p>]){</span>
        <span class=k>continue</span><span class=p>;</span>  
<span class=p>}</span>
</code></pre></div> <div class="admonition note"> <p class=admonition-title>4 elements of backtracking</p> <ol> <li>What is the iteration? (the for loop, the same level of node in the tree)</li> <li>What is the recursion? (what index will be advanced?)</li> <li>What is counted in the result? (what should be pushed back?)</li> <li>When is the result returned? (the cutting condition)</li> </ol> </div> <div class="admonition note"> <p class=admonition-title>traceability of backtracking</p> <p>By using recursion and iteration together in this backtrack technique, we can imagine the problem as growing a recursive tree.</p> <ul> <li>To grow the node at the same level, an index in a for loop can do the job.</li> <li>To grow a child of a node, a recursive function should be called. More specifically, we can advance the index by passing it into the recursive function. This index increment let the tree grow vertically.</li> </ul> </div> <h2 id=problems>Problems<a class=headerlink href=#problems title="Permanent link">&para;</a></h2> <h3 id=remove-invalid-parenthesis>Remove Invalid Parenthesis<a class=headerlink href=#remove-invalid-parenthesis title="Permanent link">&para;</a></h3> <p>Decide what to search Relation with BFS</p> <h3 id=subsets>Subsets<a class=headerlink href=#subsets title="Permanent link">&para;</a></h3> <div class=superfences-tabs> <input name=__tabs_1 type=radio id=__tab_1_0 checked=checked> <label for=__tab_1_0>C++</label> <div class=superfences-content><div class=codehilite><pre><span></span><code><span class=k>class</span> <span class=nc>Solution</span> <span class=p>{</span>
<span class=k>public</span><span class=o>:</span>
    <span class=n>vector</span><span class=o>&lt;</span><span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;&gt;</span> <span class=n>subsets</span><span class=p>(</span><span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;&amp;</span> <span class=n>nums</span><span class=p>)</span> <span class=p>{</span>
        <span class=kt>int</span> <span class=n>n</span> <span class=o>=</span> <span class=n>nums</span><span class=p>.</span><span class=n>size</span><span class=p>();</span>
        <span class=n>vector</span><span class=o>&lt;</span><span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;</span> <span class=o>&gt;</span> <span class=n>results</span><span class=p>;</span>
        <span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;</span> <span class=n>subset</span><span class=p>;</span>

        <span class=n>helper</span> <span class=p>(</span><span class=n>nums</span><span class=p>,</span> <span class=n>n</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=n>subset</span><span class=p>,</span> <span class=n>results</span><span class=p>);</span>

        <span class=k>return</span> <span class=n>results</span><span class=p>;</span>
    <span class=p>}</span>

    <span class=cm>/* helper to get the permutation from curr to n - 1, total is n - curr */</span>
    <span class=kt>void</span> <span class=n>helper</span> <span class=p>(</span><span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;</span> <span class=n>nums</span><span class=p>,</span> <span class=kt>int</span> <span class=n>n</span><span class=p>,</span> <span class=kt>int</span> <span class=n>curr</span><span class=p>,</span>
                 <span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;&amp;</span> <span class=n>subset</span><span class=p>,</span> <span class=n>vector</span><span class=o>&lt;</span><span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;</span> <span class=o>&gt;&amp;</span> <span class=n>results</span><span class=p>)</span> <span class=p>{</span>

        <span class=n>results</span><span class=p>.</span><span class=n>push_back</span><span class=p>(</span><span class=n>subset</span><span class=p>);</span>

        <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=n>curr</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>n</span><span class=p>;</span> <span class=n>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
            <span class=n>subset</span><span class=p>.</span><span class=n>push_back</span><span class=p>(</span><span class=n>nums</span><span class=p>[</span><span class=n>i</span><span class=p>]);</span>
            <span class=n>helper</span><span class=p>(</span><span class=n>nums</span><span class=p>,</span> <span class=n>n</span><span class=p>,</span> <span class=n>i</span> <span class=o>+</span> <span class=mi>1</span><span class=p>,</span> <span class=n>subset</span><span class=p>,</span> <span class=n>results</span><span class=p>);</span>
            <span class=n>subset</span><span class=p>.</span><span class=n>pop_back</span><span class=p>();</span>
        <span class=p>}</span>
    <span class=p>}</span>
<span class=p>};</span>
</code></pre></div></div> <input name=__tabs_1 type=radio id=__tab_1_1> <label for=__tab_1_1>Python</label> <div class=superfences-content><div class=codehilite><pre><span></span><code><span class=k>class</span> <span class=nc>Solution</span><span class=p>(</span><span class=nb>object</span><span class=p>):</span>
    <span class=k>def</span> <span class=nf>subsets</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>nums</span><span class=p>):</span>
        <span class=sd>&quot;&quot;&quot;</span>
<span class=sd>        :type nums: List[int]</span>
<span class=sd>        :rtype: List[List[int]]</span>
<span class=sd>        &quot;&quot;&quot;</span>
        <span class=n>n</span> <span class=o>=</span> <span class=nb>len</span><span class=p>(</span><span class=n>nums</span><span class=p>)</span>
        <span class=n>results</span> <span class=o>=</span> <span class=p>[]</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>helper</span><span class=p>(</span><span class=n>nums</span><span class=p>,</span> <span class=n>n</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=p>[],</span> <span class=n>results</span><span class=p>)</span>

        <span class=k>return</span> <span class=n>results</span>

    <span class=k>def</span> <span class=nf>helper</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>nums</span><span class=p>,</span> <span class=n>n</span><span class=p>,</span> <span class=n>curr</span><span class=p>,</span> <span class=n>currSubset</span><span class=p>,</span> <span class=n>results</span><span class=p>):</span>

        <span class=n>results</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=nb>list</span><span class=p>(</span><span class=n>currSubset</span><span class=p>))</span>

        <span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=n>curr</span><span class=p>,</span> <span class=n>n</span><span class=p>):</span>
            <span class=n>currSubset</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>nums</span><span class=p>[</span><span class=n>i</span><span class=p>])</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>helper</span><span class=p>(</span><span class=n>nums</span><span class=p>,</span> <span class=n>n</span><span class=p>,</span> <span class=n>i</span> <span class=o>+</span> <span class=mi>1</span><span class=p>,</span> <span class=n>currSubset</span><span class=p>,</span> <span class=n>results</span><span class=p>)</span>
            <span class=n>currSubset</span><span class=o>.</span><span class=n>pop</span><span class=p>()</span>
</code></pre></div></div> </div> <h3 id=subsets-ii>Subsets II<a class=headerlink href=#subsets-ii title="Permanent link">&para;</a></h3> <div class=superfences-tabs> <input name=__tabs_2 type=radio id=__tab_2_0 checked=checked> <label for=__tab_2_0>C++</label> <div class=superfences-content><div class=codehilite><pre><span></span><code><span class=k>class</span> <span class=nc>Solution</span> <span class=p>{</span>
<span class=k>public</span><span class=o>:</span>
    <span class=n>vector</span><span class=o>&lt;</span><span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;&gt;</span> <span class=n>subsetsWithDup</span><span class=p>(</span><span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;&amp;</span> <span class=n>nums</span><span class=p>)</span> <span class=p>{</span>
        <span class=kt>int</span> <span class=n>n</span> <span class=o>=</span> <span class=n>nums</span><span class=p>.</span><span class=n>size</span><span class=p>();</span>
        <span class=n>vector</span><span class=o>&lt;</span><span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;&gt;</span> <span class=n>results</span><span class=p>;</span>
        <span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;</span> <span class=n>subset</span><span class=p>;</span>

        <span class=n>sort</span> <span class=p>(</span><span class=n>nums</span><span class=p>.</span><span class=n>begin</span><span class=p>(),</span> <span class=n>nums</span><span class=p>.</span><span class=n>end</span><span class=p>());</span>

        <span class=n>helper</span> <span class=p>(</span><span class=n>nums</span><span class=p>,</span> <span class=n>n</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=n>subset</span><span class=p>,</span> <span class=n>results</span><span class=p>);</span>

        <span class=k>return</span> <span class=n>results</span><span class=p>;</span>
    <span class=p>}</span>

    <span class=kt>void</span> <span class=n>helper</span><span class=p>(</span><span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;</span> <span class=n>nums</span><span class=p>,</span> <span class=kt>int</span> <span class=n>n</span><span class=p>,</span> <span class=kt>int</span> <span class=n>curr</span><span class=p>,</span>
               <span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;&amp;</span> <span class=n>subset</span><span class=p>,</span> <span class=n>vector</span><span class=o>&lt;</span><span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;&gt;&amp;</span> <span class=n>results</span><span class=p>)</span> <span class=p>{</span>

        <span class=n>results</span><span class=p>.</span><span class=n>push_back</span><span class=p>(</span><span class=n>subset</span><span class=p>);</span>

        <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=n>curr</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>n</span><span class=p>;</span> <span class=n>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
<span class=hll>            <span class=k>if</span> <span class=p>(</span><span class=n>i</span> <span class=o>&gt;</span> <span class=n>curr</span> <span class=o>&amp;&amp;</span> <span class=n>nums</span><span class=p>[</span><span class=n>i</span><span class=p>]</span> <span class=o>==</span> <span class=n>nums</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=mi>1</span><span class=p>])</span> <span class=p>{</span>
</span>                <span class=k>continue</span><span class=p>;</span>
            <span class=p>}</span>

            <span class=n>subset</span><span class=p>.</span><span class=n>push_back</span><span class=p>(</span><span class=n>nums</span><span class=p>[</span><span class=n>i</span><span class=p>]);</span>
            <span class=n>helper</span><span class=p>(</span><span class=n>nums</span><span class=p>,</span> <span class=n>n</span><span class=p>,</span> <span class=n>i</span> <span class=o>+</span> <span class=mi>1</span><span class=p>,</span> <span class=n>subset</span><span class=p>,</span> <span class=n>results</span><span class=p>);</span>
            <span class=n>subset</span><span class=p>.</span><span class=n>pop_back</span><span class=p>();</span>
        <span class=p>}</span>
    <span class=p>}</span>
<span class=p>};</span>
</code></pre></div></div> <input name=__tabs_2 type=radio id=__tab_2_1> <label for=__tab_2_1>Python</label> <div class=superfences-content><div class=codehilite><pre><span></span><code><span class=k>class</span> <span class=nc>Solution</span><span class=p>(</span><span class=nb>object</span><span class=p>):</span>
    <span class=k>def</span> <span class=nf>subsetsWithDup</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>nums</span><span class=p>):</span>
        <span class=sd>&quot;&quot;&quot;</span>
<span class=sd>        :type nums: List[int]</span>
<span class=sd>        :rtype: List[List[int]]</span>
<span class=sd>        &quot;&quot;&quot;</span>
        <span class=n>n</span> <span class=o>=</span> <span class=nb>len</span><span class=p>(</span><span class=n>nums</span><span class=p>)</span>
        <span class=n>results</span> <span class=o>=</span> <span class=p>[]</span>
        <span class=n>nums</span><span class=o>.</span><span class=n>sort</span><span class=p>()</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>helper</span><span class=p>(</span><span class=n>nums</span><span class=p>,</span> <span class=n>n</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=p>[],</span> <span class=n>results</span><span class=p>)</span>

        <span class=k>return</span> <span class=n>results</span>


    <span class=k>def</span> <span class=nf>helper</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>nums</span><span class=p>,</span> <span class=n>n</span><span class=p>,</span> <span class=n>curr</span><span class=p>,</span> <span class=n>currSubset</span><span class=p>,</span> <span class=n>results</span><span class=p>):</span>
        <span class=n>results</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=nb>list</span><span class=p>(</span><span class=n>currSubset</span><span class=p>))</span>

        <span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=n>curr</span><span class=p>,</span> <span class=n>n</span><span class=p>):</span>
            <span class=k>if</span> <span class=p>(</span><span class=n>i</span> <span class=o>&gt;</span> <span class=n>curr</span><span class=p>)</span> <span class=ow>and</span> <span class=p>(</span><span class=n>nums</span><span class=p>[</span><span class=n>i</span><span class=p>]</span> <span class=o>==</span> <span class=n>nums</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=mi>1</span><span class=p>]):</span>
                <span class=k>continue</span>

            <span class=n>currSubset</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>nums</span><span class=p>[</span><span class=n>i</span><span class=p>])</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>helper</span><span class=p>(</span><span class=n>nums</span><span class=p>,</span> <span class=n>n</span><span class=p>,</span> <span class=n>i</span> <span class=o>+</span> <span class=mi>1</span><span class=p>,</span> <span class=n>currSubset</span><span class=p>,</span> <span class=n>results</span><span class=p>)</span>
            <span class=n>currSubset</span><span class=o>.</span><span class=n>pop</span><span class=p>()</span>
</code></pre></div></div> </div> <h3 id=permutations>Permutations<a class=headerlink href=#permutations title="Permanent link">&para;</a></h3> <div class=superfences-tabs> <input name=__tabs_3 type=radio id=__tab_3_0 checked=checked> <label for=__tab_3_0>classic Backtracking</label> <div class=superfences-content><div class=codehilite><pre><span></span><code><span class=k>class</span> <span class=nc>Solution</span> <span class=p>{</span>
<span class=k>public</span><span class=o>:</span>
    <span class=n>vector</span><span class=o>&lt;</span><span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;</span> <span class=o>&gt;</span> <span class=n>permute</span><span class=p>(</span><span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;</span> <span class=n>nums</span><span class=p>)</span> <span class=p>{</span>
        <span class=n>vector</span><span class=o>&lt;</span><span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;</span> <span class=o>&gt;</span> <span class=n>results</span><span class=p>;</span>
        <span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;</span> <span class=n>permutation</span><span class=p>;</span>
        <span class=kt>int</span> <span class=n>n</span> <span class=o>=</span> <span class=n>nums</span><span class=p>.</span><span class=n>size</span><span class=p>();</span>
        <span class=k>if</span> <span class=p>(</span><span class=n>n</span> <span class=o>==</span> <span class=mi>0</span><span class=p>)</span>
            <span class=k>return</span> <span class=n>results</span><span class=p>;</span>

        <span class=n>sort</span><span class=p>(</span><span class=n>nums</span><span class=p>.</span><span class=n>begin</span><span class=p>(),</span> <span class=n>nums</span><span class=p>.</span><span class=n>end</span><span class=p>());</span>
        <span class=n>helper</span><span class=p>(</span><span class=n>nums</span><span class=p>,</span> <span class=n>n</span><span class=p>,</span> <span class=n>permutation</span><span class=p>,</span> <span class=n>results</span><span class=p>);</span>

        <span class=k>return</span> <span class=n>results</span><span class=p>;</span>
    <span class=p>}</span>

    <span class=kt>void</span> <span class=n>helper</span><span class=p>(</span><span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;</span> <span class=n>nums</span><span class=p>,</span> <span class=kt>int</span> <span class=n>n</span><span class=p>,</span> <span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;</span> <span class=o>&amp;</span><span class=n>permutation</span><span class=p>,</span>
            <span class=n>vector</span><span class=o>&lt;</span><span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;</span> <span class=o>&gt;</span> <span class=o>&amp;</span><span class=n>results</span><span class=p>)</span> <span class=p>{</span>

        <span class=k>if</span> <span class=p>(</span><span class=n>permutation</span><span class=p>.</span><span class=n>size</span><span class=p>()</span> <span class=o>==</span> <span class=n>n</span><span class=p>)</span> <span class=p>{</span>
            <span class=n>results</span><span class=p>.</span><span class=n>push_back</span><span class=p>(</span><span class=n>permutation</span><span class=p>);</span>
            <span class=k>return</span><span class=p>;</span>
        <span class=p>}</span>

        <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>n</span><span class=p>;</span> <span class=n>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
            <span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;::</span><span class=n>iterator</span> <span class=n>it</span><span class=p>;</span>
            <span class=n>it</span> <span class=o>=</span> <span class=n>find</span><span class=p>(</span><span class=n>permutation</span><span class=p>.</span><span class=n>begin</span><span class=p>(),</span> <span class=n>permutation</span><span class=p>.</span><span class=n>end</span><span class=p>(),</span> <span class=n>nums</span><span class=p>[</span><span class=n>i</span><span class=p>]);</span>
            <span class=k>if</span><span class=p>(</span><span class=n>it</span> <span class=o>==</span> <span class=n>permutation</span><span class=p>.</span><span class=n>end</span><span class=p>()){</span>
                <span class=n>permutation</span><span class=p>.</span><span class=n>push_back</span><span class=p>(</span><span class=n>nums</span><span class=p>[</span><span class=n>i</span><span class=p>]);</span>
                <span class=n>helper</span><span class=p>(</span><span class=n>nums</span><span class=p>,</span> <span class=n>n</span><span class=p>,</span> <span class=n>permutation</span><span class=p>,</span> <span class=n>results</span><span class=p>);</span>
                <span class=n>permutation</span><span class=p>.</span><span class=n>pop_back</span><span class=p>();</span>
            <span class=p>}</span>
        <span class=p>}</span>
    <span class=p>}</span>
<span class=p>};</span>
</code></pre></div></div> <input name=__tabs_3 type=radio id=__tab_3_1> <label for=__tab_3_1>use 'visited' variable</label> <div class=superfences-content><div class=codehilite><pre><span></span><code><span class=k>class</span> <span class=nc>Solution</span> <span class=p>{</span>
<span class=k>public</span><span class=o>:</span>
    <span class=n>vector</span><span class=o>&lt;</span><span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;&gt;</span> <span class=n>permute</span><span class=p>(</span><span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;&amp;</span> <span class=n>nums</span><span class=p>)</span> <span class=p>{</span>
        <span class=kt>int</span> <span class=n>n</span> <span class=o>=</span> <span class=n>nums</span><span class=p>.</span><span class=n>size</span><span class=p>();</span>
        <span class=n>vector</span><span class=o>&lt;</span><span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;</span> <span class=o>&gt;</span> <span class=n>results</span><span class=p>;</span>
        <span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;</span> <span class=n>permute</span><span class=p>;</span>
        <span class=n>vector</span><span class=o>&lt;</span><span class=kt>bool</span><span class=o>&gt;</span> <span class=n>visited</span><span class=p>(</span><span class=n>n</span><span class=p>,</span> <span class=nb>false</span><span class=p>);</span>

        <span class=n>helper</span> <span class=p>(</span><span class=n>nums</span><span class=p>,</span> <span class=n>n</span><span class=p>,</span> <span class=n>visited</span><span class=p>,</span> <span class=n>permute</span><span class=p>,</span> <span class=n>results</span><span class=p>);</span>

        <span class=k>return</span> <span class=n>results</span><span class=p>;</span>
    <span class=p>}</span>

    <span class=kt>void</span> <span class=n>helper</span> <span class=p>(</span><span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;</span> <span class=n>nums</span><span class=p>,</span> <span class=kt>int</span> <span class=n>n</span><span class=p>,</span> <span class=n>vector</span><span class=o>&lt;</span><span class=kt>bool</span><span class=o>&gt;</span> <span class=n>visited</span><span class=p>,</span>
                 <span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;&amp;</span> <span class=n>permutation</span><span class=p>,</span> <span class=n>vector</span><span class=o>&lt;</span><span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;</span> <span class=o>&gt;&amp;</span> <span class=n>results</span><span class=p>)</span> <span class=p>{</span>

        <span class=k>if</span> <span class=p>(</span><span class=n>permutation</span><span class=p>.</span><span class=n>size</span><span class=p>()</span> <span class=o>==</span> <span class=n>n</span><span class=p>)</span> <span class=p>{</span>
            <span class=n>results</span><span class=p>.</span><span class=n>push_back</span><span class=p>(</span><span class=n>permutation</span><span class=p>);</span>
            <span class=k>return</span><span class=p>;</span>
        <span class=p>}</span>

        <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>n</span><span class=p>;</span> <span class=n>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
            <span class=k>if</span> <span class=p>(</span><span class=n>visited</span><span class=p>[</span><span class=n>i</span><span class=p>])</span> <span class=p>{</span>
                <span class=k>continue</span><span class=p>;</span>
            <span class=p>}</span>

            <span class=n>visited</span><span class=p>[</span><span class=n>i</span><span class=p>]</span> <span class=o>=</span> <span class=nb>true</span><span class=p>;</span>
            <span class=n>permutation</span><span class=p>.</span><span class=n>push_back</span><span class=p>(</span><span class=n>nums</span><span class=p>[</span><span class=n>i</span><span class=p>]);</span>
            <span class=n>helper</span> <span class=p>(</span><span class=n>nums</span><span class=p>,</span> <span class=n>n</span><span class=p>,</span> <span class=n>visited</span><span class=p>,</span> <span class=n>permutation</span><span class=p>,</span> <span class=n>results</span><span class=p>);</span>
            <span class=n>permutation</span><span class=p>.</span><span class=n>pop_back</span><span class=p>();</span>
            <span class=n>visited</span><span class=p>[</span><span class=n>i</span><span class=p>]</span> <span class=o>=</span> <span class=nb>false</span><span class=p>;</span>
        <span class=p>}</span>
    <span class=p>}</span>
<span class=p>};</span>
</code></pre></div></div> </div> <h3 id=permutations-ii>Permutations II<a class=headerlink href=#permutations-ii title="Permanent link">&para;</a></h3> <ul> <li>The line <code>27</code> is very tricky and important. It can be understand as following: using <code>!visited[i - 1]</code> makes sure when duplicates are selected, the order is ascending (index from small to large). However, using <code>visited[i - 1]</code> means the descending order.</li> <li>You cannot using the find to check whether the element is presetend, you have to use the visited "bit map" to record the states.</li> </ul> <div class=superfences-tabs> <input name=__tabs_4 type=radio id=__tab_4_0 checked=checked> <label for=__tab_4_0>C++</label> <div class=superfences-content><div class=codehilite><pre><span></span><code><span class=k>class</span> <span class=nc>Solution</span> <span class=p>{</span>
<span class=k>public</span><span class=o>:</span>
    <span class=n>vector</span><span class=o>&lt;</span><span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;&gt;</span> <span class=n>permuteUnique</span><span class=p>(</span><span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;&amp;</span> <span class=n>nums</span><span class=p>)</span> <span class=p>{</span>
        <span class=kt>int</span> <span class=n>n</span> <span class=o>=</span> <span class=n>nums</span><span class=p>.</span><span class=n>size</span><span class=p>();</span>
        <span class=n>vector</span><span class=o>&lt;</span><span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;&gt;</span> <span class=n>results</span><span class=p>;</span>
        <span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;</span> <span class=n>permutation</span><span class=p>;</span>
        <span class=n>vector</span><span class=o>&lt;</span><span class=kt>bool</span><span class=o>&gt;</span> <span class=n>visited</span><span class=p>(</span><span class=n>n</span><span class=p>,</span> <span class=mi>0</span><span class=p>);</span>
        <span class=k>if</span> <span class=p>(</span><span class=n>n</span> <span class=o>==</span> <span class=mi>0</span><span class=p>)</span>
            <span class=k>return</span> <span class=n>results</span><span class=p>;</span>

        <span class=n>sort</span><span class=p>(</span><span class=n>nums</span><span class=p>.</span><span class=n>begin</span><span class=p>(),</span> <span class=n>nums</span><span class=p>.</span><span class=n>end</span><span class=p>());</span>

        <span class=n>helper</span><span class=p>(</span><span class=n>nums</span><span class=p>,</span> <span class=n>n</span><span class=p>,</span> <span class=n>visited</span><span class=p>,</span> <span class=n>permutation</span><span class=p>,</span> <span class=n>results</span><span class=p>);</span>

        <span class=k>return</span> <span class=n>results</span><span class=p>;</span>
    <span class=p>}</span>

    <span class=kt>void</span> <span class=n>helper</span><span class=p>(</span><span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;</span> <span class=n>nums</span><span class=p>,</span> <span class=kt>int</span> <span class=n>n</span><span class=p>,</span> <span class=n>vector</span><span class=o>&lt;</span><span class=kt>bool</span><span class=o>&gt;</span> <span class=n>visited</span><span class=p>,</span>
                <span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;&amp;</span> <span class=n>permutation</span><span class=p>,</span> <span class=n>vector</span><span class=o>&lt;</span><span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;&gt;&amp;</span> <span class=n>results</span><span class=p>)</span> <span class=p>{</span>

        <span class=k>if</span> <span class=p>(</span><span class=n>permutation</span><span class=p>.</span><span class=n>size</span><span class=p>()</span> <span class=o>==</span> <span class=n>n</span><span class=p>)</span> <span class=p>{</span>
            <span class=n>results</span><span class=p>.</span><span class=n>push_back</span><span class=p>(</span><span class=n>permutation</span><span class=p>);</span>
            <span class=k>return</span><span class=p>;</span>
        <span class=p>}</span>

        <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>n</span><span class=p>;</span> <span class=n>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
<span class=hll>            <span class=k>if</span> <span class=p>(</span><span class=n>visited</span><span class=p>[</span><span class=n>i</span><span class=p>]</span> <span class=o>||</span> <span class=p>(</span><span class=n>i</span> <span class=o>&gt;</span> <span class=mi>0</span> <span class=o>&amp;&amp;</span> <span class=n>nums</span><span class=p>[</span><span class=n>i</span><span class=p>]</span> <span class=o>==</span> <span class=n>nums</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=mi>1</span><span class=p>]</span> <span class=o>&amp;&amp;</span> <span class=o>!</span><span class=n>visited</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=mi>1</span><span class=p>]))</span> <span class=p>{</span>
</span>            <span class=c1>//if (visited[i] == 1 || (i != 0 &amp;&amp; nums[i] == nums[i - 1] &amp;&amp; visited[i - 1])) { // why this also work?</span>
                <span class=c1>// duplicated element only add once in each recursion(i == 0).</span>
                <span class=c1>// e.g. 1 2 3 4 4 4 5 6 7. each 4 is selected in different level of recursion,</span>
                <span class=c1>// the above equality check avoid adding duplicate element in the same level. (from different index)</span>
                <span class=c1>// if we don&#39;t add this check, the duplicates could from different index</span>
                <span class=k>continue</span><span class=p>;</span>
            <span class=p>}</span>

            <span class=n>visited</span><span class=p>[</span><span class=n>i</span><span class=p>]</span> <span class=o>=</span> <span class=nb>true</span><span class=p>;</span>
            <span class=n>permutation</span><span class=p>.</span><span class=n>push_back</span><span class=p>(</span><span class=n>nums</span><span class=p>[</span><span class=n>i</span><span class=p>]);</span>
            <span class=n>helper</span><span class=p>(</span><span class=n>nums</span><span class=p>,</span> <span class=n>n</span><span class=p>,</span> <span class=n>visited</span><span class=p>,</span> <span class=n>permutation</span><span class=p>,</span> <span class=n>results</span><span class=p>);</span>
            <span class=n>permutation</span><span class=p>.</span><span class=n>pop_back</span><span class=p>();</span>
            <span class=n>visited</span><span class=p>[</span><span class=n>i</span><span class=p>]</span> <span class=o>=</span> <span class=nb>false</span><span class=p>;</span>
        <span class=p>}</span>
    <span class=p>}</span>
<span class=p>};</span>
</code></pre></div></div> </div> <h3 id=combinations>Combinations<a class=headerlink href=#combinations title="Permanent link">&para;</a></h3> <ul> <li>Notice the <code>=</code> in the for loop, here the <code>i</code> is not array index, but number we are enumerating.</li> </ul> <div class=superfences-tabs> <input name=__tabs_5 type=radio id=__tab_5_0 checked=checked> <label for=__tab_5_0>C++</label> <div class=superfences-content><div class=codehilite><pre><span></span><code><span class=k>class</span> <span class=nc>Solution</span> <span class=p>{</span>
<span class=k>public</span><span class=o>:</span>
    <span class=n>vector</span><span class=o>&lt;</span><span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;&gt;</span> <span class=n>combine</span><span class=p>(</span><span class=kt>int</span> <span class=n>n</span><span class=p>,</span> <span class=kt>int</span> <span class=n>k</span><span class=p>)</span> <span class=p>{</span>
        <span class=n>vector</span><span class=o>&lt;</span><span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;&gt;</span> <span class=n>results</span><span class=p>;</span>
        <span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;</span> <span class=n>comb</span><span class=p>;</span>

        <span class=n>helper</span><span class=p>(</span><span class=n>n</span><span class=p>,</span> <span class=n>k</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=n>comb</span><span class=p>,</span> <span class=n>results</span><span class=p>);</span>

        <span class=k>return</span> <span class=n>results</span><span class=p>;</span>
    <span class=p>}</span>

    <span class=kt>void</span> <span class=n>helper</span><span class=p>(</span><span class=kt>int</span> <span class=n>n</span><span class=p>,</span> <span class=kt>int</span> <span class=n>k</span><span class=p>,</span> <span class=kt>int</span> <span class=n>cur</span><span class=p>,</span> <span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;&amp;</span> <span class=n>comb</span><span class=p>,</span>
                <span class=n>vector</span><span class=o>&lt;</span><span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;&gt;&amp;</span> <span class=n>results</span><span class=p>)</span> <span class=p>{</span>

        <span class=k>if</span> <span class=p>(</span><span class=n>comb</span><span class=p>.</span><span class=n>size</span><span class=p>()</span> <span class=o>==</span> <span class=n>k</span><span class=p>)</span> <span class=p>{</span>
            <span class=n>results</span><span class=p>.</span><span class=n>push_back</span><span class=p>(</span><span class=n>comb</span><span class=p>);</span>
            <span class=k>return</span><span class=p>;</span>
        <span class=p>}</span>

        <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=n>cur</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;=</span> <span class=n>n</span><span class=p>;</span> <span class=n>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
            <span class=n>comb</span><span class=p>.</span><span class=n>push_back</span><span class=p>(</span><span class=n>i</span><span class=p>);</span>
            <span class=n>helper</span><span class=p>(</span><span class=n>n</span><span class=p>,</span> <span class=n>k</span><span class=p>,</span> <span class=n>i</span> <span class=o>+</span> <span class=mi>1</span><span class=p>,</span> <span class=n>comb</span><span class=p>,</span> <span class=n>results</span><span class=p>);</span>
            <span class=n>comb</span><span class=p>.</span><span class=n>pop_back</span><span class=p>();</span>
        <span class=p>}</span>
    <span class=p>}</span>
<span class=p>};</span>
</code></pre></div></div> </div> <h3 id=combination-sum>Combination Sum<a class=headerlink href=#combination-sum title="Permanent link">&para;</a></h3> <ul> <li>Notice in line 23, the recursion is on <code>i</code> again even though it has been selected already.</li> </ul> <div class=codehilite><pre><span></span><code><span class=k>class</span> <span class=nc>Solution</span> <span class=p>{</span>
<span class=k>public</span><span class=o>:</span>
    <span class=n>vector</span><span class=o>&lt;</span><span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;&gt;</span> <span class=n>combinationSum</span><span class=p>(</span><span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;&amp;</span> <span class=n>candidates</span><span class=p>,</span> <span class=kt>int</span> <span class=n>target</span><span class=p>)</span> <span class=p>{</span>
        <span class=n>vector</span><span class=o>&lt;</span><span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;&gt;</span> <span class=n>results</span><span class=p>;</span>
        <span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;</span> <span class=n>result</span><span class=p>;</span>

        <span class=n>sort</span><span class=p>(</span><span class=n>candidates</span><span class=p>.</span><span class=n>begin</span><span class=p>(),</span> <span class=n>candidates</span><span class=p>.</span><span class=n>end</span><span class=p>());</span>
        <span class=n>helper</span><span class=p>(</span><span class=n>candidates</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=n>target</span><span class=p>,</span> <span class=n>result</span><span class=p>,</span> <span class=n>results</span><span class=p>);</span>

        <span class=k>return</span> <span class=n>results</span><span class=p>;</span>
    <span class=p>}</span>

    <span class=kt>void</span> <span class=n>helper</span><span class=p>(</span><span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;</span> <span class=n>nums</span><span class=p>,</span> <span class=kt>int</span> <span class=n>cur</span><span class=p>,</span> <span class=kt>int</span> <span class=n>target</span><span class=p>,</span> <span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;&amp;</span> <span class=n>result</span><span class=p>,</span>
                <span class=n>vector</span><span class=o>&lt;</span><span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;&gt;&amp;</span> <span class=n>results</span><span class=p>)</span> <span class=p>{</span>
        <span class=k>if</span> <span class=p>(</span><span class=n>target</span> <span class=o>==</span> <span class=mi>0</span><span class=p>)</span> <span class=p>{</span>
            <span class=n>results</span><span class=p>.</span><span class=n>push_back</span><span class=p>(</span><span class=n>result</span><span class=p>);</span>
            <span class=k>return</span><span class=p>;</span>
        <span class=p>}</span>

        <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=n>cur</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>nums</span><span class=p>.</span><span class=n>size</span><span class=p>();</span> <span class=n>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
            <span class=k>if</span> <span class=p>(</span><span class=n>nums</span><span class=p>[</span><span class=n>i</span><span class=p>]</span> <span class=o>&lt;=</span> <span class=n>target</span><span class=p>)</span> <span class=p>{</span>
                <span class=n>result</span><span class=p>.</span><span class=n>push_back</span><span class=p>(</span><span class=n>nums</span><span class=p>[</span><span class=n>i</span><span class=p>]);</span>
                <span class=n>helper</span><span class=p>(</span><span class=n>nums</span><span class=p>,</span> <span class=n>i</span><span class=p>,</span> <span class=n>target</span> <span class=o>-</span> <span class=n>nums</span><span class=p>[</span><span class=n>i</span><span class=p>],</span> <span class=n>result</span><span class=p>,</span> <span class=n>results</span><span class=p>);</span>
                <span class=n>result</span><span class=p>.</span><span class=n>pop_back</span><span class=p>();</span>
            <span class=p>}</span>
        <span class=p>}</span>
    <span class=p>}</span>
<span class=p>};</span>
</code></pre></div> <h3 id=combination-sum-ii>Combination Sum II<a class=headerlink href=#combination-sum-ii title="Permanent link">&para;</a></h3> <ul> <li>Notice in this problem, duplicate number could be in the original array, don't worry, we will treat the same element in different position differently.</li> <li>Notice how this code can be changed from the Combinations Sum, compare to the solution we only add the if check in line 21, and call the hlepr function with <code>i + 1</code> in line 27.</li> </ul> <div class=codehilite><pre><span></span><code><span class=k>class</span> <span class=nc>Solution</span> <span class=p>{</span>
<span class=k>public</span><span class=o>:</span>
    <span class=n>vector</span><span class=o>&lt;</span><span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;&gt;</span> <span class=n>combinationSum2</span><span class=p>(</span><span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;&amp;</span> <span class=n>candidates</span><span class=p>,</span> <span class=kt>int</span> <span class=n>target</span><span class=p>)</span> <span class=p>{</span>
        <span class=n>vector</span><span class=o>&lt;</span><span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;&gt;</span> <span class=n>results</span><span class=p>;</span>
        <span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;</span> <span class=n>result</span><span class=p>;</span>

        <span class=n>sort</span><span class=p>(</span><span class=n>candidates</span><span class=p>.</span><span class=n>begin</span><span class=p>(),</span> <span class=n>candidates</span><span class=p>.</span><span class=n>end</span><span class=p>());</span>
        <span class=n>helper</span><span class=p>(</span><span class=n>candidates</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=n>target</span><span class=p>,</span> <span class=n>result</span><span class=p>,</span> <span class=n>results</span><span class=p>);</span>

        <span class=k>return</span> <span class=n>results</span><span class=p>;</span>
    <span class=p>}</span>

    <span class=kt>void</span> <span class=n>helper</span><span class=p>(</span><span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;</span> <span class=n>nums</span><span class=p>,</span> <span class=kt>int</span> <span class=n>cur</span><span class=p>,</span> <span class=kt>int</span> <span class=n>target</span><span class=p>,</span> <span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;&amp;</span> <span class=n>result</span><span class=p>,</span>
                <span class=n>vector</span><span class=o>&lt;</span><span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;&gt;&amp;</span> <span class=n>results</span><span class=p>)</span> <span class=p>{</span>
        <span class=k>if</span> <span class=p>(</span><span class=n>target</span> <span class=o>==</span> <span class=mi>0</span><span class=p>)</span> <span class=p>{</span>
            <span class=n>results</span><span class=p>.</span><span class=n>push_back</span><span class=p>(</span><span class=n>result</span><span class=p>);</span>
            <span class=k>return</span><span class=p>;</span>
        <span class=p>}</span>

        <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=n>cur</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>nums</span><span class=p>.</span><span class=n>size</span><span class=p>();</span> <span class=n>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
<span class=hll>            <span class=k>if</span> <span class=p>(</span><span class=n>i</span> <span class=o>&gt;</span> <span class=n>cur</span> <span class=o>&amp;&amp;</span> <span class=n>nums</span><span class=p>[</span><span class=n>i</span><span class=p>]</span> <span class=o>==</span> <span class=n>nums</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=mi>1</span><span class=p>])</span> <span class=p>{</span>
</span>                <span class=k>continue</span><span class=p>;</span>
            <span class=p>}</span>

            <span class=k>if</span> <span class=p>(</span><span class=n>nums</span><span class=p>[</span><span class=n>i</span><span class=p>]</span> <span class=o>&lt;=</span> <span class=n>target</span><span class=p>)</span> <span class=p>{</span>
                <span class=n>result</span><span class=p>.</span><span class=n>push_back</span><span class=p>(</span><span class=n>nums</span><span class=p>[</span><span class=n>i</span><span class=p>]);</span>
                <span class=n>helper</span><span class=p>(</span><span class=n>nums</span><span class=p>,</span> <span class=n>i</span> <span class=o>+</span> <span class=mi>1</span><span class=p>,</span> <span class=n>target</span> <span class=o>-</span> <span class=n>nums</span><span class=p>[</span><span class=n>i</span><span class=p>],</span> <span class=n>result</span><span class=p>,</span> <span class=n>results</span><span class=p>);</span>
                <span class=n>result</span><span class=p>.</span><span class=n>pop_back</span><span class=p>();</span>
            <span class=p>}</span>
        <span class=p>}</span>
    <span class=p>}</span>
<span class=p>};</span>
</code></pre></div> <h3 id=combination-sum-iii>Combination Sum III<a class=headerlink href=#combination-sum-iii title="Permanent link">&para;</a></h3> <ul> <li>Very similar to the <a href=#combination-sum>Combination Sum</a>. Instead of giving an array, this problem gives numbers from <code>1</code> to <code>9</code> and no duplicate selection allowed.</li> <li>The meaning of this problem is also similar to the problem <a href=#k-sum>K Sum</a>, while K Sum is asking "how many", so it is solved using Dynamic Programming.</li> <li>differ with <a href=#combination-sum>Combination Sum</a> in the for loop bounds and the recursive call, remember in <a href=#combination-sum>Combination Sum</a>, the recursive function called with <code>i</code> instead of <code>i + 1</code> because duplication is allowed in that problem.</li> </ul> <div class=codehilite><pre><span></span><code><span class=k>class</span> <span class=nc>Solution</span> <span class=p>{</span>
<span class=k>public</span><span class=o>:</span>
    <span class=n>vector</span><span class=o>&lt;</span><span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;&gt;</span> <span class=n>combinationSum2</span><span class=p>(</span><span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;&amp;</span> <span class=n>candidates</span><span class=p>,</span> <span class=kt>int</span> <span class=n>target</span><span class=p>)</span> <span class=p>{</span>
        <span class=n>vector</span><span class=o>&lt;</span><span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;&gt;</span> <span class=n>results</span><span class=p>;</span>
        <span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;</span> <span class=n>result</span><span class=p>;</span>

        <span class=n>sort</span><span class=p>(</span><span class=n>candidates</span><span class=p>.</span><span class=n>begin</span><span class=p>(),</span> <span class=n>candidates</span><span class=p>.</span><span class=n>end</span><span class=p>());</span>
        <span class=n>helper</span><span class=p>(</span><span class=n>candidates</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=n>target</span><span class=p>,</span> <span class=n>result</span><span class=p>,</span> <span class=n>results</span><span class=p>);</span>

        <span class=k>return</span> <span class=n>results</span><span class=p>;</span>
    <span class=p>}</span>

    <span class=kt>void</span> <span class=n>helper</span><span class=p>(</span><span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;</span> <span class=n>nums</span><span class=p>,</span> <span class=kt>int</span> <span class=n>cur</span><span class=p>,</span> <span class=kt>int</span> <span class=n>target</span><span class=p>,</span> <span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;&amp;</span> <span class=n>result</span><span class=p>,</span>
                <span class=n>vector</span><span class=o>&lt;</span><span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;&gt;&amp;</span> <span class=n>results</span><span class=p>)</span> <span class=p>{</span>
        <span class=k>if</span> <span class=p>(</span><span class=n>target</span> <span class=o>==</span> <span class=mi>0</span><span class=p>)</span> <span class=p>{</span>
            <span class=n>results</span><span class=p>.</span><span class=n>push_back</span><span class=p>(</span><span class=n>result</span><span class=p>);</span>
            <span class=k>return</span><span class=p>;</span>
        <span class=p>}</span>

        <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=n>cur</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>nums</span><span class=p>.</span><span class=n>size</span><span class=p>();</span> <span class=n>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
            <span class=k>if</span> <span class=p>(</span><span class=n>i</span> <span class=o>&gt;</span> <span class=n>cur</span> <span class=o>&amp;&amp;</span> <span class=n>nums</span><span class=p>[</span><span class=n>i</span><span class=p>]</span> <span class=o>==</span> <span class=n>nums</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=mi>1</span><span class=p>])</span> <span class=p>{</span>
                <span class=k>continue</span><span class=p>;</span>
            <span class=p>}</span>

            <span class=k>if</span> <span class=p>(</span><span class=n>nums</span><span class=p>[</span><span class=n>i</span><span class=p>]</span> <span class=o>&lt;=</span> <span class=n>target</span><span class=p>)</span> <span class=p>{</span>
                <span class=n>result</span><span class=p>.</span><span class=n>push_back</span><span class=p>(</span><span class=n>nums</span><span class=p>[</span><span class=n>i</span><span class=p>]);</span>
                <span class=n>helper</span><span class=p>(</span><span class=n>nums</span><span class=p>,</span> <span class=n>i</span> <span class=o>+</span> <span class=mi>1</span><span class=p>,</span> <span class=n>target</span> <span class=o>-</span> <span class=n>nums</span><span class=p>[</span><span class=n>i</span><span class=p>],</span> <span class=n>result</span><span class=p>,</span> <span class=n>results</span><span class=p>);</span>
                <span class=n>result</span><span class=p>.</span><span class=n>pop_back</span><span class=p>();</span>
            <span class=p>}</span>
        <span class=p>}</span>
    <span class=p>}</span>
<span class=p>};</span>
</code></pre></div> <h3 id=combination-sum-iv-backpack-vi>Combination Sum IV (Backpack VI)<a class=headerlink href=#combination-sum-iv-backpack-vi title="Permanent link">&para;</a></h3> <ul> <li>这里可以随便取，似乎题目变得无法下手，考虑“最后一步”这个技巧不能用了，因为最后一步可以是任意一个了。</li> <li>但仍然可以用子问题来考虑。先不管最后一步是哪一个，最后一步之前的相加的总和一定是 <code>Target - x</code>. 这样就转化成一个子问题可以用DP来做。</li> <li>具体做法我们可以对于每一个小于“总承重”的重量进行枚举最后一步<code>x</code>。可能的<code>x</code>是<code>A[0], ..., A[i - 1]</code> 中任意一个.</li> <li>Must initialize <code>f[i] = 0</code>. Because some of the state won't be updated indicates that they are not possible to fill).</li> </ul> <div class=codehilite><pre><span></span><code><span class=k>class</span> <span class=nc>Solution</span> <span class=p>{</span>
<span class=k>public</span><span class=o>:</span>
    <span class=kt>int</span> <span class=n>backPackVI</span><span class=p>(</span><span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;&amp;</span> <span class=n>nums</span><span class=p>,</span> <span class=kt>int</span> <span class=n>T</span><span class=p>)</span> <span class=p>{</span>
        <span class=kt>int</span> <span class=n>n</span> <span class=o>=</span> <span class=n>nums</span><span class=p>.</span><span class=n>size</span><span class=p>();</span>
        <span class=k>if</span> <span class=p>(</span><span class=n>n</span> <span class=o>==</span> <span class=mi>0</span><span class=p>)</span> <span class=p>{</span>
            <span class=k>return</span> <span class=mi>0</span><span class=p>;</span>
        <span class=p>}</span>
        <span class=kt>int</span> <span class=n>f</span><span class=p>[</span><span class=n>T</span> <span class=o>+</span> <span class=mi>1</span><span class=p>];</span>
        <span class=n>f</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span>
        <span class=cm>/* for each sub problem */</span>
        <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;=</span> <span class=n>T</span><span class=p>;</span> <span class=n>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
            <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>]</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
            <span class=cm>/* enumerate the last step */</span>
            <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>j</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>j</span> <span class=o>&lt;</span> <span class=n>n</span><span class=p>;</span> <span class=n>j</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
                <span class=k>if</span> <span class=p>(</span><span class=n>i</span> <span class=o>&gt;=</span> <span class=n>nums</span><span class=p>[</span><span class=n>j</span><span class=p>])</span> <span class=p>{</span>
                    <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>]</span> <span class=o>+=</span> <span class=n>f</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=n>nums</span><span class=p>[</span><span class=n>j</span><span class=p>]];</span>
                <span class=p>}</span>
            <span class=p>}</span>
        <span class=p>}</span>

        <span class=k>return</span> <span class=n>f</span><span class=p>[</span><span class=n>T</span><span class=p>];</span>
    <span class=p>}</span>
<span class=p>};</span>
</code></pre></div> <div class="admonition note"> <p class=admonition-title>Note</p> <p>即使是简单的一维背包，依然是总承重放入状态(即所开数组与总承重相关)</p> </div> <p>Print one such combination solution</p> <ul> <li>Suppose we also interested in print one of the possible solution. How could we change the code?</li> <li><code>f[i]</code>: 存多少种方式</li> <li><code>pi[i]</code>: 如果 <code>f[i] &gt;= 1</code>, 最后一个数字可以是<code>pi[i]</code></li> </ul> <div class=superfences-tabs> <input name=__tabs_6 type=radio id=__tab_6_0 checked=checked> <label for=__tab_6_0>Print one such combination</label> <div class=superfences-content><div class=codehilite><pre><span></span><code><span class=k>class</span> <span class=nc>Solution</span> <span class=p>{</span>
<span class=k>public</span><span class=o>:</span>
    <span class=kt>int</span> <span class=n>backPackVI</span><span class=p>(</span><span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;&amp;</span> <span class=n>nums</span><span class=p>,</span> <span class=kt>int</span> <span class=n>T</span><span class=p>)</span> <span class=p>{</span>
        <span class=kt>int</span> <span class=n>n</span> <span class=o>=</span> <span class=n>nums</span><span class=p>.</span><span class=n>size</span><span class=p>();</span>
        <span class=k>if</span> <span class=p>(</span><span class=n>n</span> <span class=o>==</span> <span class=mi>0</span><span class=p>)</span> <span class=p>{</span>
            <span class=k>return</span> <span class=mi>0</span><span class=p>;</span>
        <span class=p>}</span>

        <span class=kt>int</span> <span class=n>f</span><span class=p>[</span><span class=n>T</span> <span class=o>+</span> <span class=mi>1</span><span class=p>];</span>
        <span class=cm>/* pi[i]: 如果i可拼出(f[i] &gt;= 1), 最后一个是pi[i] */</span>
        <span class=kt>int</span> <span class=n>pi</span><span class=p>[</span><span class=n>T</span> <span class=o>+</span> <span class=mi>1</span><span class=p>];</span>
        <span class=n>f</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span>

        <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;=</span> <span class=n>T</span><span class=p>;</span> <span class=n>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
            <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>]</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
            <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>j</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>j</span> <span class=o>&lt;</span> <span class=n>n</span><span class=p>;</span> <span class=n>j</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
                <span class=k>if</span> <span class=p>(</span><span class=n>i</span> <span class=o>&gt;=</span> <span class=n>nums</span><span class=p>[</span><span class=n>j</span><span class=p>])</span> <span class=p>{</span>
                    <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>]</span> <span class=o>+=</span> <span class=n>f</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=n>nums</span><span class=p>[</span><span class=n>j</span><span class=p>]];</span>
                    <span class=cm>/* 最后一个是nums[j]的可拼出i */</span>
                    <span class=k>if</span> <span class=p>(</span><span class=n>f</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=n>nums</span><span class=p>[</span><span class=n>j</span><span class=p>]]</span> <span class=o>&gt;</span> <span class=mi>0</span><span class=p>)</span> <span class=p>{</span>
                        <span class=cm>/* 纪录下来 */</span>
                        <span class=n>pi</span><span class=p>[</span><span class=n>i</span><span class=p>]</span> <span class=o>=</span> <span class=n>nums</span><span class=p>[</span><span class=n>j</span><span class=p>];</span>
                    <span class=p>}</span>
                <span class=p>}</span>
            <span class=p>}</span>
        <span class=p>}</span>

        <span class=k>if</span> <span class=p>(</span><span class=n>f</span><span class=p>[</span><span class=n>T</span><span class=p>]</span> <span class=o>&gt;</span> <span class=mi>0</span><span class=p>)</span> <span class=p>{</span>
            <span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=n>T</span><span class=p>;</span>
            <span class=n>cout</span> <span class=o>&lt;&lt;</span> <span class=n>i</span> <span class=o>&lt;&lt;</span> <span class=s>&quot;=&quot;</span> <span class=o>&lt;&lt;</span> <span class=n>endl</span><span class=p>;</span>
            <span class=k>while</span> <span class=p>(</span><span class=n>i</span> <span class=o>!=</span> <span class=mi>0</span><span class=p>)</span> <span class=p>{</span>
                <span class=c1>// sum is i now;</span>
                <span class=c1>// last number is pi[i]</span>
                <span class=c1>// previuos sum is i - pi[i]</span>
                <span class=n>cout</span> <span class=o>&lt;&lt;</span> <span class=n>pi</span><span class=p>[</span><span class=n>i</span><span class=p>]</span> <span class=o>&lt;&lt;</span> <span class=n>endl</span><span class=p>;</span>
                <span class=n>i</span> <span class=o>-=</span> <span class=n>pi</span><span class=p>[</span><span class=n>i</span><span class=p>];</span>
            <span class=p>}</span>
        <span class=p>}</span>

        <span class=k>return</span> <span class=n>f</span><span class=p>[</span><span class=n>T</span><span class=p>];</span>
    <span class=p>}</span>
<span class=p>};</span>
</code></pre></div></div> </div> </article> </div> </div> </main> <footer class=md-footer> <div class=md-footer-nav> <nav class="md-footer-nav__inner md-grid"> <a href=../../array/notes/ title=Array class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel=prev> <div class="md-flex__cell md-flex__cell--shrink"> <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i> </div> <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title"> <span class=md-flex__ellipsis> <span class=md-footer-nav__direction> Previous </span> Array </span> </div> </a> <a href=../../binary-search/notes/ title="Binary Search" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel=next> <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title"> <span class=md-flex__ellipsis> <span class=md-footer-nav__direction> Next </span> Binary Search </span> </div> <div class="md-flex__cell md-flex__cell--shrink"> <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i> </div> </a> </nav> </div> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-footer-copyright> <div class=md-footer-copyright__highlight> Copyright &copy; 2020 Rui Han </div> powered by <a href=https://www.mkdocs.org target=_blank rel=noopener>MkDocs</a> and <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs</a> </div> </div> </div> </footer> </div> <script src=../../../assets/javascripts/application.c33a9706.js></script> <script>app.initialize({version:"1.1",url:{base:"../../.."}})</script> <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML"></script> </body> </html>