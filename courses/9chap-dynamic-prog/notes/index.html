<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link href=https://ruihan.org/courses/9chap-dynamic-prog/notes/ rel=canonical><link rel=icon href=../../../assets/images/favicon.png><meta name=generator content="mkdocs-1.2.1, mkdocs-material-7.1.9"><title>Nine Chapter Dynamic Programming - RUIHAN.ORG</title><link rel=stylesheet href=../../../assets/stylesheets/main.ca7ac06f.min.css><link rel=stylesheet href=../../../assets/stylesheets/palette.f1a3b89f.min.css><meta name=theme-color content=#000000><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback"><style>:root{--md-text-font-family:"Roboto";--md-code-font-family:"Roboto Mono"}</style></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=black data-md-color-accent=black> <script>function __prefix(e){return new URL("../../..",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#nine-chapter-dynamic-programming class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../../.. title=RUIHAN.ORG class="md-header__button md-logo" aria-label=RUIHAN.ORG data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> RUIHAN.ORG </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Nine Chapter Dynamic Programming </span> </div> </div> </div> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query data-md-state=active required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </label> <button type=reset class="md-search__icon md-icon" aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg> </button> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/iurnah/ruihan.org title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> iurnah/ruihan.org </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class="md-tabs__inner md-grid"> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../../.. class=md-tabs__link> Home </a> </li> <li class=md-tabs__item> <a href=../../../books/ class=md-tabs__link> Books </a> </li> <li class=md-tabs__item> <a href=../../ class="md-tabs__link md-tabs__link--active"> Courses </a> </li> <li class=md-tabs__item> <a href=../../../leetcode/ class=md-tabs__link> Leetcode </a> </li> <li class=md-tabs__item> <a href=../../../research/ class=md-tabs__link> Research </a> </li> <li class=md-tabs__item> <a href=../../../seedlabs/ class=md-tabs__link> SEED Labs </a> </li> <li class=md-tabs__item> <a href=../../../system-design/ class=md-tabs__link> System Design </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../../.. title=RUIHAN.ORG class="md-nav__button md-logo" aria-label=RUIHAN.ORG data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg> </a> RUIHAN.ORG </label> <div class=md-nav__source> <a href=https://github.com/iurnah/ruihan.org title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> iurnah/ruihan.org </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../.. class=md-nav__link> Home </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2 type=checkbox id=__nav_2> <label class=md-nav__link for=__nav_2> Books <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Books data-md-level=1> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> Books </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../books/ class=md-nav__link> Index </a> </li> <li class=md-nav__item> <a href=../../../books/accelerated-cpp/notes/ class=md-nav__link> Accelerated C++ </a> </li> <li class=md-nav__item> <a href=../../../books/mining-massive-datasets/notes/ class=md-nav__link> Mining Massive Datasets </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3 type=checkbox id=__nav_3 checked> <label class=md-nav__link for=__nav_3> Courses <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Courses data-md-level=1> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Courses </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../ class=md-nav__link> Index </a> </li> <li class=md-nav__item> <a href=../../machine-learning-coursera/notes/ class=md-nav__link> Machine Learning (Coursera) </a> </li> <li class=md-nav__item> <a href=../../cs224n/lec-notes/ class=md-nav__link> CS224N Lecture Notes </a> </li> <li class=md-nav__item> <a href=../../cs224n/write-up/ class=md-nav__link> CS224N Write-up </a> </li> <li class=md-nav__item> <a href=../../coursera-dl4-cnn/notes/ class=md-nav__link> Convolutional Neural Networks </a> </li> <li class=md-nav__item> <a href=../../mining-massive-datasets/notes/ class=md-nav__link> Mining Massive Data Sets </a> </li> <li class=md-nav__item> <a href=../../6.431-probability/notes/ class=md-nav__link> 6.431 Probability </a> </li> <li class=md-nav__item> <a href=../../learning-from-data/notes.md class=md-nav__link> Learning From Data </a> </li> <li class=md-nav__item> <a href=../../9chap-algorithms/notes/ class=md-nav__link> Nine Chapter Algorithms </a> </li> <li class=md-nav__item> <a href=../../9chap-system-design/notes/ class=md-nav__link> Nine Chapter System Design </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" data-md-toggle=toc type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> Nine Chapter Dynamic Programming <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> Nine Chapter Dynamic Programming </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#lecture-1-introduction-to-dynamic-programming class=md-nav__link> Lecture 1 Introduction to Dynamic Programming </a> <nav class=md-nav aria-label="Lecture 1 Introduction to Dynamic Programming"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#coin-change class=md-nav__link> Coin Change </a> </li> <li class=md-nav__item> <a href=#unique-paths class=md-nav__link> Unique Paths </a> </li> <li class=md-nav__item> <a href=#jump-game class=md-nav__link> Jump Game </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#lecture-2-dynamic-programming-on-coordinates class=md-nav__link> Lecture 2 Dynamic Programming on Coordinates </a> <nav class=md-nav aria-label="Lecture 2 Dynamic Programming on Coordinates"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_1 class=md-nav__link> 坐标型动态规划 </a> </li> <li class=md-nav__item> <a href=#unique-paths-ii class=md-nav__link> Unique Paths II </a> </li> <li class=md-nav__item> <a href=#paint-house class=md-nav__link> Paint House </a> </li> <li class=md-nav__item> <a href=#decode-ways class=md-nav__link> Decode Ways </a> </li> <li class=md-nav__item> <a href=#longest-increasing-continuous-subsequence class=md-nav__link> Longest Increasing Continuous Subsequence </a> </li> <li class=md-nav__item> <a href=#minimum-path-sum class=md-nav__link> Minimum Path Sum </a> </li> <li class=md-nav__item> <a href=#bomb-enemy class=md-nav__link> Bomb Enemy </a> </li> <li class=md-nav__item> <a href=#counting-bits class=md-nav__link> Counting Bits </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#lecture-3-dynamic-programming-on-sequences class=md-nav__link> Lecture 3 Dynamic Programming on Sequences </a> <nav class=md-nav aria-label="Lecture 3 Dynamic Programming on Sequences"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_2 class=md-nav__link> 序列型动态规划 </a> </li> <li class=md-nav__item> <a href=#paint-house-ii class=md-nav__link> Paint House II </a> </li> <li class=md-nav__item> <a href=#house-robber class=md-nav__link> House Robber </a> </li> <li class=md-nav__item> <a href=#house-robber-ii class=md-nav__link> House Robber II </a> </li> <li class=md-nav__item> <a href=#best-time-to-buy-and-sell-stock class=md-nav__link> Best Time to Buy and Sell Stock </a> </li> <li class=md-nav__item> <a href=#best-time-to-buy-and-sell-stock-ii class=md-nav__link> Best Time to Buy and Sell Stock II </a> </li> <li class=md-nav__item> <a href=#best-time-to-buy-and-sell-stock-iii class=md-nav__link> Best Time to Buy and Sell Stock III </a> </li> <li class=md-nav__item> <a href=#best-time-to-buy-and-sell-stock-iv class=md-nav__link> Best Time to Buy and Sell Stock IV </a> </li> <li class=md-nav__item> <a href=#longest-increasing-subsequence class=md-nav__link> Longest Increasing Subsequence </a> </li> <li class=md-nav__item> <a href=#russian-doll-envelopes class=md-nav__link> Russian Doll Envelopes </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#lecture-4 class=md-nav__link> Lecture 4 </a> <nav class=md-nav aria-label="Lecture 4"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#perfect-squares class=md-nav__link> Perfect Squares </a> </li> <li class=md-nav__item> <a href=#palindrome-partitioning-ii class=md-nav__link> Palindrome Partitioning II </a> </li> <li class=md-nav__item> <a href=#copy-books class=md-nav__link> Copy Books </a> </li> <li class=md-nav__item> <a href=#coins-in-a-line class=md-nav__link> Coins in A Line </a> </li> <li class=md-nav__item> <a href=#backpack class=md-nav__link> Backpack </a> </li> <li class=md-nav__item> <a href=#backpack-v class=md-nav__link> Backpack V </a> </li> <li class=md-nav__item> <a href=#backpack-vi class=md-nav__link> Backpack VI </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#summary-dynamic-programming-types class=md-nav__link> Summary Dynamic Programming Types </a> <nav class=md-nav aria-label="Summary Dynamic Programming Types"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_3 class=md-nav__link> 划分型动态规划特点 </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#lecture-5 class=md-nav__link> Lecture 5 </a> <nav class=md-nav aria-label="Lecture 5"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#backpack-ii class=md-nav__link> Backpack II </a> </li> <li class=md-nav__item> <a href=#backpack-iii class=md-nav__link> Backpack III </a> </li> <li class=md-nav__item> <a href=#coins-in-a-line-iii class=md-nav__link> Coins in A Line III </a> </li> <li class=md-nav__item> <a href=#longest-palindromic-subsequence class=md-nav__link> Longest Palindromic Subsequence </a> </li> <li class=md-nav__item> <a href=#burst-balloons class=md-nav__link> Burst Balloons </a> </li> <li class=md-nav__item> <a href=#scramble-string class=md-nav__link> Scramble String </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#_4 class=md-nav__link> 区间型动态规划总结 </a> </li> <li class=md-nav__item> <a href=#lecture-6 class=md-nav__link> Lecture 6 </a> <nav class=md-nav aria-label="Lecture 6"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#longest-common-subsequence class=md-nav__link> Longest Common Subsequence </a> </li> <li class=md-nav__item> <a href=#interleaving-string class=md-nav__link> Interleaving String </a> </li> <li class=md-nav__item> <a href=#edit-distance class=md-nav__link> Edit Distance </a> </li> <li class=md-nav__item> <a href=#distinct-subsequence class=md-nav__link> Distinct Subsequence </a> </li> <li class=md-nav__item> <a href=#regular-expression-matching class=md-nav__link> Regular Expression Matching </a> </li> <li class=md-nav__item> <a href=#wildcard-matching class=md-nav__link> Wildcard Matching </a> </li> <li class=md-nav__item> <a href=#ones-and-zeroes class=md-nav__link> Ones and Zeroes </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#_5 class=md-nav__link> 双序列型动态规划总结 </a> </li> <li class=md-nav__item> <a href=#lecture-7 class=md-nav__link> Lecture 7 </a> <nav class=md-nav aria-label="Lecture 7"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#minimum-adjustment-cost class=md-nav__link> Minimum Adjustment Cost </a> </li> <li class=md-nav__item> <a href=#k-sum class=md-nav__link> K Sum </a> </li> <li class=md-nav__item> <a href=#longest-increasing-subsequence_1 class=md-nav__link> Longest Increasing Subsequence </a> </li> <li class=md-nav__item> <a href=#k-edit-distance class=md-nav__link> K Edit Distance </a> </li> <li class=md-nav__item> <a href=#frog-jump class=md-nav__link> Frog Jump </a> </li> <li class=md-nav__item> <a href=#221-maximal-square class=md-nav__link> 221. Maximal Square </a> </li> <li class=md-nav__item> <a href=#85-maximal-rectangle class=md-nav__link> 85. Maximal Rectangle </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../func-prog-in-scala/notes/ class=md-nav__link> Functional Programming Principles in Scala </a> </li> <li class=md-nav__item> <a href=../../applied-scrum-for-agile/notes/ class=md-nav__link> Applied Scrum for Agile Project Management </a> </li> <li class=md-nav__item> <a href=../../concurrent-prog-java/notes/ class=md-nav__link> Concurrent Programming in Java </a> </li> <li class=md-nav__item> <a href=../../java-collections/notes/ class=md-nav__link> Java Collections </a> </li> <li class=md-nav__item> <a href=../../leadership-courses/interpersonal-communication-rice/ class=md-nav__link> Interpersonal Communication Rice </a> </li> <li class=md-nav__item> <a href=../../leadership-courses/business-writing-colorado/ class=md-nav__link> Business Writing Colorado </a> </li> <li class=md-nav__item> <a href=../../leadership-courses/interpersonal-communication/ class=md-nav__link> Interpersonal Communication </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4 type=checkbox id=__nav_4> <label class=md-nav__link for=__nav_4> Leetcode <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Leetcode data-md-level=1> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> Leetcode </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../leetcode/ class=md-nav__link> Index </a> </li> <li class=md-nav__item> <a href=../../../leetcode/favorite/notes/ class=md-nav__link> Favorite </a> </li> <li class=md-nav__item> <a href=../../../leetcode/array/notes/ class=md-nav__link> Array </a> </li> <li class=md-nav__item> <a href=../../../leetcode/backtracking/notes/ class=md-nav__link> Backtracking </a> </li> <li class=md-nav__item> <a href=../../../leetcode/binary-search/notes/ class=md-nav__link> Binary Search </a> </li> <li class=md-nav__item> <a href=../../../leetcode/binary-indexed-tree/notes/ class=md-nav__link> Binary Indexed Tree </a> </li> <li class=md-nav__item> <a href=../../../leetcode/breadth-first-search/notes/ class=md-nav__link> Breadth-First Search (BFS) </a> </li> <li class=md-nav__item> <a href=../../../leetcode/depth-first-search/notes/ class=md-nav__link> Depth-First Search (DFS) </a> </li> <li class=md-nav__item> <a href=../../../leetcode/design/notes/ class=md-nav__link> Design Problems </a> </li> <li class=md-nav__item> <a href=../../../leetcode/dynamic-programming/notes/ class=md-nav__link> Dynamic Programming </a> </li> <li class=md-nav__item> <a href=../../../leetcode/graph/notes/ class=md-nav__link> Graph </a> </li> <li class=md-nav__item> <a href=../../../leetcode/hash/notes/ class=md-nav__link> Hash </a> </li> <li class=md-nav__item> <a href=../../../leetcode/heap/notes/ class=md-nav__link> Heap </a> </li> <li class=md-nav__item> <a href=../../../leetcode/interval/notes/ class=md-nav__link> Interval </a> </li> <li class=md-nav__item> <a href=../../../leetcode/linked-list/notes/ class=md-nav__link> Linked List </a> </li> <li class=md-nav__item> <a href=../../../leetcode/math/notes/ class=md-nav__link> Math </a> </li> <li class=md-nav__item> <a href=../../../leetcode/reservoir-sampling/notes/ class=md-nav__link> Reservoir Sampling </a> </li> <li class=md-nav__item> <a href=../../../leetcode/stack/notes/ class=md-nav__link> Stack </a> </li> <li class=md-nav__item> <a href=../../../leetcode/string/notes/ class=md-nav__link> String </a> </li> <li class=md-nav__item> <a href=../../../leetcode/sliding-window/notes/ class=md-nav__link> Sliding Window </a> </li> <li class=md-nav__item> <a href=../../../leetcode/topological-sort/notes/ class=md-nav__link> Topological Sort </a> </li> <li class=md-nav__item> <a href=../../../leetcode/two-pointers/notes/ class=md-nav__link> Two Pointers </a> </li> <li class=md-nav__item> <a href=../../../leetcode/tree/notes/ class=md-nav__link> Tree </a> </li> <li class=md-nav__item> <a href=../../../leetcode/trie/notes/ class=md-nav__link> Trie </a> </li> <li class=md-nav__item> <a href=../../../leetcode/union-find/notes/ class=md-nav__link> Union Find </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_5 type=checkbox id=__nav_5> <label class=md-nav__link for=__nav_5> Research <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Research data-md-level=1> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> Research </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../research/ class=md-nav__link> Index </a> </li> <li class=md-nav__item> <a href=../../../research/paper-reading/notes/ class=md-nav__link> Paper Reading </a> </li> <li class=md-nav__item> <a href=../../../research/coalition-game/notes/ class=md-nav__link> Coalition Game </a> </li> <li class=md-nav__item> <a href=../../../research/contextual-bandit/notes/ class=md-nav__link> Contextual Multi-Armed Bandit </a> </li> <li class=md-nav__item> <a href=../../../research/tfidf-score/notes/ class=md-nav__link> TF-IDF for Information Retrieval </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_6 type=checkbox id=__nav_6> <label class=md-nav__link for=__nav_6> SEED Labs <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="SEED Labs" data-md-level=1> <label class=md-nav__title for=__nav_6> <span class="md-nav__icon md-icon"></span> SEED Labs </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../seedlabs/ class=md-nav__link> Index </a> </li> <li class=md-nav__item> <a href=../../../seedlabs/applied-crypto/notes/ class=md-nav__link> Applied Cryptograph Notes </a> </li> <li class=md-nav__item> <a href=../../../seedlabs/public-key-cryptography-and-pki/notes/ class=md-nav__link> Public Key Cryptography and PKI </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_7 type=checkbox id=__nav_7> <label class=md-nav__link for=__nav_7> System Design <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="System Design" data-md-level=1> <label class=md-nav__title for=__nav_7> <span class="md-nav__icon md-icon"></span> System Design </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../system-design/ class=md-nav__link> Index </a> </li> <li class=md-nav__item> <a href=../../../system-design/browser/notes.md class=md-nav__link> How Browser Works </a> </li> <li class=md-nav__item> <a href=../../../system-design/concurrency/notes/ class=md-nav__link> Concurrency and Synchronization </a> </li> <li class=md-nav__item> <a href=../../../system-design/concepts/notes/ class=md-nav__link> Distributed System Concepts </a> </li> <li class=md-nav__item> <a href=../../../system-design/patterns/notes/ class=md-nav__link> Design Patterns </a> </li> <li class=md-nav__item> <a href=../../../system-design/problems/crawler/notes/ class=md-nav__link> Design Crawler </a> </li> <li class=md-nav__item> <a href=../../../system-design/problems/tinyurl/notes/ class=md-nav__link> Design TinyUrl </a> </li> <li class=md-nav__item> <a href=../../../system-design/problems/twitter/notes/ class=md-nav__link> Design Twitter </a> </li> <li class=md-nav__item> <a href=../../../system-design/problems/scheduler/notes/ class=md-nav__link> Deisgn Scheduler </a> </li> <li class=md-nav__item> <a href=../../../system-design/problems/ticketmaster/notes/ class=md-nav__link> Design Ticketmaster </a> </li> <li class=md-nav__item> <a href=../../../system-design/problems/messager/notes/ class=md-nav__link> Design Messager </a> </li> <li class=md-nav__item> <a href=../../../system-design/problems/payment/notes/ class=md-nav__link> Design Payment System </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#lecture-1-introduction-to-dynamic-programming class=md-nav__link> Lecture 1 Introduction to Dynamic Programming </a> <nav class=md-nav aria-label="Lecture 1 Introduction to Dynamic Programming"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#coin-change class=md-nav__link> Coin Change </a> </li> <li class=md-nav__item> <a href=#unique-paths class=md-nav__link> Unique Paths </a> </li> <li class=md-nav__item> <a href=#jump-game class=md-nav__link> Jump Game </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#lecture-2-dynamic-programming-on-coordinates class=md-nav__link> Lecture 2 Dynamic Programming on Coordinates </a> <nav class=md-nav aria-label="Lecture 2 Dynamic Programming on Coordinates"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_1 class=md-nav__link> 坐标型动态规划 </a> </li> <li class=md-nav__item> <a href=#unique-paths-ii class=md-nav__link> Unique Paths II </a> </li> <li class=md-nav__item> <a href=#paint-house class=md-nav__link> Paint House </a> </li> <li class=md-nav__item> <a href=#decode-ways class=md-nav__link> Decode Ways </a> </li> <li class=md-nav__item> <a href=#longest-increasing-continuous-subsequence class=md-nav__link> Longest Increasing Continuous Subsequence </a> </li> <li class=md-nav__item> <a href=#minimum-path-sum class=md-nav__link> Minimum Path Sum </a> </li> <li class=md-nav__item> <a href=#bomb-enemy class=md-nav__link> Bomb Enemy </a> </li> <li class=md-nav__item> <a href=#counting-bits class=md-nav__link> Counting Bits </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#lecture-3-dynamic-programming-on-sequences class=md-nav__link> Lecture 3 Dynamic Programming on Sequences </a> <nav class=md-nav aria-label="Lecture 3 Dynamic Programming on Sequences"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_2 class=md-nav__link> 序列型动态规划 </a> </li> <li class=md-nav__item> <a href=#paint-house-ii class=md-nav__link> Paint House II </a> </li> <li class=md-nav__item> <a href=#house-robber class=md-nav__link> House Robber </a> </li> <li class=md-nav__item> <a href=#house-robber-ii class=md-nav__link> House Robber II </a> </li> <li class=md-nav__item> <a href=#best-time-to-buy-and-sell-stock class=md-nav__link> Best Time to Buy and Sell Stock </a> </li> <li class=md-nav__item> <a href=#best-time-to-buy-and-sell-stock-ii class=md-nav__link> Best Time to Buy and Sell Stock II </a> </li> <li class=md-nav__item> <a href=#best-time-to-buy-and-sell-stock-iii class=md-nav__link> Best Time to Buy and Sell Stock III </a> </li> <li class=md-nav__item> <a href=#best-time-to-buy-and-sell-stock-iv class=md-nav__link> Best Time to Buy and Sell Stock IV </a> </li> <li class=md-nav__item> <a href=#longest-increasing-subsequence class=md-nav__link> Longest Increasing Subsequence </a> </li> <li class=md-nav__item> <a href=#russian-doll-envelopes class=md-nav__link> Russian Doll Envelopes </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#lecture-4 class=md-nav__link> Lecture 4 </a> <nav class=md-nav aria-label="Lecture 4"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#perfect-squares class=md-nav__link> Perfect Squares </a> </li> <li class=md-nav__item> <a href=#palindrome-partitioning-ii class=md-nav__link> Palindrome Partitioning II </a> </li> <li class=md-nav__item> <a href=#copy-books class=md-nav__link> Copy Books </a> </li> <li class=md-nav__item> <a href=#coins-in-a-line class=md-nav__link> Coins in A Line </a> </li> <li class=md-nav__item> <a href=#backpack class=md-nav__link> Backpack </a> </li> <li class=md-nav__item> <a href=#backpack-v class=md-nav__link> Backpack V </a> </li> <li class=md-nav__item> <a href=#backpack-vi class=md-nav__link> Backpack VI </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#summary-dynamic-programming-types class=md-nav__link> Summary Dynamic Programming Types </a> <nav class=md-nav aria-label="Summary Dynamic Programming Types"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_3 class=md-nav__link> 划分型动态规划特点 </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#lecture-5 class=md-nav__link> Lecture 5 </a> <nav class=md-nav aria-label="Lecture 5"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#backpack-ii class=md-nav__link> Backpack II </a> </li> <li class=md-nav__item> <a href=#backpack-iii class=md-nav__link> Backpack III </a> </li> <li class=md-nav__item> <a href=#coins-in-a-line-iii class=md-nav__link> Coins in A Line III </a> </li> <li class=md-nav__item> <a href=#longest-palindromic-subsequence class=md-nav__link> Longest Palindromic Subsequence </a> </li> <li class=md-nav__item> <a href=#burst-balloons class=md-nav__link> Burst Balloons </a> </li> <li class=md-nav__item> <a href=#scramble-string class=md-nav__link> Scramble String </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#_4 class=md-nav__link> 区间型动态规划总结 </a> </li> <li class=md-nav__item> <a href=#lecture-6 class=md-nav__link> Lecture 6 </a> <nav class=md-nav aria-label="Lecture 6"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#longest-common-subsequence class=md-nav__link> Longest Common Subsequence </a> </li> <li class=md-nav__item> <a href=#interleaving-string class=md-nav__link> Interleaving String </a> </li> <li class=md-nav__item> <a href=#edit-distance class=md-nav__link> Edit Distance </a> </li> <li class=md-nav__item> <a href=#distinct-subsequence class=md-nav__link> Distinct Subsequence </a> </li> <li class=md-nav__item> <a href=#regular-expression-matching class=md-nav__link> Regular Expression Matching </a> </li> <li class=md-nav__item> <a href=#wildcard-matching class=md-nav__link> Wildcard Matching </a> </li> <li class=md-nav__item> <a href=#ones-and-zeroes class=md-nav__link> Ones and Zeroes </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#_5 class=md-nav__link> 双序列型动态规划总结 </a> </li> <li class=md-nav__item> <a href=#lecture-7 class=md-nav__link> Lecture 7 </a> <nav class=md-nav aria-label="Lecture 7"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#minimum-adjustment-cost class=md-nav__link> Minimum Adjustment Cost </a> </li> <li class=md-nav__item> <a href=#k-sum class=md-nav__link> K Sum </a> </li> <li class=md-nav__item> <a href=#longest-increasing-subsequence_1 class=md-nav__link> Longest Increasing Subsequence </a> </li> <li class=md-nav__item> <a href=#k-edit-distance class=md-nav__link> K Edit Distance </a> </li> <li class=md-nav__item> <a href=#frog-jump class=md-nav__link> Frog Jump </a> </li> <li class=md-nav__item> <a href=#221-maximal-square class=md-nav__link> 221. Maximal Square </a> </li> <li class=md-nav__item> <a href=#85-maximal-rectangle class=md-nav__link> 85. Maximal Rectangle </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1 id=nine-chapter-dynamic-programming>Nine Chapter Dynamic Programming<a class=headerlink href=#nine-chapter-dynamic-programming title="Permanent link">&para;</a></h1> <ul> <li><a href=https://wiki.rui-han.com/index.php/Private:Courses/Languages_and_Algorithms/Nine_Chapter_Dynamic_Programming_Course>Nine Chapter Dynamic Programming Course</a></li> </ul> <h2 id=lecture-1-introduction-to-dynamic-programming>Lecture 1 Introduction to Dynamic Programming<a class=headerlink href=#lecture-1-introduction-to-dynamic-programming title="Permanent link">&para;</a></h2> <table> <thead> <tr> <th>Problem</th> <th>Category</th> </tr> </thead> <tbody> <tr> <td><a href=#coin-change>Coin Change</a></td> <td></td> </tr> <tr> <td><a href=#unique-paths>Unique Paths</a></td> <td>coordinate</td> </tr> <tr> <td><a href=#jump-game>Jump Game</a></td> <td></td> </tr> </tbody> </table> <ol> <li>动态规划题目特点:<ol> <li>计数<ul> <li>有多少种方式走到右下角</li> <li>有多少种方法选出k个数使得和是Sum</li> </ul> </li> <li>求最大最小值<ul> <li>从左上角走到右下角路径的最大数字和</li> <li>最长上升子序列长度</li> </ul> </li> <li>求存在性<ul> <li>取石子游戏，先手是否必胜</li> <li>能不能选出k个数使得和是Sum</li> </ul> </li> </ol> </li> <li>状态是动态规划定海神针，确定状态需要两个基本意识：<ul> <li>最后一步</li> <li>子问题</li> </ul> </li> </ol> <div class="admonition note"> <p class=admonition-title>Four Ingredients for DP</p> <ol> <li>What's the state?<ul> <li>start with the last step for the optimal solution</li> <li>decompose into subproblems</li> </ul> </li> <li>Write the state transition?<ul> <li>find the transition from subproblem relations</li> </ul> </li> <li>Initial value and boundary conditions<ul> <li>need to think careful in this step</li> </ul> </li> <li>How can you compute the states?<ul> <li>iteration directio</li> <li>forward computing</li> </ul> </li> </ol> </div> <h3 id=coin-change>Coin Change<a class=headerlink href=#coin-change title="Permanent link">&para;</a></h3> <ul> <li>Imagine the last coin you can use and the minimum solution to found can be represented as <code>f[amount]</code>. It can be solved by solving the smaller problem first. we have <code>f[amount] = min(f[amount], f[amount - last_coin] + 1)</code>.</li> <li>The problem is we don't know which coin will be selected for the last one to reach the solution, so we have to iterate through the coins to check every one of them. We expecting to see two <code>for</code> loops in our code.</li> <li>DP 4 ingredient:<ol> <li>size of the dp array <code>f[amount + 1]</code></li> <li>initial state: <code>f[0] = 0</code>, amount 0 can use 0 coin.</li> <li>subproblem: <code>f[amount] = min(f[amount], f[amount - last\_coin] + 1)</code>.</li> <li>results: <code>f[amount]</code></li> </ol> </li> </ul> <div class=tabbed-set data-tabs=1:2><input checked=checked id=__tabbed_1_1 name=__tabbed_1 type=radio><label for=__tabbed_1_1>DP solution</label><div class=tabbed-content> <div class=highlight><pre><span></span><code><span class=k>class</span> <span class=nc>Solution</span> <span class=p>{</span>
<span class=k>public</span><span class=o>:</span>
    <span class=kt>int</span> <span class=n>coinChange</span><span class=p>(</span><span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;&amp;</span> <span class=n>coins</span> <span class=p>,</span> <span class=kt>int</span> <span class=n>amount</span><span class=p>)</span> <span class=p>{</span>
        <span class=kt>int</span> <span class=n>n</span> <span class=o>=</span> <span class=n>coins</span><span class=p>.</span><span class=n>size</span><span class=p>();</span>
        <span class=kt>int</span> <span class=n>f</span><span class=p>[</span><span class=n>amount</span> <span class=o>+</span> <span class=mi>1</span><span class=p>];</span>
        <span class=n>f</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>

        <span class=cm>/* calculate the f[1], f[2], ... f[amount] */</span>
        <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;=</span> <span class=n>amount</span><span class=p>;</span> <span class=n>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
            <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>]</span> <span class=o>=</span> <span class=n>INT_MAX</span><span class=p>;</span>  <span class=cm>/* small trick, set to invalid first */</span>
            <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>j</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>j</span> <span class=o>&lt;</span> <span class=n>n</span><span class=p>;</span> <span class=n>j</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span> <span class=cm>/* update states */</span>
                <span class=cm>/* f[i] can select coins[j] &amp;&amp; f[i - coins[j]] is possible &amp;&amp; coins[j] is last coin */</span>
                <span class=k>if</span> <span class=p>(</span><span class=n>i</span> <span class=o>&gt;=</span> <span class=n>coins</span><span class=p>[</span><span class=n>j</span><span class=p>]</span> <span class=o>&amp;&amp;</span> <span class=n>f</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=n>coins</span><span class=p>[</span><span class=n>j</span><span class=p>]]</span> <span class=o>!=</span> <span class=n>INT_MAX</span> <span class=o>&amp;&amp;</span> <span class=n>f</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=n>coins</span><span class=p>[</span><span class=n>j</span><span class=p>]]</span> <span class=o>+</span> <span class=mi>1</span> <span class=o>&lt;</span> <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>])</span> <span class=p>{</span>
                    <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>]</span> <span class=o>=</span> <span class=n>f</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=n>coins</span><span class=p>[</span><span class=n>j</span><span class=p>]]</span> <span class=o>+</span> <span class=mi>1</span><span class=p>;</span>
                <span class=p>}</span>
            <span class=p>}</span>
        <span class=p>}</span>

        <span class=k>return</span> <span class=n>f</span><span class=p>[</span><span class=n>amount</span><span class=p>]</span> <span class=o>==</span> <span class=n>INT_MAX</span> <span class=o>?</span> <span class=mi>-1</span> <span class=o>:</span> <span class=n>f</span><span class=p>[</span><span class=n>amount</span><span class=p>];</span>
    <span class=p>}</span>
<span class=p>};</span>
</code></pre></div> </div> <input id=__tabbed_1_2 name=__tabbed_1 type=radio><label for=__tabbed_1_2>Alternative Solution</label><div class=tabbed-content> <div class=highlight><pre><span></span><code><span class=k>class</span> <span class=nc>Solution</span> <span class=p>{</span>
<span class=k>public</span><span class=o>:</span>
    <span class=kt>int</span> <span class=n>coinChange</span><span class=p>(</span><span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;&amp;</span> <span class=n>coins</span><span class=p>,</span> <span class=kt>int</span> <span class=n>amount</span><span class=p>)</span> <span class=p>{</span>
        <span class=kt>int</span> <span class=n>n</span> <span class=o>=</span> <span class=n>coins</span><span class=p>.</span><span class=n>size</span><span class=p>();</span>
        <span class=kt>int</span> <span class=n>f</span><span class=p>[</span><span class=n>amount</span><span class=o>+</span><span class=mi>1</span><span class=p>];</span>
        <span class=c1>// f[i] represent the minimum counts to make up i amount</span>
        <span class=c1>// use INT_MAX to represent impossible case.</span>
        <span class=n>f</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
        <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;=</span> <span class=n>amount</span><span class=p>;</span> <span class=n>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
            <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>]</span> <span class=o>=</span> <span class=n>INT_MAX</span><span class=p>;</span>
            <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>j</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>j</span> <span class=o>&lt;</span> <span class=n>n</span><span class=p>;</span> <span class=n>j</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
                <span class=k>if</span> <span class=p>(</span><span class=n>i</span> <span class=o>&gt;=</span> <span class=n>coins</span><span class=p>[</span><span class=n>j</span><span class=p>]</span> <span class=o>&amp;&amp;</span> <span class=n>f</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=n>coins</span><span class=p>[</span><span class=n>j</span><span class=p>]]</span> <span class=o>!=</span> <span class=n>INT_MAX</span><span class=p>)</span> <span class=p>{</span>
                    <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>]</span> <span class=o>=</span> <span class=n>min</span><span class=p>(</span><span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>],</span> <span class=n>f</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=n>coins</span><span class=p>[</span><span class=n>j</span><span class=p>]]</span> <span class=o>+</span> <span class=mi>1</span><span class=p>);</span>
                <span class=p>}</span>
            <span class=p>}</span>
        <span class=p>}</span>

        <span class=k>return</span> <span class=n>f</span><span class=p>[</span><span class=n>amount</span><span class=p>]</span> <span class=o>==</span> <span class=n>INT_MAX</span> <span class=o>?</span> <span class=mi>-1</span> <span class=o>:</span> <span class=n>f</span><span class=p>[</span><span class=n>amount</span><span class=p>];</span>
    <span class=p>}</span>
<span class=p>};</span>
</code></pre></div> </div> </div> <h3 id=unique-paths>Unique Paths<a class=headerlink href=#unique-paths title="Permanent link">&para;</a></h3> <ul> <li>Solving smaller problem first than by accumulating the results from the smaller problems, we can solve the overall problem.</li> <li>Use a 2-d array to record the result the smaller problem, we know for the position <code>f[i][j] = f[i - 1][j] + f[i][j - 1]</code>, which means the summation of number of path from above and from left.</li> <li>The initial state is the first row and the first column are all equal to <code>1</code>.</li> </ul> <div class=highlight><pre><span></span><code><span class=k>class</span> <span class=nc>Solution</span> <span class=p>{</span>
<span class=k>public</span><span class=o>:</span>
    <span class=cm>/**</span>
<span class=cm>     * @param n, m: positive integer (1 &lt;= n ,m &lt;= 100)</span>
<span class=cm>     * @return an integer</span>
<span class=cm>     */</span>
    <span class=kt>int</span> <span class=n>uniquePaths</span><span class=p>(</span><span class=kt>int</span> <span class=n>m</span><span class=p>,</span> <span class=kt>int</span> <span class=n>n</span><span class=p>)</span> <span class=p>{</span>
        <span class=kt>int</span> <span class=n>f</span><span class=p>[</span><span class=n>m</span><span class=p>][</span><span class=n>n</span><span class=p>]</span> <span class=o>=</span> <span class=p>{</span><span class=mi>0</span><span class=p>};</span>

        <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>m</span><span class=p>;</span> <span class=n>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
            <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>j</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>j</span> <span class=o>&lt;</span> <span class=n>n</span><span class=p>;</span> <span class=n>j</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
                <span class=k>if</span> <span class=p>(</span><span class=n>i</span> <span class=o>==</span> <span class=mi>0</span> <span class=o>||</span> <span class=n>j</span> <span class=o>==</span> <span class=mi>0</span><span class=p>)</span> <span class=p>{</span>
                    <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span>
                <span class=p>}</span>

                <span class=k>if</span> <span class=p>(</span><span class=n>i</span> <span class=o>&gt;</span> <span class=mi>0</span> <span class=o>&amp;&amp;</span> <span class=n>j</span> <span class=o>&gt;</span> <span class=mi>0</span><span class=p>)</span> <span class=p>{</span>
                    <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>=</span> <span class=n>f</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=mi>1</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>+</span> <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span> <span class=o>-</span> <span class=mi>1</span><span class=p>];</span>
                <span class=p>}</span>
            <span class=p>}</span>
        <span class=p>}</span>

        <span class=k>return</span> <span class=n>f</span><span class=p>[</span><span class=n>m</span> <span class=o>-</span> <span class=mi>1</span><span class=p>][</span><span class=n>n</span> <span class=o>-</span> <span class=mi>1</span><span class=p>];</span>

    <span class=p>}</span>
<span class=p>};</span>
</code></pre></div> <h3 id=jump-game>Jump Game<a class=headerlink href=#jump-game title="Permanent link">&para;</a></h3> <ul> <li>Notice the problem statement "Each element in the array represents your maximum jump length at that position."</li> </ul> <p>Solution 1 DP</p> <ul> <li>The problem have characteristics of the dynamic problem, that is it can be decomposed into smaller problem, the large problem can be solved using the result from solving smaller problems.</li> <li>We use a dp array <code>f[i]</code> to store whether it can jump from previous position to position <code>i</code>. if <code>nums[i] + i &gt;= j</code>, it can also jump to position <code>j</code>.</li> <li>Looks like we are going to have a nested loop. the outer loop iterate to check whether can jump to each step <code>j</code>. inner loop check each step before <code>j</code>, namely the smaller size problem.</li> </ul> <div class=highlight><pre><span></span><code><span class=k>class</span> <span class=nc>Solution</span> <span class=p>{</span>
<span class=k>public</span><span class=o>:</span>
    <span class=kt>bool</span> <span class=n>canJump</span><span class=p>(</span><span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;&amp;</span> <span class=n>nums</span><span class=p>)</span> <span class=p>{</span>
        <span class=kt>int</span> <span class=n>n</span> <span class=o>=</span> <span class=n>nums</span><span class=p>.</span><span class=n>size</span><span class=p>();</span>
        <span class=k>if</span> <span class=p>(</span><span class=n>n</span> <span class=o>==</span> <span class=mi>0</span><span class=p>)</span>
            <span class=k>return</span> <span class=nb>true</span><span class=p>;</span>
        <span class=kt>int</span> <span class=n>f</span><span class=p>[</span><span class=n>n</span><span class=p>];</span>
        <span class=n>f</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span> <span class=o>=</span> <span class=nb>true</span><span class=p>;</span> <span class=cm>/* initialize */</span>

        <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>j</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span> <span class=n>j</span> <span class=o>&lt;</span> <span class=n>n</span><span class=p>;</span> <span class=n>j</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
            <span class=n>f</span><span class=p>[</span><span class=n>j</span><span class=p>]</span> <span class=o>=</span> <span class=nb>false</span><span class=p>;</span>
            <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>j</span><span class=p>;</span> <span class=n>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
                <span class=k>if</span> <span class=p>(</span><span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>]</span> <span class=o>&amp;&amp;</span> <span class=n>nums</span><span class=p>[</span><span class=n>i</span><span class=p>]</span> <span class=o>+</span> <span class=n>i</span> <span class=o>&gt;=</span> <span class=n>j</span><span class=p>)</span> <span class=p>{</span>
                    <span class=n>f</span><span class=p>[</span><span class=n>j</span><span class=p>]</span> <span class=o>=</span> <span class=nb>true</span><span class=p>;</span>
                    <span class=k>break</span><span class=p>;</span>
                <span class=p>}</span>
            <span class=p>}</span>
        <span class=p>}</span>

        <span class=k>return</span> <span class=n>f</span><span class=p>[</span><span class=n>n</span> <span class=o>-</span> <span class=mi>1</span><span class=p>];</span>
    <span class=p>}</span>
<span class=p>};</span>
</code></pre></div> <p>Solution 2 Greedy</p> <ul> <li>Use a variable <code>cur_max</code> to maintain the possible maximum jump position, if the current position is less than the maximum possible jump, return flase.</li> </ul> <div class=highlight><pre><span></span><code><span class=k>class</span> <span class=nc>Solution</span> <span class=p>{</span>
<span class=k>public</span><span class=o>:</span>
    <span class=kt>bool</span> <span class=n>canJump</span><span class=p>(</span><span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;&amp;</span> <span class=n>nums</span><span class=p>)</span> <span class=p>{</span>
        <span class=kt>int</span> <span class=n>n</span> <span class=o>=</span> <span class=n>nums</span><span class=p>.</span><span class=n>size</span><span class=p>();</span>
        <span class=k>if</span> <span class=p>(</span><span class=n>n</span> <span class=o>==</span> <span class=mi>0</span><span class=p>)</span>
            <span class=k>return</span> <span class=nb>true</span><span class=p>;</span>

        <span class=kt>int</span> <span class=n>cur_max</span> <span class=o>=</span> <span class=n>nums</span><span class=p>[</span><span class=mi>0</span><span class=p>];</span> <span class=cm>/* maximum distance can reach from ith */</span>
        <span class=cm>/* L.I.: current step (ith step) must &lt;= cur_max jump */</span>
        <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>n</span><span class=p>;</span> <span class=n>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
            <span class=k>if</span> <span class=p>(</span><span class=n>i</span> <span class=o>&gt;</span> <span class=n>cur_max</span><span class=p>)</span> <span class=cm>/* must goes first */</span>
                <span class=k>return</span> <span class=nb>false</span><span class=p>;</span>

            <span class=k>if</span> <span class=p>(</span><span class=n>i</span> <span class=o>+</span> <span class=n>nums</span><span class=p>[</span><span class=n>i</span><span class=p>]</span> <span class=o>&gt;</span> <span class=n>cur_max</span><span class=p>)</span>
                <span class=n>cur_max</span> <span class=o>=</span> <span class=n>i</span> <span class=o>+</span> <span class=n>nums</span><span class=p>[</span><span class=n>i</span><span class=p>];</span>
        <span class=p>}</span>

        <span class=k>return</span> <span class=nb>true</span><span class=p>;</span>
    <span class=p>}</span>
<span class=p>};</span>
</code></pre></div> <h2 id=lecture-2-dynamic-programming-on-coordinates>Lecture 2 Dynamic Programming on Coordinates<a class=headerlink href=#lecture-2-dynamic-programming-on-coordinates title="Permanent link">&para;</a></h2> <table> <thead> <tr> <th>Problem</th> <th>Category</th> </tr> </thead> <tbody> <tr> <td><a href=#unique-paths-ii>Unique Paths II</a></td> <td>坐标型</td> </tr> <tr> <td><a href=#paint-house>Paint House</a></td> <td>序列型 ＋ 状态</td> </tr> <tr> <td><a href=#decode-ways>Decode Ways</a></td> <td>划分型</td> </tr> <tr> <td><a href=#longest-increasing-continuous-subsequence>Longest Increasing Continuous Subsequence</a></td> <td>序列型 / 划分型</td> </tr> <tr> <td><a href=#minimum-path-sum>Minimum Path Sum</a></td> <td>坐标型</td> </tr> <tr> <td><a href=#bomb-enemy>Bomb Enemy</a></td> <td>坐标型</td> </tr> <tr> <td><a href=#counting-bits>Counting Bits</a></td> <td>坐标型</td> </tr> </tbody> </table> <h3 id=_1>坐标型动态规划<a class=headerlink href=#_1 title="Permanent link">&para;</a></h3> <ul> <li>最简单的动态规划类型</li> <li>给定一个序列或网格</li> <li>需要找到序列中某个/些子序列或网格中的某条路径<ol> <li>某种性质最大/最小</li> <li>计数</li> <li>存在性</li> </ol> </li> <li>动态规划方程<code>f[i]</code>中的下标<code>i</code>表示以<code>a[i]</code>为结尾的满足条件的子序列的性质. <code>f[i][j]</code> 中的 下标 <code>i</code>, <code>j</code> 表示以格子<code>(i, j)</code>为结尾的满足条件的路径的性质<ol> <li>最大值/最小值</li> <li>个数</li> <li>是否存在</li> </ol> </li> <li>坐标型动态规划的初始条件<code>f[0]</code>就是指以<code>a[0]</code>为结尾的子序列的性质</li> </ul> <h3 id=unique-paths-ii>Unique Paths II<a class=headerlink href=#unique-paths-ii title="Permanent link">&para;</a></h3> <div class=tabbed-set data-tabs=2:3><input checked=checked id=__tabbed_2_1 name=__tabbed_2 type=radio><label for=__tabbed_2_1>C++ Naive DP</label><div class=tabbed-content> <div class=highlight><pre><span></span><code><span class=k>class</span> <span class=nc>Solution</span> <span class=p>{</span>
<span class=k>public</span><span class=o>:</span>
    <span class=kt>int</span> <span class=n>uniquePathsWithObstacles</span><span class=p>(</span><span class=n>vector</span><span class=o>&lt;</span><span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;&gt;&amp;</span> <span class=n>obstacleGrid</span><span class=p>)</span> <span class=p>{</span>
        <span class=kt>int</span> <span class=n>m</span> <span class=o>=</span> <span class=n>obstacleGrid</span><span class=p>.</span><span class=n>size</span><span class=p>();</span>
        <span class=kt>int</span> <span class=n>n</span> <span class=o>=</span> <span class=n>obstacleGrid</span><span class=p>[</span><span class=mi>0</span><span class=p>].</span><span class=n>size</span><span class=p>();</span>
        <span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
        <span class=kt>int</span> <span class=n>j</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
        <span class=kt>int</span> <span class=n>flag</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
        <span class=n>vector</span><span class=o>&lt;</span><span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;&gt;</span> <span class=n>f</span><span class=p>(</span><span class=n>m</span><span class=p>,</span> <span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;</span><span class=p>(</span><span class=n>n</span><span class=p>));</span>
        <span class=k>if</span> <span class=p>(</span><span class=n>m</span> <span class=o>==</span> <span class=mi>0</span> <span class=o>||</span> <span class=n>n</span> <span class=o>==</span> <span class=mi>0</span><span class=p>)</span> <span class=p>{</span>
            <span class=k>return</span> <span class=mi>0</span><span class=p>;</span>
        <span class=p>}</span>

        <span class=k>if</span> <span class=p>(</span><span class=n>obstacleGrid</span><span class=p>[</span><span class=mi>0</span><span class=p>][</span><span class=mi>0</span><span class=p>]</span> <span class=o>==</span> <span class=mi>1</span><span class=p>)</span> <span class=p>{</span>
            <span class=k>return</span> <span class=mi>0</span><span class=p>;</span>
        <span class=p>}</span>

        <span class=n>f</span><span class=p>[</span><span class=mi>0</span><span class=p>][</span><span class=mi>0</span><span class=p>]</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span>
        <span class=k>for</span> <span class=p>(</span><span class=n>i</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>m</span><span class=p>;</span> <span class=n>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
            <span class=k>if</span> <span class=p>(</span><span class=n>obstacleGrid</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=mi>0</span><span class=p>]</span> <span class=o>==</span> <span class=mi>1</span><span class=p>)</span> <span class=p>{</span>
                <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=mi>0</span><span class=p>]</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
            <span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
                <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=mi>0</span><span class=p>]</span> <span class=o>=</span> <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=mi>-1</span><span class=p>][</span><span class=mi>0</span><span class=p>];</span>
            <span class=p>}</span>
        <span class=p>}</span>
        <span class=k>for</span> <span class=p>(</span><span class=n>j</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span> <span class=n>j</span> <span class=o>&lt;</span> <span class=n>n</span><span class=p>;</span> <span class=n>j</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
            <span class=k>if</span> <span class=p>(</span><span class=n>obstacleGrid</span><span class=p>[</span><span class=mi>0</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>==</span> <span class=mi>1</span><span class=p>)</span> <span class=p>{</span>
                <span class=n>f</span><span class=p>[</span><span class=mi>0</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
            <span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
                <span class=n>f</span><span class=p>[</span><span class=mi>0</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>=</span> <span class=n>f</span><span class=p>[</span><span class=mi>0</span><span class=p>][</span><span class=n>j</span><span class=mi>-1</span><span class=p>];</span>
            <span class=p>}</span>
        <span class=p>}</span>

        <span class=k>for</span> <span class=p>(</span><span class=n>i</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>m</span><span class=p>;</span> <span class=n>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
            <span class=k>for</span> <span class=p>(</span><span class=n>j</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span> <span class=n>j</span> <span class=o>&lt;</span> <span class=n>n</span><span class=p>;</span> <span class=n>j</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
                <span class=k>if</span> <span class=p>(</span><span class=n>obstacleGrid</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>==</span> <span class=mi>1</span><span class=p>)</span> <span class=p>{</span>
                    <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
                <span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
                    <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>=</span> <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=mi>-1</span><span class=p>]</span> <span class=o>+</span> <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=mi>-1</span><span class=p>][</span><span class=n>j</span><span class=p>];</span>
                <span class=p>}</span>
            <span class=p>}</span>
        <span class=p>}</span>

        <span class=k>return</span> <span class=n>f</span><span class=p>[</span><span class=n>m</span><span class=mi>-1</span><span class=p>][</span><span class=n>n</span><span class=mi>-1</span><span class=p>];</span>
    <span class=p>}</span>
<span class=p>};</span>
</code></pre></div> </div> <input id=__tabbed_2_2 name=__tabbed_2 type=radio><label for=__tabbed_2_2>C++ Naive DP Refactored</label><div class=tabbed-content> <div class=highlight><pre><span></span><code><span class=k>class</span> <span class=nc>Solution</span> <span class=p>{</span>
<span class=k>public</span><span class=o>:</span>
    <span class=kt>int</span> <span class=n>uniquePathsWithObstacles</span><span class=p>(</span><span class=n>vector</span><span class=o>&lt;</span><span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;&gt;&amp;</span> <span class=n>obstacleGrid</span><span class=p>)</span> <span class=p>{</span>
        <span class=kt>int</span> <span class=n>m</span> <span class=o>=</span> <span class=n>obstacleGrid</span><span class=p>.</span><span class=n>size</span><span class=p>();</span>
        <span class=kt>int</span> <span class=n>n</span> <span class=o>=</span> <span class=n>m</span> <span class=o>&gt;</span> <span class=mi>0</span> <span class=o>?</span> <span class=n>obstacleGrid</span><span class=p>[</span><span class=mi>0</span><span class=p>].</span><span class=n>size</span><span class=p>()</span> <span class=o>:</span> <span class=mi>0</span><span class=p>;</span>
        <span class=k>if</span> <span class=p>(</span><span class=n>m</span> <span class=o>==</span> <span class=mi>0</span> <span class=o>&amp;&amp;</span> <span class=n>n</span> <span class=o>==</span> <span class=mi>0</span><span class=p>)</span> <span class=p>{</span>
            <span class=k>return</span> <span class=mi>0</span><span class=p>;</span>
        <span class=p>}</span>

        <span class=n>vector</span><span class=o>&lt;</span><span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;&gt;</span> <span class=n>f</span><span class=p>(</span><span class=n>m</span><span class=p>,</span> <span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;</span><span class=p>(</span><span class=n>n</span><span class=p>,</span> <span class=mi>0</span><span class=p>));</span>

        <span class=n>f</span><span class=p>[</span><span class=mi>0</span><span class=p>][</span><span class=mi>0</span><span class=p>]</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span>

        <span class=k>if</span> <span class=p>(</span><span class=n>obstacleGrid</span><span class=p>[</span><span class=mi>0</span><span class=p>][</span><span class=mi>0</span><span class=p>]</span> <span class=o>==</span> <span class=mi>1</span><span class=p>)</span> <span class=p>{</span>
            <span class=k>return</span> <span class=mi>0</span><span class=p>;</span>
        <span class=p>}</span>

        <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>m</span><span class=p>;</span> <span class=n>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
            <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>j</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>j</span> <span class=o>&lt;</span> <span class=n>n</span><span class=p>;</span> <span class=n>j</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
                <span class=k>if</span> <span class=p>(</span><span class=n>obstacleGrid</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>==</span> <span class=mi>1</span><span class=p>)</span> <span class=p>{</span>
                    <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
                <span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
                    <span class=c1>// whenever available</span>
                    <span class=k>if</span> <span class=p>(</span><span class=n>i</span> <span class=o>&gt;</span> <span class=mi>0</span><span class=p>)</span> <span class=p>{</span>
                        <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>+=</span> <span class=n>f</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=mi>1</span><span class=p>][</span><span class=n>j</span><span class=p>];</span>
                    <span class=p>}</span>

                    <span class=k>if</span> <span class=p>(</span><span class=n>j</span> <span class=o>&gt;</span> <span class=mi>0</span><span class=p>)</span> <span class=p>{</span>
                        <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>+=</span> <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span> <span class=o>-</span> <span class=mi>1</span><span class=p>];</span>
                    <span class=p>}</span>
                <span class=p>}</span>
            <span class=p>}</span>
        <span class=p>}</span>

        <span class=k>return</span> <span class=n>f</span><span class=p>[</span><span class=n>m</span> <span class=o>-</span> <span class=mi>1</span><span class=p>][</span><span class=n>n</span> <span class=o>-</span> <span class=mi>1</span><span class=p>];</span>
    <span class=p>}</span>
<span class=p>};</span>
</code></pre></div> </div> <input id=__tabbed_2_3 name=__tabbed_2 type=radio><label for=__tabbed_2_3>Java O(n) space</label><div class=tabbed-content> <div class=highlight><pre><span></span><code><span class=c1>// Optimized using a rolling array or single row dp array instead of m x n.</span>
<span class=kd>class</span> <span class=nc>Solution</span> <span class=p>{</span>
    <span class=kd>public</span> <span class=kt>int</span> <span class=nf>uniquePathsWithObstacles</span><span class=p>(</span><span class=kt>int</span><span class=o>[][]</span> <span class=n>a</span><span class=p>)</span> <span class=p>{</span>
        <span class=kt>int</span> <span class=n>m</span> <span class=o>=</span> <span class=n>a</span><span class=p>.</span><span class=na>length</span><span class=p>;</span>
        <span class=kt>int</span> <span class=n>n</span> <span class=o>=</span> <span class=n>a</span><span class=o>[</span><span class=mi>0</span><span class=o>]</span><span class=p>.</span><span class=na>length</span><span class=p>;</span>

        <span class=kt>int</span> <span class=n>dp</span><span class=o>[]</span> <span class=o>=</span> <span class=k>new</span> <span class=kt>int</span><span class=o>[</span><span class=n>n</span><span class=o>]</span><span class=p>;</span>
        <span class=n>dp</span><span class=o>[</span><span class=mi>0</span><span class=o>]</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span>

        <span class=c1>//T[i][j] = T[i-1][j] + T[i][j-1]</span>
        <span class=k>for</span><span class=p>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>m</span><span class=p>;</span> <span class=n>i</span><span class=o>++</span><span class=p>){</span>
            <span class=k>for</span><span class=p>(</span><span class=kt>int</span> <span class=n>j</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>j</span> <span class=o>&lt;</span> <span class=n>n</span><span class=p>;</span> <span class=n>j</span><span class=o>++</span><span class=p>){</span>
                <span class=k>if</span><span class=p>(</span><span class=n>a</span><span class=o>[</span><span class=n>i</span><span class=o>][</span><span class=n>j</span><span class=o>]</span> <span class=o>==</span> <span class=mi>1</span><span class=p>){</span>
                    <span class=n>dp</span><span class=o>[</span><span class=n>j</span><span class=o>]</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
                <span class=p>}</span><span class=k>else</span> <span class=k>if</span><span class=p>(</span><span class=n>j</span> <span class=o>&gt;</span> <span class=mi>0</span><span class=p>){</span>
                    <span class=n>dp</span><span class=o>[</span><span class=n>j</span><span class=o>]</span> <span class=o>+=</span> <span class=n>dp</span><span class=o>[</span><span class=n>j</span><span class=o>-</span><span class=mi>1</span><span class=o>]</span><span class=p>;</span>
                <span class=p>}</span>
            <span class=p>}</span>
        <span class=p>}</span>

        <span class=k>return</span> <span class=n>dp</span><span class=o>[</span><span class=n>n</span><span class=o>-</span><span class=mi>1</span><span class=o>]</span><span class=p>;</span>
    <span class=p>}</span>
<span class=p>}</span>
</code></pre></div> </div> </div> <h3 id=paint-house>Paint House<a class=headerlink href=#paint-house title="Permanent link">&para;</a></h3> <ul> <li>DP last step: considering the optimal solution. The last paint must be one of the three colors and the paint cost is minimum.</li> <li>State: we can try to name <code>f[i]</code> the minimum cost of painting the first <code>i</code> houses, <code>i = 0, 1, ... i-1</code>. However, we cannot know what color could be used for the last house.</li> <li>Change the state to: <code>f[i][k]</code> is the minium cost of painting the first <code>i</code> houses and the <code>i-1</code>th element is painted as color <code>k</code>. This way, we can choose the last paint based on this piece of information.</li> <li>The state transition fomular: <span><span class=MathJax_Preview>f[i][k] = f[i - 1][\ell]_{\ell != k} + costs[i - 1][k]</span><script type=math/tex>f[i][k] = f[i - 1][\ell]_{\ell != k} + costs[i - 1][k]</script></span></li> <li>The result is minimum of the: <span><span class=MathJax_Preview>f[i][0],\ f[i][1],\ f[i][2]</span><script type=math/tex>f[i][0],\ f[i][1],\ f[i][2]</script></span></li> </ul> <div class=highlight><pre><span></span><code><span class=k>class</span> <span class=nc>Solution</span> <span class=p>{</span>
<span class=k>public</span><span class=o>:</span>
    <span class=kt>int</span> <span class=n>minCost</span><span class=p>(</span><span class=n>vector</span><span class=o>&lt;</span><span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;&gt;&amp;</span> <span class=n>costs</span><span class=p>)</span> <span class=p>{</span>
        <span class=kt>int</span> <span class=n>m</span> <span class=o>=</span> <span class=n>costs</span><span class=p>.</span><span class=n>size</span><span class=p>();</span>
        <span class=kt>int</span> <span class=n>f</span><span class=p>[</span><span class=n>m</span><span class=o>+</span><span class=mi>1</span><span class=p>][</span><span class=mi>3</span><span class=p>];</span>
        <span class=cm>/* state: f[i][0] paint i house and the last (i - 1) house is red *</span>
<span class=cm>        /* initial value, paint 0 house cost 0 */</span>
        <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>j</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>j</span> <span class=o>&lt;</span> <span class=mi>3</span><span class=p>;</span> <span class=n>j</span><span class=o>++</span><span class=p>)</span>
            <span class=n>f</span><span class=p>[</span><span class=mi>0</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>

        <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;=</span> <span class=n>m</span><span class=p>;</span> <span class=n>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
            <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>j</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>j</span> <span class=o>&lt;</span> <span class=mi>3</span><span class=p>;</span> <span class=n>j</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span> <span class=c1>// current color</span>
                <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>=</span> <span class=n>INT_MAX</span><span class=p>;</span>
                <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>k</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>k</span> <span class=o>&lt;</span> <span class=mi>3</span><span class=p>;</span> <span class=n>k</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span> <span class=c1>// painted color</span>
                    <span class=cm>/* cannot paint same color for neighbor house */</span>
                    <span class=k>if</span> <span class=p>(</span><span class=n>j</span> <span class=o>==</span> <span class=n>k</span><span class=p>)</span>
                        <span class=k>continue</span><span class=p>;</span>

                    <span class=c1>// ith (index with i - 1) house is painted with color j</span>
                    <span class=k>if</span> <span class=p>(</span><span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>&gt;</span> <span class=n>f</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=mi>1</span><span class=p>][</span><span class=n>k</span><span class=p>]</span> <span class=o>+</span> <span class=n>costs</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=mi>1</span><span class=p>][</span><span class=n>j</span><span class=p>])</span>
                        <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>=</span> <span class=n>f</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=mi>1</span><span class=p>][</span><span class=n>k</span><span class=p>]</span> <span class=o>+</span> <span class=n>costs</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=mi>1</span><span class=p>][</span><span class=n>j</span><span class=p>];</span>

                    <span class=c1>//f[i][j] = min(f[i - 1][k] + costs[i - 1][j], f[i][j]);</span>
                <span class=p>}</span>
            <span class=p>}</span>
        <span class=p>}</span>

        <span class=k>return</span> <span class=n>min</span><span class=p>(</span><span class=n>min</span><span class=p>(</span><span class=n>f</span><span class=p>[</span><span class=n>m</span><span class=p>][</span><span class=mi>0</span><span class=p>],</span> <span class=n>f</span><span class=p>[</span><span class=n>m</span><span class=p>][</span><span class=mi>1</span><span class=p>]),</span> <span class=n>f</span><span class=p>[</span><span class=n>m</span><span class=p>][</span><span class=mi>2</span><span class=p>]);</span>
    <span class=p>}</span>
<span class=p>};</span>
</code></pre></div> <h3 id=decode-ways>Decode Ways<a class=headerlink href=#decode-ways title="Permanent link">&para;</a></h3> <p>4 Ingredients</p> <ol> <li> <p>Last step:</p> <div class=highlight><pre><span></span><code>A_0, A_1, A_2, ..., A_n-3, [A_n-2, A_n-1]
A_0, A_1, A_2, ..., A_n-3, A_n-2, [A_n-1]
</code></pre></div> </li> <li> <p>State: <code>f[n]</code>: decode ways of first <code>n</code> letters.</p> </li> <li>Smaller problem: <code>f[n] = f[n - 1] + f[n - 2] | A_n-2,A_n-1</code> decodable.</li> <li>Init: <code>f[0] = 1</code></li> </ol> <div class="admonition note"> <p class=admonition-title>Note</p> <p>Again the idea in this solution is to update the <code>f[i][j]</code> on demand, a technique that broadly used in 2-d coordinate based DP problems such as <a href=#bomb-enemy>Bomb Enemy</a>, <a href=#unique-paths-ii>Unique Paths II</a>, and <a href=#minimum-path-sum>Minimum Path Sum</a>.</p> </div> <div class=tabbed-set data-tabs=3:2><input checked=checked id=__tabbed_3_1 name=__tabbed_3 type=radio><label for=__tabbed_3_1>C++ DP</label><div class=tabbed-content> <div class=highlight><pre><span></span><code><span class=k>class</span> <span class=nc>Solution</span> <span class=p>{</span>
<span class=k>public</span><span class=o>:</span>
    <span class=kt>int</span> <span class=n>numDecodings</span><span class=p>(</span><span class=n>string</span> <span class=n>s</span><span class=p>)</span> <span class=p>{</span>
        <span class=kt>int</span> <span class=n>n</span> <span class=o>=</span> <span class=n>s</span><span class=p>.</span><span class=n>length</span><span class=p>();</span>
        <span class=kt>int</span> <span class=n>f</span><span class=p>[</span><span class=n>n</span> <span class=o>+</span> <span class=mi>1</span><span class=p>]</span> <span class=o>=</span> <span class=p>{</span><span class=mi>0</span><span class=p>};</span>
        <span class=k>if</span> <span class=p>(</span><span class=n>n</span> <span class=o>==</span> <span class=mi>0</span><span class=p>)</span>
            <span class=k>return</span> <span class=mi>0</span><span class=p>;</span>

        <span class=n>f</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span>
        <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;=</span> <span class=n>n</span><span class=p>;</span> <span class=n>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
            <span class=kt>int</span> <span class=n>t</span> <span class=o>=</span> <span class=n>s</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=mi>1</span><span class=p>]</span> <span class=o>-</span> <span class=sc>&#39;0&#39;</span><span class=p>;</span>
            <span class=k>if</span> <span class=p>(</span><span class=n>t</span> <span class=o>&gt;</span> <span class=mi>0</span> <span class=o>&amp;&amp;</span> <span class=n>t</span> <span class=o>&lt;=</span> <span class=mi>9</span><span class=p>)</span> <span class=p>{</span>
                <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>]</span> <span class=o>+=</span> <span class=n>f</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=mi>1</span><span class=p>];</span>
            <span class=p>}</span>

            <span class=k>if</span> <span class=p>(</span><span class=n>i</span> <span class=o>&gt;</span> <span class=mi>1</span><span class=p>){</span>
                <span class=kt>int</span> <span class=n>q</span> <span class=o>=</span> <span class=p>(</span><span class=n>s</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=mi>2</span><span class=p>]</span> <span class=o>-</span> <span class=sc>&#39;0&#39;</span><span class=p>)</span> <span class=o>*</span> <span class=mi>10</span> <span class=o>+</span> <span class=n>t</span><span class=p>;</span>
                <span class=k>if</span> <span class=p>(</span><span class=n>q</span> <span class=o>&gt;=</span> <span class=mi>10</span> <span class=o>&amp;&amp;</span> <span class=n>q</span> <span class=o>&lt;=</span> <span class=mi>26</span><span class=p>)</span> <span class=p>{</span>
                    <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>]</span> <span class=o>+=</span> <span class=n>f</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=mi>2</span><span class=p>];</span>
                <span class=p>}</span>
            <span class=p>}</span>
        <span class=p>}</span>

        <span class=k>return</span> <span class=n>f</span><span class=p>[</span><span class=n>n</span><span class=p>];</span>
    <span class=p>}</span>
<span class=p>};</span>
</code></pre></div> </div> <input id=__tabbed_3_2 name=__tabbed_3 type=radio><label for=__tabbed_3_2>C++ DP O(1)</label><div class=tabbed-content> <div class=highlight><pre><span></span><code><span class=k>class</span> <span class=nc>Solution</span> <span class=p>{</span>
<span class=k>public</span><span class=o>:</span>
    <span class=kt>int</span> <span class=n>numDecodings</span><span class=p>(</span><span class=n>string</span> <span class=n>s</span><span class=p>)</span> <span class=p>{</span>
        <span class=k>if</span> <span class=p>(</span><span class=o>!</span><span class=n>s</span><span class=p>.</span><span class=n>size</span><span class=p>()</span> <span class=o>||</span> <span class=n>s</span><span class=p>.</span><span class=n>front</span><span class=p>()</span> <span class=o>==</span> <span class=sc>&#39;0&#39;</span><span class=p>)</span> <span class=k>return</span> <span class=mi>0</span><span class=p>;</span>
        <span class=c1>// r2: decode ways of s[0, i-2] , r1: decode ways of s[0, i-1]</span>
        <span class=kt>int</span> <span class=n>r1</span> <span class=o>=</span> <span class=mi>1</span><span class=p>,</span> <span class=n>r2</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span>

        <span class=c1>// think it as a coordinate bases, not sequence based dp</span>
        <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>s</span><span class=p>.</span><span class=n>size</span><span class=p>();</span> <span class=n>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
            <span class=c1>// last char in s[0, i] is 0, cannot decode</span>
            <span class=k>if</span> <span class=p>(</span><span class=n>s</span><span class=p>[</span><span class=n>i</span><span class=p>]</span> <span class=o>==</span> <span class=sc>&#39;0&#39;</span><span class=p>)</span> <span class=n>r1</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>

            <span class=c1>// two-digit letter, add r2 to r1, r2 get the previous r1</span>
            <span class=k>if</span> <span class=p>(</span><span class=n>s</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=mi>1</span><span class=p>]</span> <span class=o>==</span> <span class=sc>&#39;1&#39;</span> <span class=o>||</span> <span class=n>s</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=mi>1</span><span class=p>]</span> <span class=o>==</span> <span class=sc>&#39;2&#39;</span> <span class=o>&amp;&amp;</span> <span class=n>s</span><span class=p>[</span><span class=n>i</span><span class=p>]</span> <span class=o>&lt;=</span> <span class=sc>&#39;6&#39;</span><span class=p>)</span> <span class=p>{</span>
                <span class=n>r1</span> <span class=o>=</span> <span class=n>r2</span> <span class=o>+</span> <span class=n>r1</span><span class=p>;</span>
                <span class=n>r2</span> <span class=o>=</span> <span class=n>r1</span> <span class=o>-</span> <span class=n>r2</span><span class=p>;</span>
            <span class=p>}</span> <span class=k>else</span> <span class=p>{</span> <span class=c1>// one-digit letter, r2 get the previous r1</span>
                <span class=n>r2</span> <span class=o>=</span> <span class=n>r1</span><span class=p>;</span>
            <span class=p>}</span>
        <span class=p>}</span>

        <span class=k>return</span> <span class=n>r1</span><span class=p>;</span>
    <span class=p>}</span>
<span class=p>};</span>
</code></pre></div> </div> </div> <h3 id=longest-increasing-continuous-subsequence>Longest Increasing Continuous Subsequence<a class=headerlink href=#longest-increasing-continuous-subsequence title="Permanent link">&para;</a></h3> <p>4 ingredients:</p> <ol> <li>Last step, last element <code>a[n-1]</code> could be in the result or not in the result.</li> <li>subproblem, suppose we have the LICS of the first <code>n - 1</code> elements. represented as <code>f[n-1]</code>.</li> <li>base case and boundary condition, when no char in the string: <code>f[0] = 1</code>. An empty string has LICS length of 1.</li> <li>order of calculation, calculate small index first.</li> </ol> <div class="admonition note"> <p class=admonition-title>Not a leetcode</p> <p>The problem is not a leetcode problem, the original problem ask for sequences that could be increase or decrease.</p> </div> <div class="admonition warning"> <p class=admonition-title>Using index in DP problems</p> <p>Avoid using both index <code>i - 1</code> and <code>i + 1</code> in a loop invariance, otherwise you'll have problems in keeping the loop invariance. Compare the following.</p> </div> <div class=tabbed-set data-tabs=4:4><input checked=checked id=__tabbed_4_1 name=__tabbed_4 type=radio><label for=__tabbed_4_1>Incorrect</label><div class=tabbed-content> <div class=highlight><pre><span></span><code><span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=n>n</span> <span class=o>-</span> <span class=mi>1</span><span class=p>;</span> <span class=n>i</span> <span class=o>&gt;=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>i</span><span class=o>--</span><span class=p>)</span> <span class=p>{</span>
    <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>]</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span>
    <span class=k>if</span> <span class=p>(</span><span class=n>i</span> <span class=o>&lt;</span> <span class=n>n</span> <span class=o>-</span> <span class=mi>1</span> <span class=o>&amp;&amp;</span> <span class=n>i</span> <span class=o>&gt;</span> <span class=mi>0</span> <span class=o>&amp;&amp;</span> <span class=n>A</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=mi>1</span><span class=p>]</span> <span class=o>&gt;</span> <span class=n>A</span><span class=p>[</span><span class=n>i</span><span class=p>])</span> <span class=p>{</span>
        <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>]</span> <span class=o>=</span> <span class=n>f</span><span class=p>[</span><span class=n>i</span> <span class=o>+</span> <span class=mi>1</span><span class=p>]</span> <span class=o>+</span> <span class=mi>1</span><span class=p>;</span>
    <span class=p>}</span>
    <span class=n>res2</span> <span class=o>=</span> <span class=n>max</span><span class=p>(</span><span class=n>res2</span><span class=p>,</span> <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>]);</span>
<span class=p>}</span>
</code></pre></div> </div> <input id=__tabbed_4_2 name=__tabbed_4 type=radio><label for=__tabbed_4_2>Correct</label><div class=tabbed-content> <div class=highlight><pre><span></span><code><span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=n>n</span> <span class=o>-</span> <span class=mi>1</span><span class=p>;</span> <span class=n>i</span> <span class=o>&gt;=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>i</span><span class=o>--</span><span class=p>)</span> <span class=p>{</span>
    <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>]</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span>
    <span class=k>if</span> <span class=p>(</span><span class=n>i</span> <span class=o>&lt;</span> <span class=n>n</span> <span class=o>-</span> <span class=mi>1</span> <span class=o>&amp;&amp;</span> <span class=n>A</span><span class=p>[</span><span class=n>i</span><span class=p>]</span> <span class=o>&gt;</span> <span class=n>A</span><span class=p>[</span><span class=n>i</span> <span class=o>+</span> <span class=mi>1</span><span class=p>])</span> <span class=p>{</span>
        <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>]</span> <span class=o>=</span> <span class=n>f</span><span class=p>[</span><span class=n>i</span> <span class=o>+</span> <span class=mi>1</span><span class=p>]</span> <span class=o>+</span> <span class=mi>1</span><span class=p>;</span>
    <span class=p>}</span>
    <span class=n>res2</span> <span class=o>=</span> <span class=n>max</span><span class=p>(</span><span class=n>res2</span><span class=p>,</span> <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>]);</span>
<span class=p>}</span>
</code></pre></div> </div> <input id=__tabbed_4_3 name=__tabbed_4 type=radio><label for=__tabbed_4_3>Correct</label><div class=tabbed-content> <div class=highlight><pre><span></span><code><span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>n</span><span class=p>;</span> <span class=n>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
    <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>]</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span>
    <span class=k>if</span> <span class=p>(</span><span class=n>i</span> <span class=o>&gt;</span> <span class=mi>0</span> <span class=o>&amp;&amp;</span> <span class=n>A</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=mi>1</span><span class=p>]</span> <span class=o>&gt;</span> <span class=n>A</span><span class=p>[</span><span class=n>i</span><span class=p>])</span> <span class=p>{</span>
        <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>]</span> <span class=o>=</span> <span class=n>f</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=mi>1</span><span class=p>]</span> <span class=o>+</span> <span class=mi>1</span><span class=p>;</span>
    <span class=p>}</span>
    <span class=n>res2</span> <span class=o>=</span> <span class=n>max</span><span class=p>(</span><span class=n>res2</span><span class=p>,</span> <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>]);</span>
<span class=p>}</span>
</code></pre></div> </div> <input id=__tabbed_4_4 name=__tabbed_4 type=radio><label for=__tabbed_4_4>C++ DP solution</label><div class=tabbed-content> <div class=highlight><pre><span></span><code><span class=k>class</span> <span class=nc>Solution</span> <span class=p>{</span>
<span class=k>public</span><span class=o>:</span>
    <span class=kt>int</span> <span class=n>longestIncreasingContinuousSubsequence</span><span class=p>(</span><span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;&amp;</span> <span class=n>A</span><span class=p>)</span> <span class=p>{</span>
        <span class=c1>// Write your code here</span>
        <span class=kt>int</span> <span class=n>n</span> <span class=o>=</span> <span class=n>A</span><span class=p>.</span><span class=n>size</span><span class=p>();</span>
        <span class=kt>int</span> <span class=n>f</span><span class=p>[</span><span class=n>n</span><span class=p>];</span>
        <span class=kt>int</span> <span class=n>res1</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
        <span class=kt>int</span> <span class=n>res2</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>

        <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>n</span><span class=p>;</span> <span class=n>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
            <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>]</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span>
            <span class=k>if</span> <span class=p>(</span><span class=n>i</span> <span class=o>&gt;</span> <span class=mi>0</span> <span class=o>&amp;&amp;</span> <span class=n>A</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=mi>1</span><span class=p>]</span> <span class=o>&lt;</span> <span class=n>A</span><span class=p>[</span><span class=n>i</span><span class=p>])</span> <span class=p>{</span>
                <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>]</span> <span class=o>=</span> <span class=n>f</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=mi>1</span><span class=p>]</span> <span class=o>+</span> <span class=mi>1</span><span class=p>;</span>
            <span class=p>}</span>
            <span class=n>res1</span> <span class=o>=</span> <span class=n>max</span><span class=p>(</span><span class=n>res1</span><span class=p>,</span> <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>]);</span>
        <span class=p>}</span>

        <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=n>n</span> <span class=o>-</span> <span class=mi>1</span><span class=p>;</span> <span class=n>i</span> <span class=o>&gt;=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>i</span><span class=o>--</span><span class=p>)</span> <span class=p>{</span>
            <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>]</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span>
            <span class=k>if</span> <span class=p>(</span><span class=n>i</span> <span class=o>&lt;</span> <span class=n>n</span> <span class=o>-</span> <span class=mi>1</span> <span class=o>&amp;&amp;</span> <span class=n>A</span><span class=p>[</span><span class=n>i</span><span class=p>]</span> <span class=o>&gt;</span> <span class=n>A</span><span class=p>[</span><span class=n>i</span> <span class=o>+</span> <span class=mi>1</span><span class=p>])</span> <span class=p>{</span>
                <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>]</span> <span class=o>=</span> <span class=n>f</span><span class=p>[</span><span class=n>i</span> <span class=o>+</span> <span class=mi>1</span><span class=p>]</span> <span class=o>+</span> <span class=mi>1</span><span class=p>;</span>
            <span class=p>}</span>
            <span class=n>res2</span> <span class=o>=</span> <span class=n>max</span><span class=p>(</span><span class=n>res2</span><span class=p>,</span> <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>]);</span>
        <span class=p>}</span>

        <span class=k>return</span> <span class=n>max</span><span class=p>(</span><span class=n>res1</span><span class=p>,</span> <span class=n>res2</span><span class=p>);</span>
    <span class=p>}</span>
<span class=p>};</span>
</code></pre></div> </div> </div> <p>Here we don't have to explicitly wirte <code>f[i] = max(1, f[i - 1] + 1)</code>, since we have the condition <code>A[i - 1] &lt; A[i]</code>, we know the <code>A[i]</code> will be added to the <code>f[i]</code>, hence simply update <code>f[i] = f[i - 1] + 1</code> directly.</p> <h3 id=minimum-path-sum>Minimum Path Sum<a class=headerlink href=#minimum-path-sum title="Permanent link">&para;</a></h3> <ul> <li>This is coordinate based DP. We need to have <code>f[i][j]</code> to keep the minimum path sum to the <code>grid[i][j]</code>.</li> <li>Calculate <code>f[i][j]</code> from top to down and from left to right for each row. Space can be optimized.</li> <li>Notice we can do the init and first row and first column in nested loops, do not need use multiple for loops.</li> </ul> <div class=tabbed-set data-tabs=5:2><input checked=checked id=__tabbed_5_1 name=__tabbed_5 type=radio><label for=__tabbed_5_1>C++ DP</label><div class=tabbed-content> <div class=highlight><pre><span></span><code><span class=k>class</span> <span class=nc>Solution</span> <span class=p>{</span>
<span class=k>public</span><span class=o>:</span>
    <span class=kt>int</span> <span class=n>minPathSum</span><span class=p>(</span><span class=n>vector</span><span class=o>&lt;</span><span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;</span> <span class=o>&gt;</span> <span class=o>&amp;</span><span class=n>grid</span><span class=p>)</span> <span class=p>{</span>
        <span class=kt>int</span> <span class=n>m</span> <span class=o>=</span> <span class=n>grid</span><span class=p>.</span><span class=n>size</span><span class=p>();</span>
        <span class=kt>int</span> <span class=n>n</span> <span class=o>=</span> <span class=n>grid</span><span class=p>[</span><span class=mi>0</span><span class=p>].</span><span class=n>size</span><span class=p>();</span>
        <span class=k>if</span> <span class=p>(</span><span class=n>m</span> <span class=o>==</span> <span class=mi>0</span> <span class=o>||</span> <span class=n>n</span> <span class=o>==</span> <span class=mi>0</span><span class=p>)</span>
            <span class=k>return</span> <span class=mi>0</span><span class=p>;</span>

        <span class=kt>int</span> <span class=n>f</span><span class=p>[</span><span class=n>m</span><span class=p>][</span><span class=n>n</span><span class=p>];</span>

        <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>m</span><span class=p>;</span> <span class=n>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
            <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>j</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>j</span> <span class=o>&lt;</span> <span class=n>n</span><span class=p>;</span> <span class=n>j</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
                <span class=k>if</span> <span class=p>(</span><span class=n>i</span> <span class=o>==</span> <span class=mi>0</span> <span class=o>&amp;&amp;</span> <span class=n>j</span> <span class=o>==</span> <span class=mi>0</span><span class=p>)</span> <span class=p>{</span>
                    <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>=</span> <span class=n>grid</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>];</span>
                <span class=p>}</span>

                <span class=k>if</span> <span class=p>(</span><span class=n>i</span> <span class=o>==</span> <span class=mi>0</span> <span class=o>&amp;&amp;</span> <span class=n>j</span> <span class=o>&gt;</span> <span class=mi>0</span><span class=p>)</span> <span class=p>{</span>
                    <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>=</span> <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span> <span class=o>-</span> <span class=mi>1</span><span class=p>]</span> <span class=o>+</span> <span class=n>grid</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>];</span>
                <span class=p>}</span>

                <span class=k>if</span> <span class=p>(</span><span class=n>j</span> <span class=o>==</span> <span class=mi>0</span> <span class=o>&amp;&amp;</span> <span class=n>i</span> <span class=o>&gt;</span> <span class=mi>0</span><span class=p>)</span> <span class=p>{</span>
                    <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>=</span> <span class=n>f</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=mi>1</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>+</span> <span class=n>grid</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>];</span>
                <span class=p>}</span>

                <span class=k>if</span> <span class=p>(</span><span class=n>i</span> <span class=o>&gt;</span> <span class=mi>0</span> <span class=o>&amp;&amp;</span> <span class=n>j</span> <span class=o>&gt;</span> <span class=mi>0</span><span class=p>)</span> <span class=p>{</span>
                    <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>=</span> <span class=n>min</span><span class=p>(</span><span class=n>f</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=mi>1</span><span class=p>][</span><span class=n>j</span><span class=p>],</span> <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span> <span class=o>-</span> <span class=mi>1</span><span class=p>])</span> <span class=o>+</span> <span class=n>grid</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>];</span>
                <span class=p>}</span>
            <span class=p>}</span>
        <span class=p>}</span>

        <span class=k>return</span> <span class=n>f</span><span class=p>[</span><span class=n>m</span> <span class=o>-</span> <span class=mi>1</span><span class=p>][</span><span class=n>n</span> <span class=o>-</span> <span class=mi>1</span><span class=p>];</span>
    <span class=p>}</span>
<span class=p>};</span>
</code></pre></div> </div> <input id=__tabbed_5_2 name=__tabbed_5 type=radio><label for=__tabbed_5_2>C++ DP Space O(n)</label><div class=tabbed-content> <div class=highlight><pre><span></span><code><span class=k>class</span> <span class=nc>Solution</span> <span class=p>{</span>
<span class=k>public</span><span class=o>:</span>
    <span class=kt>int</span> <span class=n>minPathSum</span><span class=p>(</span><span class=n>vector</span><span class=o>&lt;</span><span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;</span> <span class=o>&gt;</span> <span class=o>&amp;</span><span class=n>grid</span><span class=p>)</span> <span class=p>{</span>
        <span class=kt>int</span> <span class=n>m</span> <span class=o>=</span> <span class=n>grid</span><span class=p>.</span><span class=n>size</span><span class=p>();</span>
        <span class=kt>int</span> <span class=n>n</span> <span class=o>=</span> <span class=n>grid</span><span class=p>[</span><span class=mi>0</span><span class=p>].</span><span class=n>size</span><span class=p>();</span>
        <span class=k>if</span> <span class=p>(</span><span class=n>m</span> <span class=o>==</span> <span class=mi>0</span> <span class=o>||</span> <span class=n>n</span> <span class=o>==</span> <span class=mi>0</span><span class=p>)</span>
            <span class=k>return</span> <span class=mi>0</span><span class=p>;</span>

        <span class=kt>int</span> <span class=n>f</span><span class=p>[</span><span class=mi>2</span><span class=p>][</span><span class=n>n</span><span class=p>];</span> <span class=cm>/* only two rows of status */</span>
        <span class=kt>int</span> <span class=n>prev</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span>
        <span class=kt>int</span> <span class=n>curr</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span>
        <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>m</span><span class=p>;</span> <span class=n>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
            <span class=c1>// rolling the f array when move to a new row</span>
            <span class=n>prev</span> <span class=o>=</span> <span class=n>curr</span><span class=p>;</span>
            <span class=n>curr</span> <span class=o>=</span> <span class=mi>1</span> <span class=o>-</span> <span class=n>curr</span><span class=p>;</span>
            <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>j</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>j</span> <span class=o>&lt;</span> <span class=n>n</span><span class=p>;</span> <span class=n>j</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
                <span class=n>f</span><span class=p>[</span><span class=n>curr</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>=</span> <span class=n>grid</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>];</span>

                <span class=k>if</span> <span class=p>(</span><span class=n>i</span> <span class=o>==</span> <span class=mi>0</span> <span class=o>&amp;&amp;</span> <span class=n>j</span> <span class=o>&gt;</span> <span class=mi>0</span><span class=p>)</span> <span class=p>{</span>
                    <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>+=</span> <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span> <span class=o>-</span> <span class=mi>1</span><span class=p>];</span>
                <span class=p>}</span>

                <span class=k>if</span> <span class=p>(</span><span class=n>j</span> <span class=o>==</span> <span class=mi>0</span> <span class=o>&amp;&amp;</span> <span class=n>i</span> <span class=o>&gt;</span> <span class=mi>0</span><span class=p>)</span> <span class=p>{</span>
                    <span class=n>f</span><span class=p>[</span><span class=n>curr</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>+=</span> <span class=n>f</span><span class=p>[</span><span class=n>prev</span><span class=p>][</span><span class=n>j</span><span class=p>];</span>
                <span class=p>}</span>

                <span class=k>if</span> <span class=p>(</span><span class=n>i</span> <span class=o>&gt;</span> <span class=mi>0</span> <span class=o>&amp;&amp;</span> <span class=n>j</span> <span class=o>&gt;</span> <span class=mi>0</span><span class=p>)</span> <span class=p>{</span>
                    <span class=n>f</span><span class=p>[</span><span class=n>curr</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>+=</span> <span class=n>min</span><span class=p>(</span><span class=n>f</span><span class=p>[</span><span class=n>prev</span><span class=p>][</span><span class=n>j</span><span class=p>],</span> <span class=n>f</span><span class=p>[</span><span class=n>curr</span><span class=p>][</span><span class=n>j</span> <span class=o>-</span> <span class=mi>1</span><span class=p>]);</span>
                <span class=p>}</span>

            <span class=p>}</span>
        <span class=p>}</span>

        <span class=k>return</span> <span class=n>f</span><span class=p>[</span><span class=n>curr</span><span class=p>][</span><span class=n>n</span> <span class=o>-</span> <span class=mi>1</span><span class=p>];</span>
    <span class=p>}</span>
<span class=p>};</span>
</code></pre></div> </div> </div> <div class="admonition note"> <p class=admonition-title>Note</p> <ol> <li>在处理二维坐标型DP问题的时候，对于第一行或者第一列的计算我们可以把它放到loop中。但是要加一个条件。 这个条件就是 <code>if (i &gt; 0)</code>, 这个条件保证了在更新数组值的时候下标不会越界。并且很好的诠释了我们的动机（就是对于第一行第一列仅仅是初始化)。</li> <li>对于1中提到的trick，另外一个好处就是对于第一行或者第一列条件判断的时候，这里还有一个技巧就是先把自身的‘性质’或者‘值’加上， 如果有上一行我们再去加上一行的‘性质’或‘值’。这里需要逆向思维.</li> <li>在多种情况需要分开讨论的时候我们可以先‘一票否决’最明显情况，然后讨论剩下的情况。</li> </ol> </div> <h3 id=bomb-enemy>Bomb Enemy<a class=headerlink href=#bomb-enemy title="Permanent link">&para;</a></h3> <ul> <li>Breakdown the problem into smaller (simpler) problems.</li> <li>Take the special steps (i.e. different properties of the cell) as normal ones in the loop, deal with the special step when doing the calculation.</li> </ul> <div class=highlight><pre><span></span><code><span class=k>class</span> <span class=nc>Solution</span> <span class=p>{</span>
<span class=k>public</span><span class=o>:</span>
    <span class=kt>int</span> <span class=n>maxKilledEnemies</span><span class=p>(</span><span class=n>vector</span><span class=o>&lt;</span><span class=n>vector</span><span class=o>&lt;</span><span class=kt>char</span><span class=o>&gt;&gt;&amp;</span> <span class=n>grid</span><span class=p>)</span> <span class=p>{</span>
        <span class=kt>int</span> <span class=n>m</span> <span class=o>=</span> <span class=n>grid</span><span class=p>.</span><span class=n>size</span><span class=p>();</span>
        <span class=k>if</span> <span class=p>(</span><span class=n>m</span> <span class=o>==</span> <span class=mi>0</span><span class=p>)</span> <span class=k>return</span> <span class=mi>0</span><span class=p>;</span>

        <span class=kt>int</span> <span class=n>n</span> <span class=o>=</span> <span class=n>grid</span><span class=p>[</span><span class=mi>0</span><span class=p>].</span><span class=n>size</span><span class=p>();</span>
        <span class=k>if</span> <span class=p>(</span><span class=n>n</span> <span class=o>==</span> <span class=mi>0</span><span class=p>)</span> <span class=k>return</span> <span class=mi>0</span><span class=p>;</span>

        <span class=kt>int</span> <span class=n>f</span><span class=p>[</span><span class=n>m</span><span class=p>][</span><span class=n>n</span><span class=p>];</span>
        <span class=kt>int</span> <span class=n>res</span><span class=p>[</span><span class=n>m</span><span class=p>][</span><span class=n>n</span><span class=p>];</span>
        <span class=kt>int</span> <span class=n>ret</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>

        <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>m</span><span class=p>;</span> <span class=n>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
            <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>j</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>j</span> <span class=o>&lt;</span> <span class=n>n</span><span class=p>;</span> <span class=n>j</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
                <span class=n>res</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
            <span class=p>}</span>
        <span class=p>}</span>

        <span class=cm>/* up */</span>
        <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>m</span><span class=p>;</span> <span class=n>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
            <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>j</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>j</span> <span class=o>&lt;</span> <span class=n>n</span><span class=p>;</span> <span class=n>j</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
                <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
                <span class=k>if</span> <span class=p>(</span><span class=n>grid</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>==</span> <span class=sc>&#39;W&#39;</span><span class=p>)</span> <span class=p>{</span>
                    <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
                <span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
                    <span class=k>if</span> <span class=p>(</span><span class=n>grid</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>==</span> <span class=sc>&#39;E&#39;</span><span class=p>)</span> <span class=p>{</span>
                        <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span>
                    <span class=p>}</span>

                    <span class=k>if</span> <span class=p>(</span><span class=n>i</span> <span class=o>&gt;</span> <span class=mi>0</span><span class=p>)</span> <span class=p>{</span>
                        <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>+=</span> <span class=n>f</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=mi>1</span><span class=p>][</span><span class=n>j</span><span class=p>];</span>
                    <span class=p>}</span>
                <span class=p>}</span>
                <span class=n>res</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>+=</span> <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>];</span>
            <span class=p>}</span>
        <span class=p>}</span>

        <span class=cm>/* down */</span>
        <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=n>m</span> <span class=o>-</span> <span class=mi>1</span><span class=p>;</span> <span class=n>i</span> <span class=o>&gt;=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>i</span><span class=o>--</span><span class=p>)</span> <span class=p>{</span>
            <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>j</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>j</span> <span class=o>&lt;</span> <span class=n>n</span><span class=p>;</span> <span class=n>j</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
                <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
                <span class=k>if</span> <span class=p>(</span><span class=n>grid</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>==</span> <span class=sc>&#39;W&#39;</span><span class=p>)</span> <span class=p>{</span>
                    <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
                <span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
                    <span class=k>if</span> <span class=p>(</span><span class=n>grid</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>==</span> <span class=sc>&#39;E&#39;</span><span class=p>)</span> <span class=p>{</span>
                        <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span>
                    <span class=p>}</span>

                    <span class=k>if</span> <span class=p>(</span><span class=n>i</span> <span class=o>&lt;</span> <span class=n>m</span> <span class=o>-</span> <span class=mi>1</span><span class=p>)</span> <span class=p>{</span>
                        <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>+=</span> <span class=n>f</span><span class=p>[</span><span class=n>i</span> <span class=o>+</span> <span class=mi>1</span><span class=p>][</span><span class=n>j</span><span class=p>];</span>
                    <span class=p>}</span>
                <span class=p>}</span>
                <span class=n>res</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>+=</span> <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>];</span>
            <span class=p>}</span>
        <span class=p>}</span>

        <span class=cm>/* left */</span>
        <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>m</span><span class=p>;</span> <span class=n>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
            <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>j</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>j</span> <span class=o>&lt;</span> <span class=n>n</span><span class=p>;</span> <span class=n>j</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
                <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
                <span class=k>if</span> <span class=p>(</span><span class=n>grid</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>==</span> <span class=sc>&#39;W&#39;</span><span class=p>)</span> <span class=p>{</span>
                    <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
                <span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
                    <span class=k>if</span> <span class=p>(</span><span class=n>grid</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>==</span> <span class=sc>&#39;E&#39;</span><span class=p>)</span> <span class=p>{</span>
                        <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span>
                    <span class=p>}</span>

                    <span class=k>if</span> <span class=p>(</span><span class=n>j</span> <span class=o>&gt;</span> <span class=mi>0</span><span class=p>)</span> <span class=p>{</span>
                        <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>+=</span> <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span> <span class=o>-</span> <span class=mi>1</span><span class=p>];</span>
                    <span class=p>}</span>
                <span class=p>}</span>
                <span class=n>res</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>+=</span> <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>];</span>
            <span class=p>}</span>
        <span class=p>}</span>

        <span class=cm>/* right */</span>
        <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>m</span><span class=p>;</span> <span class=n>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
            <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>j</span> <span class=o>=</span> <span class=n>n</span> <span class=o>-</span> <span class=mi>1</span><span class=p>;</span> <span class=n>j</span> <span class=o>&gt;=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>j</span><span class=o>--</span><span class=p>)</span> <span class=p>{</span>
                <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
                <span class=k>if</span> <span class=p>(</span><span class=n>grid</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>==</span> <span class=sc>&#39;W&#39;</span><span class=p>)</span> <span class=p>{</span>
                    <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
                <span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
                    <span class=k>if</span> <span class=p>(</span><span class=n>grid</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>==</span> <span class=sc>&#39;E&#39;</span><span class=p>)</span> <span class=p>{</span>
                        <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span>
                    <span class=p>}</span>

                    <span class=k>if</span> <span class=p>(</span><span class=n>j</span> <span class=o>&lt;</span> <span class=n>n</span> <span class=o>-</span> <span class=mi>1</span><span class=p>)</span> <span class=p>{</span>
                        <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>+=</span> <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span> <span class=o>+</span> <span class=mi>1</span><span class=p>];</span>
                    <span class=p>}</span>
                <span class=p>}</span>
                <span class=n>res</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>+=</span> <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>];</span>
            <span class=p>}</span>
        <span class=p>}</span>

        <span class=cm>/* calculate resutls */</span>
        <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>m</span><span class=p>;</span> <span class=n>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
            <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>j</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>j</span> <span class=o>&lt;</span> <span class=n>n</span><span class=p>;</span> <span class=n>j</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
                <span class=k>if</span> <span class=p>(</span><span class=n>grid</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>==</span> <span class=sc>&#39;0&#39;</span><span class=p>)</span>
                    <span class=k>if</span> <span class=p>(</span><span class=n>res</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>&gt;</span> <span class=n>ret</span><span class=p>)</span>
                        <span class=n>ret</span> <span class=o>=</span> <span class=n>res</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>];</span>
            <span class=p>}</span>
        <span class=p>}</span>

        <span class=k>return</span> <span class=n>ret</span><span class=p>;</span>
    <span class=p>}</span>
<span class=p>};</span>
</code></pre></div> <h3 id=counting-bits>Counting Bits<a class=headerlink href=#counting-bits title="Permanent link">&para;</a></h3> <ul> <li>Notice you can use the trick that <code>i &gt;&gt; 1 == i / 2</code> to construct the subproblem</li> </ul> <table> <thead> <tr> <th>i</th> <th>count 1 bits</th> </tr> </thead> <tbody> <tr> <td>1</td> <td>1</td> </tr> <tr> <td>2</td> <td>1</td> </tr> <tr> <td>3</td> <td>2</td> </tr> <tr> <td>6</td> <td>2</td> </tr> <tr> <td>12</td> <td>2</td> </tr> <tr> <td>25</td> <td>3</td> </tr> <tr> <td>50</td> <td>3</td> </tr> </tbody> </table> <div class=highlight><pre><span></span><code><span class=k>class</span> <span class=nc>Solution</span> <span class=p>{</span>
<span class=k>public</span><span class=o>:</span>
    <span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;</span> <span class=n>countBits</span><span class=p>(</span><span class=kt>int</span> <span class=n>num</span><span class=p>)</span> <span class=p>{</span>
        <span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;</span> <span class=n>f</span><span class=p>(</span><span class=n>num</span> <span class=o>+</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>0</span><span class=p>);</span>
        <span class=k>if</span> <span class=p>(</span><span class=n>num</span> <span class=o>==</span> <span class=mi>0</span><span class=p>)</span> <span class=p>{</span>
            <span class=k>return</span> <span class=n>f</span><span class=p>;</span>
        <span class=p>}</span>

        <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;=</span> <span class=n>num</span><span class=p>;</span> <span class=n>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
            <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>]</span> <span class=o>=</span> <span class=n>f</span><span class=p>[</span><span class=n>i</span> <span class=o>&gt;&gt;</span> <span class=mi>1</span><span class=p>]</span> <span class=o>+</span> <span class=p>(</span><span class=n>i</span> <span class=o>%</span> <span class=mi>2</span><span class=p>);</span>
        <span class=p>}</span>

        <span class=k>return</span> <span class=n>f</span><span class=p>;</span>
    <span class=p>}</span>
<span class=p>};</span>
</code></pre></div> <h2 id=lecture-3-dynamic-programming-on-sequences>Lecture 3 Dynamic Programming on Sequences<a class=headerlink href=#lecture-3-dynamic-programming-on-sequences title="Permanent link">&para;</a></h2> <table> <thead> <tr> <th>Problem</th> <th>Category</th> </tr> </thead> <tbody> <tr> <td><a href=#paint-house-ii>Paint House II</a></td> <td>序列型＋状态</td> </tr> <tr> <td><a href=#house-robber>House Robber</a></td> <td>序列型＋状态</td> </tr> <tr> <td><a href=#house-robber-ii>House Robber II</a></td> <td>序列型＋状态</td> </tr> <tr> <td><a href=#best-time-to-buy-and-sell-stock>Best Time to Buy and Sell Stock</a></td> <td></td> </tr> <tr> <td><a href=#best-time-to-buy-and-sell-stock-ii>Best Time to Buy and Sell Stock II</a></td> <td></td> </tr> <tr> <td><a href=#best-time-to-buy-and-sell-stock-iii>Best Time to Buy and Sell Stock III</a></td> <td>序列型＋状态</td> </tr> <tr> <td><a href=#best-time-to-buy-and-sell-stock-iv>Best Time to Buy and Sell Stock IV</a></td> <td>序列型＋状态</td> </tr> <tr> <td><a href=#longest-increasing-subsequence>Longest Increasing Subsequence</a></td> <td>序列型</td> </tr> <tr> <td><a href=#russian-doll-envelopes>Russian Doll Envelopes</a></td> <td></td> </tr> </tbody> </table> <h3 id=_2>序列型动态规划<a class=headerlink href=#_2 title="Permanent link">&para;</a></h3> <p>给定一个序列</p> <ol> <li>动态规划方程<code>f[i]</code>中的下标<code>i</code>表示前<code>i</code>个元素<code>a[0], a[1], ..., a[i-1]</code>的某种性质<ul> <li>坐标型的<code>f[i]</code>表示以<code>a[i]</code>为结尾的某种性质</li> </ul> </li> <li>初始化中，<code>f[0]</code>表示空序列的性质<ul> <li>坐标型动态规划的初始条件<code>f[0]</code>就是指以<code>a[0]</code>为结尾的子序列的性质</li> </ul> </li> </ol> <h3 id=paint-house-ii>Paint House II<a class=headerlink href=#paint-house-ii title="Permanent link">&para;</a></h3> <ul> <li>the solution could be the same as the first version, but it is <span><span class=MathJax_Preview>O(n\cdot k^2)</span><script type=math/tex>O(n\cdot k^2)</script></span>. how to make it <span><span class=MathJax_Preview>O(n\cdot k)</span><script type=math/tex>O(n\cdot k)</script></span>?</li> <li>By analyzing the state transition equation, we observed that we want to find a minimum value of a set of numbers except one for each house. Put it in English, the min cost to paint <code>i - 1</code>th house with color <code>k</code>, we want to have the min cost of painting all previous <code>i - 1</code> houses and the <code>i-1</code>th house cannot be painted as color <code>k</code>.</li> </ul> <div class=highlight><pre><span></span><code><span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=mi>1</span><span class=p>]</span> <span class=o>=</span> <span class=n>min</span><span class=p>{</span><span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=mi>-1</span><span class=p>][</span><span class=mi>2</span><span class=p>]</span> <span class=o>+</span> <span class=n>cost</span><span class=p>[</span><span class=n>i</span><span class=mi>-1</span><span class=p>][</span><span class=mi>1</span><span class=p>],</span> <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=mi>-1</span><span class=p>][</span><span class=mi>3</span><span class=p>]</span> <span class=o>+</span> <span class=n>cost</span><span class=p>[</span><span class=n>i</span><span class=mi>-1</span><span class=p>][</span><span class=mi>1</span><span class=p>],</span> <span class=p>...,</span> <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=mi>-1</span><span class=p>][</span><span class=n>K</span><span class=p>]</span> <span class=o>+</span> <span class=n>cost</span><span class=p>[</span><span class=n>i</span><span class=mi>-1</span><span class=p>][</span><span class=mi>1</span><span class=p>]}</span>
<span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=mi>2</span><span class=p>]</span> <span class=o>=</span> <span class=n>min</span><span class=p>{</span><span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=mi>-1</span><span class=p>][</span><span class=mi>1</span><span class=p>]</span> <span class=o>+</span> <span class=n>cost</span><span class=p>[</span><span class=n>i</span><span class=mi>-1</span><span class=p>][</span><span class=mi>2</span><span class=p>],</span> <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=mi>-1</span><span class=p>][</span><span class=mi>3</span><span class=p>]</span> <span class=o>+</span> <span class=n>cost</span><span class=p>[</span><span class=n>i</span><span class=mi>-1</span><span class=p>][</span><span class=mi>2</span><span class=p>],</span> <span class=p>...,</span> <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=mi>-1</span><span class=p>][</span><span class=n>K</span><span class=p>]</span> <span class=o>+</span> <span class=n>cost</span><span class=p>[</span><span class=n>i</span><span class=mi>-1</span><span class=p>][</span><span class=mi>2</span><span class=p>]}</span>
<span class=p>...</span>
<span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>K</span><span class=p>]</span> <span class=o>=</span> <span class=n>min</span><span class=p>{</span><span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=mi>-1</span><span class=p>][</span><span class=mi>1</span><span class=p>]</span> <span class=o>+</span> <span class=n>cost</span><span class=p>[</span><span class=n>i</span><span class=mi>-1</span><span class=p>][</span><span class=n>K</span><span class=p>],</span> <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=mi>-1</span><span class=p>][</span><span class=mi>2</span><span class=p>]</span> <span class=o>+</span> <span class=n>cost</span><span class=p>[</span><span class=n>i</span><span class=mi>-1</span><span class=p>][</span><span class=n>K</span><span class=p>],</span> <span class=p>...,</span> <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=mi>-1</span><span class=p>][</span><span class=n>K</span><span class=mi>-1</span><span class=p>]</span> <span class=o>+</span> <span class=n>cost</span><span class=p>[</span><span class=n>i</span><span class=mi>-1</span><span class=p>][</span><span class=n>K</span><span class=p>]}</span>
</code></pre></div> <ul> <li>We could optimize the solution upon this. Basically, we can maintain the first two minimum value of the set <code>f[i-1][1], f[i-1][2], f[i-1][3], ..., f[i-1][K]</code>, <code>min1</code> and <code>min2</code> and their index <code>j1</code> and <code>j2</code>.<ol> <li>There are two cases, the first case is the house <code>i-1</code> is painted with the same color correspoinding to the minimum value. in this case, we cannot chose to paint it with the color corresponding to the minimum cost, we can update the state using the second minimum.</li> <li>The second case is that we paint the i-1th house with color other than the color corresponding to the minimum cost to pain, we can update using the minimum value.</li> </ol> </li> </ul> <div class=tabbed-set data-tabs=6:2><input checked=checked id=__tabbed_6_1 name=__tabbed_6 type=radio><label for=__tabbed_6_1>C++ O(nk)</label><div class=tabbed-content> <div class=highlight><pre><span></span><code><span class=k>class</span> <span class=nc>Solution</span> <span class=p>{</span>
<span class=k>public</span><span class=o>:</span>
    <span class=cm>/**</span>
<span class=cm>    * @param costs n x k cost matrix</span>
<span class=cm>    * @return an integer, the minimum cost to paint all houses</span>
<span class=cm>    */</span>
    <span class=kt>int</span> <span class=n>minCostII</span><span class=p>(</span><span class=n>vector</span><span class=o>&lt;</span><span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;&gt;&amp;</span> <span class=n>costs</span><span class=p>)</span> <span class=p>{</span>
        <span class=kt>int</span> <span class=n>m</span> <span class=o>=</span> <span class=n>costs</span><span class=p>.</span><span class=n>size</span><span class=p>();</span>
        <span class=k>if</span> <span class=p>(</span><span class=n>m</span> <span class=o>==</span> <span class=mi>0</span><span class=p>)</span> <span class=k>return</span> <span class=mi>0</span><span class=p>;</span>
        <span class=kt>int</span> <span class=n>k</span> <span class=o>=</span> <span class=n>costs</span><span class=p>[</span><span class=mi>0</span><span class=p>].</span><span class=n>size</span><span class=p>();</span>
        <span class=k>if</span> <span class=p>(</span><span class=n>k</span> <span class=o>==</span> <span class=mi>0</span><span class=p>)</span> <span class=k>return</span> <span class=mi>0</span><span class=p>;</span>

        <span class=kt>int</span> <span class=n>f</span><span class=p>[</span><span class=n>m</span> <span class=o>+</span> <span class=mi>1</span><span class=p>][</span><span class=n>k</span><span class=p>];</span>

        <span class=kt>int</span> <span class=n>min1</span><span class=p>;</span>
        <span class=kt>int</span> <span class=n>min2</span><span class=p>;</span>
        <span class=kt>int</span> <span class=n>j1</span> <span class=o>=</span> <span class=mi>0</span><span class=p>,</span> <span class=n>j2</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>

        <span class=cm>/* init, 0 house cost nothing. */</span>
        <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>j</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>j</span> <span class=o>&lt;</span> <span class=n>k</span><span class=p>;</span> <span class=n>j</span><span class=o>++</span><span class=p>)</span>
            <span class=n>f</span><span class=p>[</span><span class=mi>0</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>

        <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;=</span> <span class=n>m</span><span class=p>;</span> <span class=n>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
            <span class=n>min1</span> <span class=o>=</span> <span class=n>min2</span> <span class=o>=</span> <span class=n>INT_MAX</span><span class=p>;</span>
            <span class=cm>/* from all the colors, find the min1 and min2 */</span>
            <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>j</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>j</span> <span class=o>&lt;</span> <span class=n>k</span><span class=p>;</span> <span class=n>j</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
                <span class=cm>/* get the min1 and min2 first */</span>
                <span class=k>if</span> <span class=p>(</span><span class=n>f</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=mi>1</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>&lt;</span> <span class=n>min1</span><span class=p>)</span> <span class=p>{</span>
                    <span class=n>min2</span> <span class=o>=</span> <span class=n>min1</span><span class=p>;</span>
                    <span class=n>j2</span> <span class=o>=</span> <span class=n>j1</span><span class=p>;</span>
                    <span class=n>min1</span> <span class=o>=</span> <span class=n>f</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=mi>1</span><span class=p>][</span><span class=n>j</span><span class=p>];</span>
                    <span class=n>j1</span> <span class=o>=</span> <span class=n>j</span><span class=p>;</span>
                <span class=p>}</span> <span class=k>else</span> <span class=k>if</span> <span class=p>(</span><span class=n>f</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=mi>1</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>&lt;</span> <span class=n>min2</span><span class=p>)</span> <span class=p>{</span>
                    <span class=n>min2</span> <span class=o>=</span> <span class=n>f</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=mi>1</span><span class=p>][</span><span class=n>j</span><span class=p>];</span>
                    <span class=n>j2</span> <span class=o>=</span> <span class=n>j</span><span class=p>;</span>
                <span class=p>}</span>
            <span class=p>}</span>

            <span class=cm>/* update the states based on the min1 and min2 */</span>
            <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>j</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>j</span> <span class=o>&lt;</span> <span class=n>k</span><span class=p>;</span> <span class=n>j</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
                <span class=k>if</span> <span class=p>(</span><span class=n>j</span> <span class=o>!=</span> <span class=n>j1</span><span class=p>)</span> <span class=p>{</span>
                    <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>=</span> <span class=n>f</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=mi>1</span><span class=p>][</span><span class=n>j1</span><span class=p>]</span> <span class=o>+</span> <span class=n>costs</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=mi>1</span><span class=p>][</span><span class=n>j</span><span class=p>];</span>
                <span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
                    <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>=</span> <span class=n>f</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=mi>1</span><span class=p>][</span><span class=n>j2</span><span class=p>]</span> <span class=o>+</span> <span class=n>costs</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=mi>1</span><span class=p>][</span><span class=n>j</span><span class=p>];</span>
                <span class=p>}</span>
            <span class=p>}</span>
        <span class=p>}</span>

        <span class=kt>int</span> <span class=n>res</span> <span class=o>=</span> <span class=n>INT_MAX</span><span class=p>;</span>
        <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>j</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>j</span> <span class=o>&lt;</span> <span class=n>k</span><span class=p>;</span> <span class=n>j</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
            <span class=k>if</span> <span class=p>(</span><span class=n>f</span><span class=p>[</span><span class=n>m</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>&lt;</span> <span class=n>res</span><span class=p>)</span>
                <span class=n>res</span> <span class=o>=</span> <span class=n>f</span><span class=p>[</span><span class=n>m</span><span class=p>][</span><span class=n>j</span><span class=p>];</span>
        <span class=p>}</span>

        <span class=k>return</span> <span class=n>res</span><span class=p>;</span>
    <span class=p>}</span>
<span class=p>};</span>
</code></pre></div> </div> <input id=__tabbed_6_2 name=__tabbed_6 type=radio><label for=__tabbed_6_2>C++ O(nk^2)</label><div class=tabbed-content> <div class=highlight><pre><span></span><code><span class=k>class</span> <span class=nc>Solution</span> <span class=p>{</span>
<span class=k>public</span><span class=o>:</span>
    <span class=kt>int</span> <span class=n>minCostII</span><span class=p>(</span><span class=n>vector</span><span class=o>&lt;</span><span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;&gt;&amp;</span> <span class=n>costs</span><span class=p>)</span> <span class=p>{</span>
        <span class=kt>int</span> <span class=n>n</span> <span class=o>=</span> <span class=n>costs</span><span class=p>.</span><span class=n>size</span><span class=p>();</span>
        <span class=kt>int</span> <span class=n>k</span> <span class=o>=</span> <span class=n>n</span> <span class=o>&gt;</span> <span class=mi>0</span> <span class=o>?</span> <span class=n>costs</span><span class=p>[</span><span class=mi>0</span><span class=p>].</span><span class=n>size</span><span class=p>()</span> <span class=o>:</span> <span class=mi>0</span><span class=p>;</span>
        <span class=k>if</span> <span class=p>(</span><span class=n>n</span> <span class=o>==</span> <span class=mi>0</span> <span class=o>&amp;&amp;</span> <span class=n>k</span> <span class=o>==</span> <span class=mi>0</span><span class=p>)</span>
            <span class=k>return</span> <span class=mi>0</span><span class=p>;</span>

        <span class=k>if</span> <span class=p>(</span><span class=n>n</span> <span class=o>==</span> <span class=mi>1</span> <span class=o>&amp;&amp;</span> <span class=n>k</span> <span class=o>==</span> <span class=mi>1</span><span class=p>)</span>
            <span class=k>return</span> <span class=n>costs</span><span class=p>[</span><span class=mi>0</span><span class=p>][</span><span class=mi>0</span><span class=p>];</span>

        <span class=n>vector</span><span class=o>&lt;</span><span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;&gt;</span> <span class=n>f</span><span class=p>(</span><span class=n>n</span> <span class=o>+</span> <span class=mi>1</span><span class=p>,</span> <span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;</span><span class=p>(</span><span class=n>k</span><span class=p>,</span> <span class=mi>0</span><span class=p>));</span>

        <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>k</span><span class=p>;</span> <span class=n>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
            <span class=n>f</span><span class=p>[</span><span class=mi>0</span><span class=p>][</span><span class=n>i</span><span class=p>]</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=c1>// 0 cost for 0 paint</span>
        <span class=p>}</span>

        <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;=</span> <span class=n>n</span><span class=p>;</span> <span class=n>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
            <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>j</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>j</span> <span class=o>&lt;</span> <span class=n>k</span><span class=p>;</span> <span class=n>j</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
                <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>=</span> <span class=n>INT_MAX</span><span class=p>;</span>
                <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>c</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>c</span> <span class=o>&lt;</span> <span class=n>k</span><span class=p>;</span> <span class=n>c</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
                    <span class=k>if</span> <span class=p>(</span><span class=n>j</span> <span class=o>==</span> <span class=n>c</span><span class=p>)</span> <span class=p>{</span>
                        <span class=k>continue</span><span class=p>;</span>
                    <span class=p>}</span>

                    <span class=k>if</span> <span class=p>(</span><span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>&gt;</span> <span class=n>f</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=mi>1</span><span class=p>][</span><span class=n>c</span><span class=p>]</span> <span class=o>+</span> <span class=n>costs</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=mi>1</span><span class=p>][</span><span class=n>j</span><span class=p>])</span> <span class=p>{</span>
                        <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>=</span> <span class=n>f</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=mi>1</span><span class=p>][</span><span class=n>c</span><span class=p>]</span> <span class=o>+</span> <span class=n>costs</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=mi>1</span><span class=p>][</span><span class=n>j</span><span class=p>];</span>
                    <span class=p>}</span>
                <span class=p>}</span>
            <span class=p>}</span>
        <span class=p>}</span>

        <span class=kt>int</span> <span class=n>res</span> <span class=o>=</span> <span class=n>INT_MAX</span><span class=p>;</span>
        <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>k</span><span class=p>;</span> <span class=n>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
            <span class=k>if</span> <span class=p>(</span><span class=n>f</span><span class=p>[</span><span class=n>n</span><span class=p>][</span><span class=n>i</span><span class=p>]</span> <span class=o>&lt;</span> <span class=n>res</span><span class=p>)</span>
                <span class=n>res</span> <span class=o>=</span> <span class=n>f</span><span class=p>[</span><span class=n>n</span><span class=p>][</span><span class=n>i</span><span class=p>];</span>
        <span class=p>}</span>

        <span class=k>return</span> <span class=n>res</span><span class=p>;</span>
    <span class=p>}</span>
<span class=p>};</span>
</code></pre></div> </div> </div> <h3 id=house-robber>House Robber<a class=headerlink href=#house-robber title="Permanent link">&para;</a></h3> <ul> <li>Start with the last step. The last house could be either robbed or not.<ol> <li>If the last house <code>a[i-1]</code> is robbed, then we cannot rob <code>a[i-2]</code>. we have <code>f[i] = f[i-2] + a[i-1]</code>.</li> <li>If the last house <code>a[i-1]</code> is not robbed, then we can rob <code>a[i-2]</code>. Alternatively, we can skip it to rob <code>a[i-3]</code>. We have <code>f[i] = f[n-1]</code>, in which this <code>f[n-1]</code> could not let us know whether <code>a[i-2]</code> is robbed or not.</li> </ol> </li> <li>We add the state of <code>a[i-1]</code> to the state transition equation. Thus we have:<ol> <li><code>f[i][0]</code> represent "the maximum money for robbing the first <code>i</code> houses and the last house <strong>hasn't</strong> been robbed."</li> <li><code>f[i][1]</code> represent "the maximum money for robbing the first <code>i</code> houses and the last house <strong>has</strong> been robbed."</li> </ol> </li> <li>state transition equations: <div class=highlight><pre><span></span><code>f[i][0] = max(f[i-1][0], f[i-1][1])
f[i][1] = f[i-1][0] + a[i-1]
</code></pre></div></li> </ul> <div class=tabbed-set data-tabs=7:2><input checked=checked id=__tabbed_7_1 name=__tabbed_7 type=radio><label for=__tabbed_7_1>C++</label><div class=tabbed-content> <div class=highlight><pre><span></span><code><span class=k>class</span> <span class=nc>Solution</span> <span class=p>{</span>
<span class=k>public</span><span class=o>:</span>
    <span class=kt>int</span> <span class=n>rob</span><span class=p>(</span><span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;&amp;</span> <span class=n>nums</span><span class=p>)</span> <span class=p>{</span>
        <span class=kt>int</span> <span class=n>n</span> <span class=o>=</span> <span class=n>nums</span><span class=p>.</span><span class=n>size</span><span class=p>();</span>
        <span class=k>if</span> <span class=p>(</span><span class=n>n</span> <span class=o>==</span> <span class=mi>0</span><span class=p>)</span>
            <span class=k>return</span> <span class=mi>0</span><span class=p>;</span>
        <span class=kt>int</span> <span class=n>f</span><span class=p>[</span><span class=n>n</span> <span class=o>+</span> <span class=mi>1</span><span class=p>][</span><span class=mi>2</span><span class=p>]</span> <span class=o>=</span> <span class=p>{</span><span class=mi>0</span><span class=p>};</span>

        <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;=</span> <span class=n>n</span><span class=p>;</span> <span class=n>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
            <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=mi>0</span><span class=p>]</span> <span class=o>=</span> <span class=n>max</span><span class=p>(</span><span class=n>f</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=mi>1</span><span class=p>][</span><span class=mi>0</span><span class=p>],</span> <span class=n>f</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=mi>1</span><span class=p>][</span><span class=mi>1</span><span class=p>]);</span>
            <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=mi>1</span><span class=p>]</span> <span class=o>=</span> <span class=n>f</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=mi>1</span><span class=p>][</span><span class=mi>0</span><span class=p>]</span> <span class=o>+</span> <span class=n>nums</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=mi>1</span><span class=p>];</span>
        <span class=p>}</span>

        <span class=k>return</span> <span class=n>max</span><span class=p>(</span><span class=n>f</span><span class=p>[</span><span class=n>n</span><span class=p>][</span><span class=mi>0</span><span class=p>],</span> <span class=n>f</span><span class=p>[</span><span class=n>n</span><span class=p>][</span><span class=mi>1</span><span class=p>]);</span>
    <span class=p>}</span>
<span class=p>};</span>
</code></pre></div> </div> <input id=__tabbed_7_2 name=__tabbed_7 type=radio><label for=__tabbed_7_2>C++ optimized</label><div class=tabbed-content> <div class=highlight><pre><span></span><code><span class=k>class</span> <span class=nc>Solution</span> <span class=p>{</span>
<span class=k>public</span><span class=o>:</span>
    <span class=kt>long</span> <span class=kt>long</span> <span class=n>houseRobber</span><span class=p>(</span><span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;</span> <span class=n>A</span><span class=p>)</span> <span class=p>{</span>
        <span class=kt>int</span> <span class=n>n</span> <span class=o>=</span> <span class=n>A</span><span class=p>.</span><span class=n>size</span><span class=p>();</span>
        <span class=k>if</span> <span class=p>(</span><span class=n>n</span> <span class=o>==</span> <span class=mi>0</span><span class=p>)</span> <span class=k>return</span> <span class=mi>0</span><span class=p>;</span>
        <span class=kt>long</span> <span class=kt>long</span> <span class=n>f</span><span class=p>[</span><span class=n>n</span><span class=o>+</span><span class=mi>1</span><span class=p>];</span>

        <span class=cm>/* init */</span>
        <span class=n>f</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
        <span class=n>f</span><span class=p>[</span><span class=mi>1</span><span class=p>]</span> <span class=o>=</span> <span class=n>A</span><span class=p>[</span><span class=mi>0</span><span class=p>];</span>

        <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>2</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;=</span> <span class=n>n</span><span class=p>;</span> <span class=n>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
            <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>]</span> <span class=o>=</span> <span class=n>max</span><span class=p>(</span><span class=n>f</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=mi>1</span><span class=p>],</span> <span class=n>f</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=mi>2</span><span class=p>]</span> <span class=o>+</span> <span class=n>A</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=mi>1</span><span class=p>]);</span>
        <span class=p>}</span>

        <span class=k>return</span> <span class=n>f</span><span class=p>[</span><span class=n>n</span><span class=p>];</span>
    <span class=p>}</span>
<span class=p>};</span>
</code></pre></div> </div> </div> <p>Solution 2</p> <ul> <li><code>yes</code> - first <code>i</code> days, robber last day,</li> <li><code>no</code> - first <code>i</code> days, not robber at last day.</li> </ul> <div class=highlight><pre><span></span><code><span class=k>class</span> <span class=nc>Solution</span> <span class=p>{</span>
<span class=k>public</span><span class=o>:</span>
    <span class=kt>int</span> <span class=n>rob</span><span class=p>(</span><span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;&amp;</span> <span class=n>nums</span><span class=p>)</span> <span class=p>{</span>
        <span class=kt>int</span> <span class=n>n</span> <span class=o>=</span> <span class=n>nums</span><span class=p>.</span><span class=n>size</span><span class=p>();</span>
        <span class=k>if</span> <span class=p>(</span><span class=n>n</span> <span class=o>==</span> <span class=mi>0</span><span class=p>)</span>
            <span class=k>return</span> <span class=mi>0</span><span class=p>;</span>
        <span class=kt>int</span> <span class=n>yes</span> <span class=o>=</span> <span class=mi>0</span><span class=p>,</span> <span class=n>no</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>

        <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;=</span> <span class=n>n</span><span class=p>;</span> <span class=n>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
            <span class=kt>int</span> <span class=n>tmp</span> <span class=o>=</span> <span class=n>no</span><span class=p>;</span>
            <span class=n>no</span> <span class=o>=</span> <span class=n>max</span><span class=p>(</span><span class=n>yes</span><span class=p>,</span> <span class=n>no</span><span class=p>);</span>
            <span class=n>yes</span> <span class=o>=</span> <span class=n>tmp</span> <span class=o>+</span> <span class=n>nums</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=mi>1</span><span class=p>];</span>
        <span class=p>}</span>

        <span class=k>return</span> <span class=n>max</span><span class=p>(</span><span class=n>yes</span><span class=p>,</span> <span class=n>no</span><span class=p>);</span>
    <span class=p>}</span>
<span class=p>};</span>
</code></pre></div> <h3 id=house-robber-ii>House Robber II<a class=headerlink href=#house-robber-ii title="Permanent link">&para;</a></h3> <ul> <li>Following <a href=#house-robber>House Robber</a>, when we try to analyze the last step, the house <code>i - 1</code> depends on the house <code>i - 2</code> and the house <code>0</code>. How could we handle this?</li> <li>We could enumerate two cases, and reduce the probelm to <a href=#house-robber>House Rober</a><ol> <li>house <code>0</code> is robbed and house <code>i-1</code> is not.</li> <li>house <code>i - 1</code> is robbed and house <code>0</code> is not.</li> </ol> </li> </ul> <div class=highlight><pre><span></span><code><span class=k>class</span> <span class=nc>Solution</span> <span class=p>{</span>
<span class=k>public</span><span class=o>:</span>
    <span class=kt>int</span> <span class=n>rob</span><span class=p>(</span><span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;&amp;</span> <span class=n>nums</span><span class=p>)</span> <span class=p>{</span>
        <span class=kt>int</span> <span class=n>n</span> <span class=o>=</span> <span class=n>nums</span><span class=p>.</span><span class=n>size</span><span class=p>();</span>
        <span class=k>if</span> <span class=p>(</span><span class=n>n</span> <span class=o>==</span> <span class=mi>0</span><span class=p>)</span>
            <span class=k>return</span> <span class=mi>0</span><span class=p>;</span>

        <span class=k>if</span> <span class=p>(</span><span class=n>n</span> <span class=o>==</span> <span class=mi>1</span><span class=p>)</span> <span class=c1>// edge case to deal with</span>
            <span class=k>return</span> <span class=n>nums</span><span class=p>[</span><span class=mi>0</span><span class=p>];</span>

        <span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;</span> <span class=n>nums1</span><span class=p>(</span><span class=n>nums</span><span class=p>.</span><span class=n>begin</span><span class=p>()</span> <span class=o>+</span> <span class=mi>1</span><span class=p>,</span> <span class=n>nums</span><span class=p>.</span><span class=n>end</span><span class=p>());</span>
        <span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;</span> <span class=n>nums2</span><span class=p>(</span><span class=n>nums</span><span class=p>.</span><span class=n>begin</span><span class=p>(),</span> <span class=n>nums</span><span class=p>.</span><span class=n>end</span><span class=p>()</span> <span class=o>-</span> <span class=mi>1</span><span class=p>);</span>

        <span class=k>return</span> <span class=n>max</span><span class=p>(</span><span class=n>rob_helper</span><span class=p>(</span><span class=n>nums1</span><span class=p>),</span> <span class=n>rob_helper</span><span class=p>(</span><span class=n>nums2</span><span class=p>));</span>
    <span class=p>}</span>

<span class=k>private</span><span class=o>:</span>
    <span class=kt>int</span> <span class=n>rob_helper</span><span class=p>(</span><span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;&amp;</span> <span class=n>A</span><span class=p>)</span> <span class=p>{</span>
        <span class=kt>int</span> <span class=n>n</span> <span class=o>=</span> <span class=n>A</span><span class=p>.</span><span class=n>size</span><span class=p>();</span>
        <span class=k>if</span> <span class=p>(</span><span class=n>n</span> <span class=o>==</span> <span class=mi>0</span><span class=p>)</span>
            <span class=k>return</span> <span class=mi>0</span><span class=p>;</span>
        <span class=kt>int</span> <span class=n>f</span><span class=p>[</span><span class=n>n</span><span class=o>+</span><span class=mi>1</span><span class=p>]</span> <span class=o>=</span> <span class=p>{</span><span class=mi>0</span><span class=p>};</span>

        <span class=n>f</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
        <span class=n>f</span><span class=p>[</span><span class=mi>1</span><span class=p>]</span> <span class=o>=</span> <span class=n>A</span><span class=p>[</span><span class=mi>0</span><span class=p>];</span>
        <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>2</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;=</span> <span class=n>n</span><span class=p>;</span> <span class=n>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
            <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>]</span> <span class=o>=</span> <span class=n>max</span><span class=p>(</span><span class=n>f</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=mi>1</span><span class=p>],</span> <span class=n>f</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=mi>2</span><span class=p>]</span> <span class=o>+</span> <span class=n>A</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=mi>1</span><span class=p>]);</span>
        <span class=p>}</span>

        <span class=k>return</span> <span class=n>f</span><span class=p>[</span><span class=n>n</span><span class=p>];</span>
    <span class=p>}</span>
<span class=p>};</span>
</code></pre></div> <h3 id=best-time-to-buy-and-sell-stock>Best Time to Buy and Sell Stock<a class=headerlink href=#best-time-to-buy-and-sell-stock title="Permanent link">&para;</a></h3> <ul> <li>Force youself to do it by only one pass. You'll find that you need two variables to record the minimum value currently found and the maximum profit currently found.</li> </ul> <div class=highlight><pre><span></span><code><span class=k>class</span> <span class=nc>Solution</span> <span class=p>{</span>
<span class=k>public</span><span class=o>:</span>
    <span class=kt>int</span> <span class=n>maxProfit</span><span class=p>(</span><span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;</span> <span class=o>&amp;</span><span class=n>prices</span><span class=p>)</span> <span class=p>{</span>
        <span class=kt>int</span> <span class=n>n</span> <span class=o>=</span> <span class=n>prices</span><span class=p>.</span><span class=n>size</span><span class=p>();</span>
        <span class=k>if</span> <span class=p>(</span><span class=n>n</span> <span class=o>==</span> <span class=mi>0</span><span class=p>)</span>
            <span class=k>return</span> <span class=mi>0</span><span class=p>;</span>

        <span class=kt>int</span> <span class=n>min_price</span> <span class=o>=</span> <span class=n>INT_MAX</span><span class=p>;</span>
        <span class=kt>int</span> <span class=n>max_profit</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>

        <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>n</span><span class=p>;</span> <span class=n>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
            <span class=k>if</span> <span class=p>(</span><span class=n>prices</span><span class=p>[</span><span class=n>i</span><span class=p>]</span> <span class=o>&lt;</span> <span class=n>min_price</span><span class=p>)</span> <span class=p>{</span>
                <span class=n>min_price</span> <span class=o>=</span> <span class=n>prices</span><span class=p>[</span><span class=n>i</span><span class=p>];</span>
            <span class=p>}</span> <span class=k>else</span> <span class=k>if</span> <span class=p>(</span><span class=n>prices</span><span class=p>[</span><span class=n>i</span><span class=p>]</span> <span class=o>-</span> <span class=n>min_price</span> <span class=o>&gt;</span> <span class=n>max_profit</span><span class=p>)</span> <span class=p>{</span>
                <span class=n>max_profit</span> <span class=o>=</span> <span class=n>prices</span><span class=p>[</span><span class=n>i</span><span class=p>]</span> <span class=o>-</span> <span class=n>min_price</span><span class=p>;</span>
            <span class=p>}</span>
        <span class=p>}</span>

        <span class=k>return</span> <span class=n>max_profit</span><span class=p>;</span>
    <span class=p>}</span>
<span class=p>};</span>
</code></pre></div> <h3 id=best-time-to-buy-and-sell-stock-ii>Best Time to Buy and Sell Stock II<a class=headerlink href=#best-time-to-buy-and-sell-stock-ii title="Permanent link">&para;</a></h3> <ul> <li>We can just buy and sell when ever the price is increased in a day.</li> <li>Once you can proof the day-by-day subproblem can form the solution. The solution becomes so easy.</li> </ul> <div class=tabbed-set data-tabs=8:2><input checked=checked id=__tabbed_8_1 name=__tabbed_8 type=radio><label for=__tabbed_8_1>C++</label><div class=tabbed-content> <div class=highlight><pre><span></span><code><span class=k>class</span> <span class=nc>Solution</span> <span class=p>{</span>
<span class=k>public</span><span class=o>:</span>
    <span class=kt>int</span> <span class=n>maxProfit</span><span class=p>(</span><span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;</span> <span class=o>&amp;</span><span class=n>prices</span><span class=p>)</span> <span class=p>{</span>
        <span class=kt>int</span> <span class=n>res</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
        <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>prices</span><span class=p>.</span><span class=n>size</span><span class=p>();</span> <span class=n>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
            <span class=k>if</span> <span class=p>(</span><span class=n>prices</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=mi>1</span><span class=p>]</span> <span class=o>&lt;</span> <span class=n>prices</span><span class=p>[</span><span class=n>i</span><span class=p>])</span>
                <span class=n>res</span> <span class=o>+=</span> <span class=n>prices</span><span class=p>[</span><span class=n>i</span><span class=p>]</span> <span class=o>-</span> <span class=n>prices</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=mi>1</span><span class=p>];</span>
        <span class=p>}</span>

        <span class=k>return</span> <span class=n>res</span><span class=p>;</span>
    <span class=p>}</span>
<span class=p>};</span>
</code></pre></div> </div> <input id=__tabbed_8_2 name=__tabbed_8 type=radio><label for=__tabbed_8_2>C++ Alternative</label><div class=tabbed-content> <div class=highlight><pre><span></span><code><span class=k>class</span> <span class=nc>Solution</span> <span class=p>{</span>
<span class=k>public</span><span class=o>:</span>
    <span class=kt>int</span> <span class=n>maxProfit</span><span class=p>(</span><span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;</span> <span class=o>&amp;</span><span class=n>prices</span><span class=p>)</span> <span class=p>{</span>
        <span class=kt>int</span> <span class=n>res</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
        <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>prices</span><span class=p>.</span><span class=n>size</span><span class=p>();</span> <span class=n>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
            <span class=n>res</span> <span class=o>+=</span> <span class=n>max</span><span class=p>(</span><span class=n>prices</span><span class=p>[</span><span class=n>i</span><span class=p>]</span> <span class=o>-</span> <span class=n>prices</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=mi>1</span><span class=p>],</span> <span class=mi>0</span><span class=p>)</span>
        <span class=p>}</span>

        <span class=k>return</span> <span class=n>res</span><span class=p>;</span>
    <span class=p>}</span>
<span class=p>};</span>
</code></pre></div> </div> </div> <h3 id=best-time-to-buy-and-sell-stock-iii>Best Time to Buy and Sell Stock III<a class=headerlink href=#best-time-to-buy-and-sell-stock-iii title="Permanent link">&para;</a></h3> <ul> <li>We can define 5 stages and write state transition equations based on it.</li> </ul> <p><img alt=buy-sell-stock-iii-sol src=../fig/buy-sell-stock-iii-sol.png></p> <div class=highlight><pre><span></span><code><span class=k>class</span> <span class=nc>Solution</span> <span class=p>{</span>
<span class=k>public</span><span class=o>:</span>
    <span class=cm>/**</span>
<span class=cm>     * @param prices: Given an integer array</span>
<span class=cm>     * @return: Maximum profit</span>
<span class=cm>     */</span>
    <span class=kt>int</span> <span class=n>maxProfit</span><span class=p>(</span><span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;</span> <span class=o>&amp;</span><span class=n>A</span><span class=p>)</span> <span class=p>{</span>
        <span class=kt>int</span> <span class=n>n</span> <span class=o>=</span> <span class=n>A</span><span class=p>.</span><span class=n>size</span><span class=p>();</span>
        <span class=k>if</span> <span class=p>(</span><span class=n>n</span> <span class=o>==</span> <span class=mi>0</span><span class=p>)</span> <span class=p>{</span>
            <span class=k>return</span> <span class=mi>0</span><span class=p>;</span>
        <span class=p>}</span>

        <span class=kt>int</span> <span class=n>f</span><span class=p>[</span><span class=n>n</span><span class=o>+</span><span class=mi>1</span><span class=p>][</span><span class=mi>6</span><span class=p>];</span>

        <span class=cm>/* init */</span>
        <span class=n>f</span><span class=p>[</span><span class=mi>0</span><span class=p>][</span><span class=mi>1</span><span class=p>]</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
        <span class=n>f</span><span class=p>[</span><span class=mi>0</span><span class=p>][</span><span class=mi>2</span><span class=p>]</span> <span class=o>=</span> <span class=n>f</span><span class=p>[</span><span class=mi>0</span><span class=p>][</span><span class=mi>3</span><span class=p>]</span> <span class=o>=</span> <span class=n>f</span><span class=p>[</span><span class=mi>0</span><span class=p>][</span><span class=mi>4</span><span class=p>]</span> <span class=o>=</span> <span class=n>f</span><span class=p>[</span><span class=mi>0</span><span class=p>][</span><span class=mi>5</span><span class=p>]</span> <span class=o>=</span> <span class=n>INT_MIN</span><span class=p>;</span>

        <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;=</span> <span class=n>n</span><span class=p>;</span> <span class=n>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
            <span class=c1>// stage 1, 3, 5:</span>
            <span class=c1>// f[i][j] = max{f[i - 1][j], f[i - 1][j - 1] + A[i - 1] - A[i - 2]}</span>
            <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>j</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span> <span class=n>j</span> <span class=o>&lt;=</span> <span class=mi>5</span><span class=p>;</span> <span class=n>j</span> <span class=o>+=</span> <span class=mi>2</span><span class=p>)</span> <span class=p>{</span>
                <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>=</span> <span class=n>f</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=mi>1</span><span class=p>][</span><span class=n>j</span><span class=p>];</span>
                <span class=k>if</span> <span class=p>(</span><span class=n>i</span> <span class=o>&gt;</span> <span class=mi>1</span> <span class=o>&amp;&amp;</span> <span class=n>j</span> <span class=o>&gt;</span> <span class=mi>1</span> <span class=o>&amp;&amp;</span> <span class=n>f</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=mi>1</span><span class=p>][</span><span class=n>j</span> <span class=o>-</span> <span class=mi>1</span><span class=p>]</span> <span class=o>!=</span> <span class=n>INT_MIN</span><span class=p>)</span> <span class=p>{</span>
                    <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>=</span> <span class=n>max</span><span class=p>(</span><span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>],</span> <span class=n>f</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=mi>1</span><span class=p>][</span><span class=n>j</span> <span class=o>-</span> <span class=mi>1</span><span class=p>]</span> <span class=o>+</span> <span class=n>A</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=mi>1</span><span class=p>]</span> <span class=o>-</span> <span class=n>A</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=mi>2</span><span class=p>]);</span>
                <span class=p>}</span>

            <span class=p>}</span>

            <span class=c1>// stage 2, 4:</span>
            <span class=c1>// f[i][j] = max{f[i - 1][j] + A[i - 1] - A[i - 2], f[i - 1][j - 1], f[i - 1][j - 2] + A[i - 1] - A[i - 2]}</span>
            <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>j</span> <span class=o>=</span> <span class=mi>2</span><span class=p>;</span> <span class=n>j</span> <span class=o>&lt;</span> <span class=mi>5</span><span class=p>;</span> <span class=n>j</span> <span class=o>+=</span> <span class=mi>2</span><span class=p>)</span> <span class=p>{</span>
                <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>=</span> <span class=n>f</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=mi>1</span><span class=p>][</span><span class=n>j</span> <span class=o>-</span> <span class=mi>1</span><span class=p>];</span>
                <span class=k>if</span> <span class=p>(</span><span class=n>i</span> <span class=o>&gt;</span> <span class=mi>1</span> <span class=o>&amp;&amp;</span> <span class=n>f</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=mi>1</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>!=</span> <span class=n>INT_MIN</span><span class=p>)</span> <span class=p>{</span>
                    <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>=</span> <span class=n>max</span><span class=p>(</span><span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>],</span> <span class=n>f</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=mi>1</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>+</span> <span class=n>A</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=mi>1</span><span class=p>]</span> <span class=o>-</span> <span class=n>A</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=mi>2</span><span class=p>]);</span>
                <span class=p>}</span>

                <span class=k>if</span> <span class=p>(</span><span class=n>i</span> <span class=o>&gt;</span> <span class=mi>1</span> <span class=o>&amp;&amp;</span> <span class=n>j</span> <span class=o>&gt;</span> <span class=mi>2</span> <span class=o>&amp;&amp;</span> <span class=n>f</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=mi>1</span><span class=p>][</span><span class=n>j</span> <span class=o>-</span> <span class=mi>2</span><span class=p>]</span> <span class=o>!=</span> <span class=n>INT_MIN</span><span class=p>)</span> <span class=p>{</span>
                    <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>=</span> <span class=n>max</span><span class=p>(</span><span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>],</span> <span class=n>f</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=mi>1</span><span class=p>][</span><span class=n>j</span> <span class=o>-</span> <span class=mi>2</span><span class=p>]</span> <span class=o>+</span> <span class=n>A</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=mi>1</span><span class=p>]</span> <span class=o>-</span> <span class=n>A</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=mi>2</span><span class=p>]);</span>
                <span class=p>}</span>
            <span class=p>}</span>
        <span class=p>}</span>

        <span class=k>return</span> <span class=n>max</span><span class=p>(</span><span class=n>f</span><span class=p>[</span><span class=n>n</span><span class=p>][</span><span class=mi>1</span><span class=p>],</span> <span class=n>max</span><span class=p>(</span><span class=n>f</span><span class=p>[</span><span class=n>n</span><span class=p>][</span><span class=mi>3</span><span class=p>],</span> <span class=n>f</span><span class=p>[</span><span class=n>n</span><span class=p>][</span><span class=mi>5</span><span class=p>]));</span>
    <span class=p>}</span>
<span class=p>};</span>
</code></pre></div> <h3 id=best-time-to-buy-and-sell-stock-iv>Best Time to Buy and Sell Stock IV<a class=headerlink href=#best-time-to-buy-and-sell-stock-iv title="Permanent link">&para;</a></h3> <ul> <li>If <code>k</code> is larger then <code>n/2</code>, it is equivalent to the II.</li> <li>This is a generalized solution from <a href=#best-time-to-buy-and-sell-stock-iii>Best Time to Buy and Sell Stock III</a>.</li> </ul> <div class=highlight><pre><span></span><code><span class=k>class</span> <span class=nc>Solution</span> <span class=p>{</span>
<span class=k>public</span><span class=o>:</span>
    <span class=kt>int</span> <span class=n>maxProfit</span><span class=p>(</span><span class=kt>int</span> <span class=n>K</span><span class=p>,</span> <span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;</span> <span class=o>&amp;</span><span class=n>A</span><span class=p>)</span> <span class=p>{</span>
        <span class=kt>int</span> <span class=n>n</span> <span class=o>=</span> <span class=n>A</span><span class=p>.</span><span class=n>size</span><span class=p>();</span>
        <span class=k>if</span> <span class=p>(</span><span class=n>n</span> <span class=o>==</span> <span class=mi>0</span><span class=p>)</span> <span class=p>{</span>
            <span class=k>return</span> <span class=mi>0</span><span class=p>;</span>
        <span class=p>}</span>

        <span class=kt>int</span> <span class=n>f</span><span class=p>[</span><span class=n>n</span><span class=o>+</span><span class=mi>1</span><span class=p>][</span><span class=mi>2</span> <span class=o>*</span> <span class=n>K</span> <span class=o>+</span> <span class=mi>1</span> <span class=o>+</span> <span class=mi>1</span><span class=p>];</span>

        <span class=cm>/* special case need to take care of */</span>
        <span class=k>if</span> <span class=p>(</span><span class=n>K</span> <span class=o>&gt;</span> <span class=p>(</span><span class=n>n</span> <span class=o>/</span> <span class=mi>2</span><span class=p>))</span> <span class=p>{</span>
            <span class=kt>int</span> <span class=n>res</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
            <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>i</span> <span class=o>+</span> <span class=mi>1</span> <span class=o>&lt;</span> <span class=n>n</span><span class=p>;</span> <span class=n>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
                <span class=k>if</span> <span class=p>(</span><span class=n>A</span><span class=p>[</span><span class=n>i</span> <span class=o>+</span> <span class=mi>1</span><span class=p>]</span> <span class=o>-</span> <span class=n>A</span><span class=p>[</span><span class=n>i</span><span class=p>]</span> <span class=o>&gt;</span> <span class=mi>0</span><span class=p>)</span> <span class=p>{</span>
                    <span class=n>res</span> <span class=o>+=</span> <span class=n>A</span><span class=p>[</span><span class=n>i</span> <span class=o>+</span> <span class=mi>1</span><span class=p>]</span> <span class=o>-</span> <span class=n>A</span><span class=p>[</span><span class=n>i</span><span class=p>];</span>
                <span class=p>}</span>
            <span class=p>}</span>
            <span class=k>return</span> <span class=n>res</span><span class=p>;</span>
        <span class=p>}</span>

        <span class=cm>/* init */</span>
        <span class=n>f</span><span class=p>[</span><span class=mi>0</span><span class=p>][</span><span class=mi>1</span><span class=p>]</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
        <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>k</span> <span class=o>=</span> <span class=mi>2</span><span class=p>;</span> <span class=n>k</span> <span class=o>&lt;=</span> <span class=mi>2</span> <span class=o>*</span> <span class=n>K</span> <span class=o>+</span> <span class=mi>1</span><span class=p>;</span> <span class=n>k</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
            <span class=n>f</span><span class=p>[</span><span class=mi>0</span><span class=p>][</span><span class=n>k</span><span class=p>]</span> <span class=o>=</span> <span class=n>INT_MIN</span><span class=p>;</span>
        <span class=p>}</span>

        <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;=</span> <span class=n>n</span><span class=p>;</span> <span class=n>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
            <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>j</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span> <span class=n>j</span> <span class=o>&lt;=</span> <span class=mi>2</span> <span class=o>*</span> <span class=n>K</span> <span class=o>+</span> <span class=mi>1</span><span class=p>;</span> <span class=n>j</span> <span class=o>+=</span> <span class=mi>2</span><span class=p>)</span> <span class=p>{</span>
                <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>=</span> <span class=n>f</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=mi>1</span><span class=p>][</span><span class=n>j</span><span class=p>];</span>
                <span class=k>if</span> <span class=p>(</span><span class=n>i</span> <span class=o>&gt;</span> <span class=mi>1</span> <span class=o>&amp;&amp;</span> <span class=n>j</span> <span class=o>&gt;</span> <span class=mi>1</span> <span class=o>&amp;&amp;</span> <span class=n>f</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=mi>1</span><span class=p>][</span><span class=n>j</span> <span class=o>-</span> <span class=mi>1</span><span class=p>]</span> <span class=o>!=</span> <span class=n>INT_MIN</span><span class=p>)</span> <span class=p>{</span>
                    <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>=</span> <span class=n>max</span><span class=p>(</span><span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>],</span> <span class=n>f</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=mi>1</span><span class=p>][</span><span class=n>j</span> <span class=o>-</span> <span class=mi>1</span><span class=p>]</span> <span class=o>+</span> <span class=n>A</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=mi>1</span><span class=p>]</span> <span class=o>-</span> <span class=n>A</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=mi>2</span><span class=p>]);</span>
                <span class=p>}</span>

            <span class=p>}</span>

            <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>j</span> <span class=o>=</span> <span class=mi>2</span><span class=p>;</span> <span class=n>j</span> <span class=o>&lt;</span> <span class=mi>2</span> <span class=o>*</span> <span class=n>K</span> <span class=o>+</span> <span class=mi>1</span><span class=p>;</span> <span class=n>j</span> <span class=o>+=</span> <span class=mi>2</span><span class=p>)</span> <span class=p>{</span>
                <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>=</span> <span class=n>f</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=mi>1</span><span class=p>][</span><span class=n>j</span> <span class=o>-</span> <span class=mi>1</span><span class=p>];</span>
                <span class=k>if</span> <span class=p>(</span><span class=n>i</span> <span class=o>&gt;</span> <span class=mi>1</span> <span class=o>&amp;&amp;</span> <span class=n>f</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=mi>1</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>!=</span> <span class=n>INT_MIN</span><span class=p>)</span> <span class=p>{</span>
                    <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>=</span> <span class=n>max</span><span class=p>(</span><span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>],</span> <span class=n>f</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=mi>1</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>+</span> <span class=n>A</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=mi>1</span><span class=p>]</span> <span class=o>-</span> <span class=n>A</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=mi>2</span><span class=p>]);</span>
                <span class=p>}</span>

                <span class=k>if</span> <span class=p>(</span><span class=n>i</span> <span class=o>&gt;</span> <span class=mi>1</span> <span class=o>&amp;&amp;</span> <span class=n>j</span> <span class=o>&gt;</span> <span class=mi>2</span> <span class=o>&amp;&amp;</span> <span class=n>f</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=mi>1</span><span class=p>][</span><span class=n>j</span> <span class=o>-</span> <span class=mi>2</span><span class=p>]</span> <span class=o>!=</span> <span class=n>INT_MIN</span><span class=p>)</span> <span class=p>{</span>
                    <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>=</span> <span class=n>max</span><span class=p>(</span><span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>],</span> <span class=n>f</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=mi>1</span><span class=p>][</span><span class=n>j</span> <span class=o>-</span> <span class=mi>2</span><span class=p>]</span> <span class=o>+</span> <span class=n>A</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=mi>1</span><span class=p>]</span> <span class=o>-</span> <span class=n>A</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=mi>2</span><span class=p>]);</span>
                <span class=p>}</span>
            <span class=p>}</span>
        <span class=p>}</span>

        <span class=kt>int</span> <span class=n>res</span> <span class=o>=</span> <span class=n>INT_MIN</span><span class=p>;</span>
        <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>j</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span> <span class=n>j</span> <span class=o>&lt;=</span> <span class=mi>2</span> <span class=o>*</span> <span class=n>K</span> <span class=o>+</span> <span class=mi>1</span><span class=p>;</span> <span class=n>j</span> <span class=o>+=</span> <span class=mi>2</span> <span class=p>)</span> <span class=p>{</span>
            <span class=k>if</span> <span class=p>(</span><span class=n>f</span><span class=p>[</span><span class=n>n</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>&gt;</span> <span class=n>res</span><span class=p>)</span>
                <span class=n>res</span> <span class=o>=</span> <span class=n>f</span><span class=p>[</span><span class=n>n</span><span class=p>][</span><span class=n>j</span><span class=p>];</span>
        <span class=p>}</span>

        <span class=k>return</span> <span class=n>res</span><span class=p>;</span>
    <span class=p>}</span>
<span class=p>};</span>
</code></pre></div> <h3 id=longest-increasing-subsequence>Longest Increasing Subsequence<a class=headerlink href=#longest-increasing-subsequence title="Permanent link">&para;</a></h3> <ul> <li>Comparing to the problem <a href=#longest-increasing-continuous-subsequence>Longest Increasing Continuous Subsequence</a>. If the subsequence is not continuous. we have to enumerate each of the previous element before <code>A[j]</code>.</li> </ul> <p>Solution 2 DP with binary search O(nlogn)</p> <ul> <li>To reduce the complexity, we can try to find if there is any redundant work we have been done. or some how we could use some order information to avoid some of the calculation.</li> <li>Focus on the real meaning of longest Increasing Subsequence. In fact, you are looking for the smallest value before <code>A[i]</code> that leads to the longest Increasing Subsequence so far.</li> <li>use the state <code>f[i]</code> to record the LIS of the array <code>A[0], ... A[i -1]</code>. If we are at <code>f[j], j &gt; i</code>, we are looking for the largest <code>f[i]</code> value that have the smallest <code>A[i]</code>.</li> </ul> <p>Solution 3 DP with binary search refactored</p> <ul> <li>In observing the fact that we can use extra space to keep the "minimum elements see so far from nums that is the last element of LIS for the different length of such LISes".</li> <li>Different from the regular DP solution, our extra space b is storing element from nums, and the element stored in b are not necessary in order.</li> <li>The index i of elements in b related to the length of a LIS whose last element is <code>a[i]</code>. specifically, <code>i + 1 = length(LIS)</code>.</li> </ul> <p>Solution 4 C++ using lower_bound</p> <ul> <li>We can use the <code>lower_bound</code> to replace the binary search routine in the above solution.</li> </ul> <div class=tabbed-set data-tabs=9:4><input checked=checked id=__tabbed_9_1 name=__tabbed_9 type=radio><label for=__tabbed_9_1>C++ DP O(n^2)</label><div class=tabbed-content> <div class=highlight><pre><span></span><code><span class=k>class</span> <span class=nc>Solution</span> <span class=p>{</span>
<span class=k>public</span><span class=o>:</span>
    <span class=kt>int</span> <span class=n>lengthOfLIS</span><span class=p>(</span><span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;&amp;</span> <span class=n>nums</span><span class=p>)</span> <span class=p>{</span>
        <span class=kt>int</span> <span class=n>n</span> <span class=o>=</span> <span class=n>nums</span><span class=p>.</span><span class=n>size</span><span class=p>();</span>
        <span class=k>if</span> <span class=p>(</span><span class=n>n</span> <span class=o>==</span> <span class=mi>0</span><span class=p>)</span>
            <span class=k>return</span> <span class=mi>0</span><span class=p>;</span>

        <span class=kt>int</span> <span class=n>res</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
        <span class=kt>int</span> <span class=n>f</span><span class=p>[</span><span class=n>n</span><span class=p>]</span> <span class=o>=</span> <span class=p>{</span><span class=mi>0</span><span class=p>};</span>

        <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>j</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>j</span> <span class=o>&lt;</span> <span class=n>n</span><span class=p>;</span> <span class=n>j</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
            <span class=cm>/* case 1: a[j] is the subsequence */</span>
            <span class=n>f</span><span class=p>[</span><span class=n>j</span><span class=p>]</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span>

            <span class=cm>/* case 2: LIS from a[0],...a[i] plus a[j] */</span>
            <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>j</span><span class=p>;</span> <span class=n>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
                <span class=k>if</span> <span class=p>(</span><span class=n>nums</span><span class=p>[</span><span class=n>i</span><span class=p>]</span> <span class=o>&lt;</span> <span class=n>nums</span><span class=p>[</span><span class=n>j</span><span class=p>]</span> <span class=o>&amp;&amp;</span> <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>]</span> <span class=o>+</span> <span class=mi>1</span> <span class=o>&gt;</span> <span class=n>f</span><span class=p>[</span><span class=n>j</span><span class=p>])</span>
                    <span class=n>f</span><span class=p>[</span><span class=n>j</span><span class=p>]</span> <span class=o>=</span> <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>]</span> <span class=o>+</span> <span class=mi>1</span><span class=p>;</span>
            <span class=p>}</span>
            <span class=n>res</span> <span class=o>=</span> <span class=n>max</span><span class=p>(</span><span class=n>res</span><span class=p>,</span> <span class=n>f</span><span class=p>[</span><span class=n>j</span><span class=p>]);</span>
        <span class=p>}</span>

        <span class=k>return</span> <span class=n>res</span><span class=p>;</span>
    <span class=p>}</span>
<span class=p>};</span>
</code></pre></div> </div> <input id=__tabbed_9_2 name=__tabbed_9 type=radio><label for=__tabbed_9_2>C++ DP with binary search O(nlogn)</label><div class=tabbed-content> <div class=highlight><pre><span></span><code><span class=k>class</span> <span class=nc>Solution</span> <span class=p>{</span>
<span class=k>public</span><span class=o>:</span>
    <span class=kt>int</span> <span class=n>longestIncreasingSubsequence</span><span class=p>(</span><span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;</span> <span class=n>nums</span><span class=p>)</span> <span class=p>{</span>
        <span class=kt>int</span> <span class=n>n</span> <span class=o>=</span> <span class=n>nums</span><span class=p>.</span><span class=n>size</span><span class=p>();</span>
        <span class=k>if</span> <span class=p>(</span><span class=n>n</span> <span class=o>==</span> <span class=mi>0</span><span class=p>)</span>
            <span class=k>return</span> <span class=mi>0</span><span class=p>;</span>

        <span class=c1>//int f[n];</span>
        <span class=c1>// b[i]: when f value is i, smallest a value (ending value)</span>
        <span class=kt>int</span> <span class=n>b</span><span class=p>[</span><span class=n>n</span> <span class=o>+</span> <span class=mi>1</span><span class=p>];</span>

        <span class=kt>int</span> <span class=n>top</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
        <span class=n>b</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span> <span class=o>=</span> <span class=n>INT_MIN</span><span class=p>;</span>
        <span class=c1>// O(n)</span>
        <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>n</span><span class=p>;</span> <span class=n>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
            <span class=c1>// b[0] ~ b[top]</span>
            <span class=c1>// last value b[j] which is smaller than A[i]</span>
            <span class=kt>int</span> <span class=n>start</span> <span class=o>=</span> <span class=mi>0</span><span class=p>,</span> <span class=n>end</span> <span class=o>=</span> <span class=n>top</span><span class=p>;</span>
            <span class=kt>int</span> <span class=n>mid</span><span class=p>;</span>
            <span class=kt>int</span> <span class=n>j</span><span class=p>;</span>

            <span class=c1>// O(lgn)</span>
            <span class=k>while</span> <span class=p>(</span><span class=n>start</span> <span class=o>&lt;=</span> <span class=n>end</span><span class=p>)</span> <span class=p>{</span>
                <span class=n>mid</span> <span class=o>=</span> <span class=n>start</span> <span class=o>+</span> <span class=p>(</span><span class=n>end</span> <span class=o>-</span> <span class=n>start</span><span class=p>)</span> <span class=o>/</span> <span class=mi>2</span><span class=p>;</span>
                <span class=k>if</span> <span class=p>(</span><span class=n>b</span><span class=p>[</span><span class=n>mid</span><span class=p>]</span> <span class=o>&lt;</span> <span class=n>nums</span><span class=p>[</span><span class=n>i</span><span class=p>])</span> <span class=p>{</span>
                    <span class=n>j</span> <span class=o>=</span> <span class=n>mid</span><span class=p>;</span>
                    <span class=n>start</span> <span class=o>=</span> <span class=n>mid</span> <span class=o>+</span> <span class=mi>1</span><span class=p>;</span>
                <span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
                    <span class=n>end</span> <span class=o>=</span> <span class=n>mid</span> <span class=o>-</span> <span class=mi>1</span><span class=p>;</span>
                <span class=p>}</span>
            <span class=p>}</span>
            <span class=c1>// b[i]: length is j (f value is j), smallest ending value.</span>
            <span class=c1>// A[i] is after it.</span>
            <span class=c1>// f[i] = j + 1</span>
            <span class=c1>// b[j + 1]: length is (j + 1), smallest ending value.</span>
            <span class=c1>// A[i]</span>
            <span class=c1>// B[j + 1] &gt;= A[i]</span>
            <span class=n>b</span><span class=p>[</span><span class=n>j</span> <span class=o>+</span> <span class=mi>1</span><span class=p>]</span> <span class=o>=</span> <span class=n>nums</span><span class=p>[</span><span class=n>i</span><span class=p>];</span>
            <span class=k>if</span> <span class=p>(</span><span class=n>j</span> <span class=o>+</span> <span class=mi>1</span> <span class=o>&gt;</span> <span class=n>top</span><span class=p>)</span> <span class=p>{</span>
                <span class=n>top</span> <span class=o>=</span> <span class=n>j</span> <span class=o>+</span> <span class=mi>1</span><span class=p>;</span>
            <span class=p>}</span>
        <span class=p>}</span>
        <span class=c1>// b[top] stores the smallest ending value for an LIS</span>
        <span class=k>return</span> <span class=n>top</span><span class=p>;</span>
    <span class=p>}</span>
<span class=p>};</span>
</code></pre></div> </div> <input id=__tabbed_9_3 name=__tabbed_9 type=radio><label for=__tabbed_9_3>DP with binary search refactored</label><div class=tabbed-content> <div class=highlight><pre><span></span><code><span class=k>class</span> <span class=nc>Solution</span> <span class=p>{</span>
<span class=k>public</span><span class=o>:</span>
    <span class=kt>int</span> <span class=n>lengthOfLIS</span><span class=p>(</span><span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;&amp;</span> <span class=n>nums</span><span class=p>)</span> <span class=p>{</span>
        <span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;</span> <span class=n>b</span><span class=p>;</span>

        <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>nums</span><span class=p>.</span><span class=n>size</span><span class=p>();</span> <span class=o>++</span><span class=n>i</span><span class=p>)</span> <span class=p>{</span>
            <span class=kt>int</span> <span class=n>begin</span> <span class=o>=</span> <span class=mi>0</span><span class=p>,</span> <span class=n>end</span> <span class=o>=</span> <span class=n>b</span><span class=p>.</span><span class=n>size</span><span class=p>();</span>
            <span class=k>while</span> <span class=p>(</span><span class=n>begin</span> <span class=o>!=</span> <span class=n>end</span><span class=p>)</span> <span class=p>{</span>
                <span class=kt>int</span> <span class=n>mid</span> <span class=o>=</span> <span class=n>begin</span> <span class=o>+</span> <span class=p>(</span><span class=n>end</span> <span class=o>-</span> <span class=n>begin</span><span class=p>)</span> <span class=o>/</span> <span class=mi>2</span><span class=p>;</span>
                <span class=k>if</span> <span class=p>(</span><span class=n>b</span><span class=p>[</span><span class=n>mid</span><span class=p>]</span> <span class=o>&lt;</span> <span class=n>nums</span><span class=p>[</span><span class=n>i</span><span class=p>])</span> <span class=p>{</span>
                    <span class=n>begin</span> <span class=o>=</span> <span class=n>mid</span> <span class=o>+</span> <span class=mi>1</span><span class=p>;</span>
                <span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
                    <span class=n>end</span> <span class=o>=</span> <span class=n>mid</span><span class=p>;</span>
                <span class=p>}</span>
            <span class=p>}</span>

            <span class=k>if</span> <span class=p>(</span><span class=n>begin</span> <span class=o>==</span> <span class=n>b</span><span class=p>.</span><span class=n>size</span><span class=p>())</span> <span class=c1>// nums[i] greater than all element in b</span>
                <span class=n>b</span><span class=p>.</span><span class=n>push_back</span><span class=p>(</span><span class=n>nums</span><span class=p>[</span><span class=n>i</span><span class=p>]);</span>
            <span class=k>else</span> <span class=c1>// begin point to next element no less than the target nums[i].</span>
                <span class=n>b</span><span class=p>[</span><span class=n>begin</span><span class=p>]</span> <span class=o>=</span> <span class=n>nums</span><span class=p>[</span><span class=n>i</span><span class=p>];</span>
        <span class=p>}</span>

        <span class=k>return</span> <span class=n>b</span><span class=p>.</span><span class=n>size</span><span class=p>();</span>
    <span class=p>}</span>
<span class=p>};</span>
</code></pre></div> </div> <input id=__tabbed_9_4 name=__tabbed_9 type=radio><label for=__tabbed_9_4>C++ using lower_bound</label><div class=tabbed-content> <div class=highlight><pre><span></span><code><span class=k>class</span> <span class=nc>Solution</span> <span class=p>{</span>
<span class=k>public</span><span class=o>:</span>
    <span class=kt>int</span> <span class=n>lengthOfLIS</span><span class=p>(</span><span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;&amp;</span> <span class=n>nums</span><span class=p>)</span> <span class=p>{</span>
        <span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;</span> <span class=n>b</span><span class=p>;</span>
        <span class=k>for</span> <span class=p>(</span><span class=k>auto</span> <span class=nl>a</span> <span class=p>:</span> <span class=n>nums</span><span class=p>)</span> <span class=p>{</span>
            <span class=k>auto</span> <span class=n>it</span> <span class=o>=</span> <span class=n>lower_bound</span><span class=p>(</span><span class=n>b</span><span class=p>.</span><span class=n>begin</span><span class=p>(),</span> <span class=n>b</span><span class=p>.</span><span class=n>end</span><span class=p>(),</span> <span class=n>a</span><span class=p>);</span>
            <span class=k>if</span> <span class=p>(</span><span class=n>it</span> <span class=o>==</span> <span class=n>b</span><span class=p>.</span><span class=n>end</span><span class=p>())</span> <span class=n>b</span><span class=p>.</span><span class=n>push_back</span><span class=p>(</span><span class=n>a</span><span class=p>);</span>
            <span class=k>else</span> <span class=o>*</span><span class=n>it</span> <span class=o>=</span> <span class=n>a</span><span class=p>;</span>
        <span class=p>}</span>

        <span class=k>return</span> <span class=n>b</span><span class=p>.</span><span class=n>size</span><span class=p>();</span>
    <span class=p>}</span>
<span class=p>};</span>
</code></pre></div> </div> </div> <h3 id=russian-doll-envelopes>Russian Doll Envelopes<a class=headerlink href=#russian-doll-envelopes title="Permanent link">&para;</a></h3> <ul> <li>Sort the vector in ascending order and identify the subproblem, apply DP.</li> <li>notice the sort is ascending, not descending.</li> <li>For the <code>O(nlogn)</code> solution, think of how to optimize the longest increasing subsequence for one dimension when the envelopes are sorted properly.</li> <li> <p>We use <code>b[k]</code> to record the <strong>smallest</strong> <code>A[i]</code> value that have length of <code>k</code> longest increasing subsequence. The reason behind this can be illustrated by the following example, when <code>i = 1</code>, we can forget <code>A[0] = 5</code>, because what ever LIS <code>A[0] = 5</code> can contribute to the LIS, <code>A[1] = 2</code> will be able to contribute.</p> <div class=highlight><pre><span></span><code>A[i] 5, 2, 3, 1, 4
f[i] 1, 1, 2, 2, 3
b[k] 5       (|k| = 1, i = 0)
b[k] 2       (|k| = 1, i = 1)
b[k] 2, 3    (|k| = 2, i = 2)
b[k] 2, 1    (|k| = 2, i = 3)
b[k] 2, 1, 4 (|k| = 2, i = 4)
</code></pre></div> </li> <li> <p>In iterating of <code>A[i]</code> we binary search to find the smaller value than <code>A[i]</code> in <code>b[k]</code> so far that this smaller value combined with <code>A[i]</code> will form a new LIS. To keep the loop invariant, we need to change <code>b[k]</code> by either modify the existing value in <code>b[k]</code> or add a new value to the end.</p> </li> </ul> <div class=tabbed-set data-tabs=10:2><input checked=checked id=__tabbed_10_1 name=__tabbed_10 type=radio><label for=__tabbed_10_1>C++ DP O(n^2)</label><div class=tabbed-content> <div class=highlight><pre><span></span><code><span class=k>class</span> <span class=nc>Solution</span> <span class=p>{</span>
<span class=k>public</span><span class=o>:</span>
    <span class=kt>int</span> <span class=n>maxEnvelopes</span><span class=p>(</span><span class=n>vector</span><span class=o>&lt;</span><span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;&gt;&amp;</span> <span class=n>envelopes</span><span class=p>)</span> <span class=p>{</span>
    <span class=kt>int</span> <span class=n>n</span> <span class=o>=</span> <span class=n>envelopes</span><span class=p>.</span><span class=n>size</span><span class=p>();</span>
    <span class=kt>int</span> <span class=n>f</span><span class=p>[</span><span class=n>n</span><span class=p>];</span>
    <span class=kt>int</span> <span class=n>res</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>

    <span class=n>sort</span><span class=p>(</span><span class=n>envelopes</span><span class=p>.</span><span class=n>begin</span><span class=p>(),</span> <span class=n>envelopes</span><span class=p>.</span><span class=n>end</span><span class=p>(),</span> <span class=p>[](</span><span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;&amp;</span> <span class=n>a</span><span class=p>,</span> <span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;&amp;</span> <span class=n>b</span><span class=p>){</span>
        <span class=k>if</span> <span class=p>(</span><span class=n>a</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span><span class=o>==</span> <span class=n>b</span><span class=p>[</span><span class=mi>0</span><span class=p>])</span> <span class=p>{</span>
            <span class=k>return</span> <span class=n>a</span><span class=p>[</span><span class=mi>1</span><span class=p>]</span> <span class=o>&lt;</span> <span class=n>b</span><span class=p>[</span><span class=mi>1</span><span class=p>];</span>
        <span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
            <span class=k>return</span> <span class=n>a</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span> <span class=o>&lt;</span> <span class=n>b</span><span class=p>[</span><span class=mi>0</span><span class=p>];</span>
        <span class=p>}</span>
    <span class=p>});</span>

    <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>n</span><span class=p>;</span> <span class=o>++</span><span class=n>i</span><span class=p>)</span> <span class=p>{</span>
        <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>]</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span>
        <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>j</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>j</span> <span class=o>&lt;</span> <span class=n>i</span><span class=p>;</span> <span class=o>++</span><span class=n>j</span><span class=p>)</span> <span class=p>{</span>
            <span class=k>if</span> <span class=p>(</span><span class=n>envelopes</span><span class=p>[</span><span class=n>j</span><span class=p>][</span><span class=mi>0</span><span class=p>]</span> <span class=o>&lt;</span> <span class=n>envelopes</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=mi>0</span><span class=p>]</span> <span class=o>&amp;&amp;</span> <span class=n>envelopes</span><span class=p>[</span><span class=n>j</span><span class=p>][</span><span class=mi>0</span><span class=p>]</span> <span class=o>&lt;</span> <span class=n>envelopes</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=mi>0</span><span class=p>])</span> <span class=p>{</span>
                <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>]</span> <span class=o>=</span> <span class=n>max</span><span class=p>(</span><span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>],</span> <span class=n>f</span><span class=p>[</span><span class=n>j</span><span class=p>]</span> <span class=o>+</span> <span class=mi>1</span><span class=p>);</span>
            <span class=p>}</span>
        <span class=p>}</span>
        <span class=n>res</span> <span class=o>=</span> <span class=n>max</span><span class=p>(</span><span class=n>res</span><span class=p>,</span> <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>]);</span>
    <span class=p>}</span>

    <span class=k>return</span> <span class=n>res</span><span class=p>;</span>
    <span class=p>}</span>
<span class=p>};</span>
</code></pre></div> </div> <input id=__tabbed_10_2 name=__tabbed_10 type=radio><label for=__tabbed_10_2>C++ DP (nlogn)</label><div class=tabbed-content> <div class=highlight><pre><span></span><code><span class=k>class</span> <span class=nc>Solution</span> <span class=p>{</span>
<span class=k>public</span><span class=o>:</span>
    <span class=kt>int</span> <span class=n>maxEnvelopes</span><span class=p>(</span><span class=n>vector</span><span class=o>&lt;</span><span class=n>pair</span><span class=o>&lt;</span><span class=kt>int</span><span class=p>,</span> <span class=kt>int</span><span class=o>&gt;&gt;&amp;</span> <span class=n>envelopes</span><span class=p>)</span> <span class=p>{</span>
        <span class=kt>int</span> <span class=n>n</span> <span class=o>=</span> <span class=n>envelopes</span><span class=p>.</span><span class=n>size</span><span class=p>();</span>
        <span class=k>if</span> <span class=p>(</span><span class=n>n</span> <span class=o>==</span> <span class=mi>0</span><span class=p>)</span>
            <span class=k>return</span> <span class=mi>0</span><span class=p>;</span>

        <span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;</span> <span class=n>f</span><span class=p>;</span>

        <span class=n>sort</span><span class=p>(</span><span class=n>envelopes</span><span class=p>.</span><span class=n>begin</span><span class=p>(),</span> <span class=n>envelopes</span><span class=p>.</span><span class=n>end</span><span class=p>(),</span> <span class=p>[](</span><span class=k>const</span> <span class=n>pair</span><span class=o>&lt;</span><span class=kt>int</span><span class=p>,</span> <span class=kt>int</span><span class=o>&gt;</span> <span class=n>a</span><span class=p>,</span> <span class=k>const</span> <span class=n>pair</span><span class=o>&lt;</span><span class=kt>int</span><span class=p>,</span> <span class=kt>int</span><span class=o>&gt;</span> <span class=n>b</span><span class=p>)</span> <span class=p>{</span>
            <span class=k>if</span> <span class=p>(</span><span class=n>a</span><span class=p>.</span><span class=n>first</span> <span class=o>==</span> <span class=n>b</span><span class=p>.</span><span class=n>first</span><span class=p>)</span> <span class=p>{</span>
                <span class=k>return</span> <span class=n>a</span><span class=p>.</span><span class=n>second</span> <span class=o>&gt;</span> <span class=n>b</span><span class=p>.</span><span class=n>second</span><span class=p>;</span>
            <span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
                <span class=k>return</span> <span class=n>a</span><span class=p>.</span><span class=n>first</span> <span class=o>&lt;</span> <span class=n>b</span><span class=p>.</span><span class=n>first</span><span class=p>;</span>
            <span class=p>}</span>
        <span class=p>});</span>

        <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>n</span><span class=p>;</span> <span class=o>++</span><span class=n>i</span><span class=p>)</span> <span class=p>{</span>
            <span class=kt>int</span> <span class=n>t</span> <span class=o>=</span> <span class=n>envelopes</span><span class=p>[</span><span class=n>i</span><span class=p>].</span><span class=n>second</span><span class=p>;</span>
            <span class=kt>int</span> <span class=n>begin</span> <span class=o>=</span> <span class=mi>0</span><span class=p>,</span> <span class=n>end</span> <span class=o>=</span> <span class=n>f</span><span class=p>.</span><span class=n>size</span><span class=p>();</span> <span class=c1>// f start with empty</span>

            <span class=c1>// when i = 0, the binary search will not happen, first value will</span>
            <span class=c1>// be added to f before binary search on it.</span>
            <span class=k>while</span> <span class=p>(</span><span class=n>begin</span> <span class=o>&lt;</span> <span class=n>end</span><span class=p>)</span> <span class=p>{</span>
                <span class=kt>int</span> <span class=n>mid</span> <span class=o>=</span> <span class=n>begin</span> <span class=o>+</span> <span class=p>(</span><span class=n>end</span> <span class=o>-</span> <span class=n>begin</span><span class=p>)</span> <span class=o>/</span> <span class=mi>2</span><span class=p>;</span>
                <span class=k>if</span> <span class=p>(</span><span class=n>f</span><span class=p>[</span><span class=n>mid</span><span class=p>]</span> <span class=o>&lt;</span> <span class=n>t</span><span class=p>)</span> <span class=p>{</span>
                    <span class=n>begin</span> <span class=o>=</span> <span class=n>mid</span> <span class=o>+</span> <span class=mi>1</span><span class=p>;</span>
                <span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
                    <span class=n>end</span> <span class=o>=</span> <span class=n>mid</span><span class=p>;</span>
                <span class=p>}</span>
            <span class=p>}</span>

            <span class=k>if</span> <span class=p>(</span><span class=n>begin</span> <span class=o>==</span> <span class=n>f</span><span class=p>.</span><span class=n>size</span><span class=p>())</span> <span class=p>{</span>
                <span class=n>f</span><span class=p>.</span><span class=n>push_back</span><span class=p>(</span><span class=n>t</span><span class=p>);</span>
            <span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
                <span class=n>f</span><span class=p>[</span><span class=n>begin</span><span class=p>]</span> <span class=o>=</span> <span class=n>t</span><span class=p>;</span> <span class=c1>// index to f is related to the result</span>
            <span class=p>}</span>
        <span class=p>}</span>

        <span class=k>return</span> <span class=n>f</span><span class=p>.</span><span class=n>size</span><span class=p>();</span>
    <span class=p>}</span>
<span class=p>};</span>
</code></pre></div> </div> </div> <h2 id=lecture-4>Lecture 4<a class=headerlink href=#lecture-4 title="Permanent link">&para;</a></h2> <table> <thead> <tr> <th>Problem</th> <th>category</th> </tr> </thead> <tbody> <tr> <td><a href=#perfect-square>Perfect Squares</a></td> <td>划分型／序列型</td> </tr> <tr> <td><a href=#palindrome-partitioning-ii>Palindrome Partitioning II</a></td> <td>划分型</td> </tr> <tr> <td><a href=#copy-books>Copy Books</a></td> <td>划分型</td> </tr> <tr> <td><a href=#coins-in-a-line>Coins in A Line</a></td> <td>博弈型</td> </tr> <tr> <td><a href=#Backpack>Backpack</a></td> <td>背包型</td> </tr> <tr> <td><a href=#backpack-v>Backpack V</a></td> <td>背包型</td> </tr> <tr> <td><a href=#backpack-vi>Backpack VI</a></td> <td>背包型</td> </tr> </tbody> </table> <h3 id=perfect-squares>Perfect Squares<a class=headerlink href=#perfect-squares title="Permanent link">&para;</a></h3> <ul> <li><span><span class=MathJax_Preview>f[i] = \min_{1 \le j^2 \le i}(f[i - j^2] + 1)</span><script type=math/tex>f[i] = \min_{1 \le j^2 \le i}(f[i - j^2] + 1)</script></span> 整体思想就是枚举<code>j</code>.</li> <li>本题分析时像划分型但程序写起来像序列型。还是从最后一步入手。设最后一个是<span><span class=MathJax_Preview>j^2</span><script type=math/tex>j^2</script></span>.</li> <li>整体思想就是枚举最后一步<code>j</code>. 注意初始化 <code>f[i]</code>. <code>j*j</code> 可以是<code>i</code>, 这个正好对应了极端情况 就是 <code>i</code> 只由 <code>j*j</code> 组成.</li> <li>if condition 无需检查 <code>f[i - j*j]</code> 是否为<code>INT_MAX</code>. 因为这里比<code>i</code>小的 <code>i - j*j</code> 总是可以由完全平方数1组成。相比较题目 Coin Change 这道题，这一步可能性检查必不可少，因为在 <a href=#coin-change>Coin Change</a> 中某一面值不一定能被兑换成给定面值的硬币。我们用无穷大来标记。</li> </ul> <div class=tabbed-set data-tabs=11:2><input checked=checked id=__tabbed_11_1 name=__tabbed_11 type=radio><label for=__tabbed_11_1>C++ DP</label><div class=tabbed-content> <div class=highlight><pre><span></span><code><span class=k>class</span> <span class=nc>Solution</span> <span class=p>{</span>
<span class=k>public</span><span class=o>:</span>
    <span class=kt>int</span> <span class=n>numSquares</span><span class=p>(</span><span class=kt>int</span> <span class=n>n</span><span class=p>)</span> <span class=p>{</span>
        <span class=k>if</span> <span class=p>(</span><span class=n>n</span> <span class=o>==</span> <span class=mi>0</span><span class=p>)</span>
            <span class=k>return</span> <span class=mi>0</span><span class=p>;</span>

        <span class=kt>int</span> <span class=n>f</span><span class=p>[</span><span class=n>n</span><span class=o>+</span><span class=mi>1</span><span class=p>]</span> <span class=o>=</span> <span class=p>{</span><span class=mi>0</span><span class=p>};</span>
        <span class=n>f</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
        <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;=</span> <span class=n>n</span><span class=p>;</span> <span class=n>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
            <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>]</span> <span class=o>=</span> <span class=n>INT_MAX</span><span class=p>;</span>
            <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>j</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span> <span class=n>j</span> <span class=o>*</span> <span class=n>j</span> <span class=o>&lt;=</span> <span class=n>i</span><span class=p>;</span> <span class=n>j</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
                <span class=k>if</span> <span class=p>(</span><span class=n>f</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=n>j</span><span class=o>*</span><span class=n>j</span><span class=p>]</span> <span class=o>+</span> <span class=mi>1</span> <span class=o>&lt;</span> <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>])</span> <span class=p>{</span>
                    <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>]</span> <span class=o>=</span> <span class=n>f</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=n>j</span><span class=o>*</span><span class=n>j</span><span class=p>]</span> <span class=o>+</span> <span class=mi>1</span><span class=p>;</span>
                <span class=p>}</span>
            <span class=p>}</span>
        <span class=p>}</span>
        <span class=k>return</span> <span class=n>f</span><span class=p>[</span><span class=n>n</span><span class=p>];</span>
    <span class=p>}</span>
<span class=p>};</span>
</code></pre></div> </div> <input id=__tabbed_11_2 name=__tabbed_11 type=radio><label for=__tabbed_11_2>C++ Python</label><div class=tabbed-content> <div class=highlight><pre><span></span><code><span class=k>class</span> <span class=nc>Solution</span><span class=p>:</span>
    <span class=k>def</span> <span class=nf>numSquares</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>n</span><span class=p>:</span> <span class=nb>int</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>int</span><span class=p>:</span>
        <span class=k>if</span> <span class=n>n</span> <span class=o>==</span> <span class=mi>0</span><span class=p>:</span>
            <span class=k>return</span> <span class=mi>0</span>

        <span class=n>f</span> <span class=o>=</span> <span class=p>[</span><span class=mi>0</span><span class=p>]</span> <span class=o>*</span> <span class=p>(</span><span class=n>n</span> <span class=o>+</span> <span class=mi>1</span><span class=p>)</span>
        <span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=n>n</span> <span class=o>+</span> <span class=mi>1</span><span class=p>):</span>
            <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>]</span> <span class=o>=</span> <span class=nb>float</span><span class=p>(</span><span class=s1>&#39;inf&#39;</span><span class=p>)</span>
            <span class=k>for</span> <span class=n>j</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=nb>int</span><span class=p>(</span><span class=n>sqrt</span><span class=p>(</span><span class=n>i</span><span class=p>))</span> <span class=o>+</span> <span class=mi>1</span><span class=p>):</span>
                <span class=k>if</span> <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>]</span> <span class=o>&gt;</span> <span class=n>f</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=n>j</span><span class=o>*</span><span class=n>j</span><span class=p>]</span> <span class=o>+</span> <span class=mi>1</span><span class=p>:</span>
                    <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>]</span> <span class=o>=</span> <span class=n>f</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=n>j</span><span class=o>*</span><span class=n>j</span><span class=p>]</span> <span class=o>+</span> <span class=mi>1</span>
        <span class=k>return</span> <span class=n>f</span><span class=p>[</span><span class=n>n</span><span class=p>]</span>
</code></pre></div> </div> </div> <h3 id=palindrome-partitioning-ii>Palindrome Partitioning II<a class=headerlink href=#palindrome-partitioning-ii title="Permanent link">&para;</a></h3> <ul> <li>Consider the last palindrome <code>s[j, ..., i - 1]</code>, <code>f[i]</code> represent the minimum number of partitions of first <code>i</code> characters.</li> <li>State transition equation: <span><span class=MathJax_Preview>f[i] = \min_{0 \le j \lt i}(f[j]+1 | (s[j],..., s[i-1]) \text{ is palindrome})</span><script type=math/tex>f[i] = \min_{0 \le j \lt i}(f[j]+1 | (s[j],..., s[i-1]) \text{ is palindrome})</script></span></li> <li>To know the substr <code>s[j, ... i-1]</code> is a palindrome or not, we can first find and record all the panlidrome substring in <code>isPalin[i][j]</code>, each element of which represents whether substr <code>s[i, ..., j]</code> is a palindrome or not.</li> </ul> <div class=tabbed-set data-tabs=12:1><input checked=checked id=__tabbed_12_1 name=__tabbed_12 type=radio><label for=__tabbed_12_1>C++ DP with isPalin()</label><div class=tabbed-content></div> </div> <div class=highlight><pre><span></span><code><span class=k>class</span> <span class=nc>Solution</span> <span class=p>{</span>
<span class=k>public</span><span class=o>:</span>
    <span class=kt>int</span> <span class=n>minCut</span><span class=p>(</span><span class=n>string</span> <span class=n>s</span><span class=p>)</span> <span class=p>{</span>
        <span class=kt>int</span> <span class=n>n</span> <span class=o>=</span> <span class=n>s</span><span class=p>.</span><span class=n>length</span><span class=p>();</span>
        <span class=k>if</span> <span class=p>(</span><span class=n>n</span> <span class=o>==</span> <span class=mi>0</span><span class=p>)</span>
            <span class=k>return</span> <span class=mi>0</span><span class=p>;</span>

        <span class=kt>int</span> <span class=n>isPalin</span><span class=p>[</span><span class=n>n</span><span class=p>][</span><span class=n>n</span><span class=p>];</span>
        <span class=kt>int</span> <span class=n>f</span><span class=p>[</span><span class=n>n</span> <span class=o>+</span> <span class=mi>1</span><span class=p>];</span>
        <span class=n>f</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>

        <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>n</span><span class=p>;</span> <span class=n>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
            <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>j</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>j</span> <span class=o>&lt;</span> <span class=n>n</span><span class=p>;</span> <span class=n>j</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
                <span class=n>isPalin</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
            <span class=p>}</span>
        <span class=p>}</span>

        <span class=cm>/* calculate palindrome */</span>
        <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>t</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>t</span> <span class=o>&lt;</span> <span class=n>n</span><span class=p>;</span> <span class=n>t</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
            <span class=cm>/* odd case */</span>
            <span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=n>t</span><span class=p>;</span>
            <span class=kt>int</span> <span class=n>j</span> <span class=o>=</span> <span class=n>t</span><span class=p>;</span>
            <span class=k>while</span> <span class=p>(</span><span class=n>i</span> <span class=o>&gt;=</span> <span class=mi>0</span> <span class=o>&amp;&amp;</span> <span class=n>j</span> <span class=o>&lt;</span> <span class=n>n</span> <span class=o>&amp;&amp;</span> <span class=n>s</span><span class=p>[</span><span class=n>i</span><span class=p>]</span> <span class=o>==</span> <span class=n>s</span><span class=p>[</span><span class=n>j</span><span class=p>])</span> <span class=p>{</span>
                <span class=n>isPalin</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span>
                <span class=n>i</span><span class=o>--</span><span class=p>;</span>
                <span class=n>j</span><span class=o>++</span><span class=p>;</span>
            <span class=p>}</span>

            <span class=cm>/* even case */</span>
            <span class=n>i</span> <span class=o>=</span> <span class=n>t</span><span class=p>;</span>
            <span class=n>j</span> <span class=o>=</span> <span class=n>t</span> <span class=o>+</span> <span class=mi>1</span><span class=p>;</span>
            <span class=k>while</span> <span class=p>(</span><span class=n>i</span> <span class=o>&gt;=</span> <span class=mi>0</span> <span class=o>&amp;&amp;</span> <span class=n>j</span> <span class=o>&lt;</span> <span class=n>n</span> <span class=o>&amp;&amp;</span> <span class=n>s</span><span class=p>[</span><span class=n>i</span><span class=p>]</span> <span class=o>==</span> <span class=n>s</span><span class=p>[</span><span class=n>j</span><span class=p>])</span> <span class=p>{</span>
                <span class=n>isPalin</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span>
                <span class=n>i</span><span class=o>--</span><span class=p>;</span>
                <span class=n>j</span><span class=o>++</span><span class=p>;</span>
            <span class=p>}</span>
        <span class=p>}</span>

        <span class=cm>/* calculate the states */</span>
        <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;=</span> <span class=n>n</span><span class=p>;</span> <span class=n>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
            <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>]</span> <span class=o>=</span> <span class=n>INT_MAX</span><span class=p>;</span>
            <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>j</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>j</span> <span class=o>&lt;</span> <span class=n>i</span><span class=p>;</span> <span class=n>j</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
                <span class=k>if</span> <span class=p>(</span><span class=n>isPalin</span><span class=p>[</span><span class=n>j</span><span class=p>][</span><span class=n>i</span> <span class=o>-</span> <span class=mi>1</span><span class=p>])</span> <span class=p>{</span>
                    <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>]</span> <span class=o>=</span> <span class=n>min</span><span class=p>(</span><span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>],</span> <span class=n>f</span><span class=p>[</span><span class=n>j</span><span class=p>]</span> <span class=o>+</span> <span class=mi>1</span><span class=p>);</span>
                <span class=p>}</span>
            <span class=p>}</span>
        <span class=p>}</span>

        <span class=k>return</span> <span class=n>f</span><span class=p>[</span><span class=n>n</span><span class=p>]</span> <span class=o>-</span> <span class=mi>1</span><span class=p>;</span>
    <span class=p>}</span>
<span class=p>};</span>
</code></pre></div> <div class=tabbed-set data-tabs=13:1><input checked=checked id=__tabbed_13_1 name=__tabbed_13 type=radio><label for=__tabbed_13_1>Java isPalin()</label><div class=tabbed-content></div> </div> <div class=highlight><pre><span></span><code><span class=kd>public</span> <span class=kd>class</span> <span class=nc>Solution</span> <span class=p>{</span>
    <span class=cm>/**</span>
<span class=cm>     * @param s a string</span>
<span class=cm>     * @ f[i], minmum cut of s[0],...s[i - 1]</span>
<span class=cm>     * e.g.</span>
<span class=cm>     *      a a b a a</span>
<span class=cm>     *    j=0 1 2 3 4</span>
<span class=cm>     *i=0 a 1 1 0</span>
<span class=cm>     *  1 a   1 0</span>
<span class=cm>     *  2 b     1 0</span>
<span class=cm>     *  3 a       1 0</span>
<span class=cm>     *  4 a         1</span>
<span class=cm>     *</span>
<span class=cm>     * when calculate isPalin[i][j], we need to know isPalin[i + 1][j + 1].</span>
<span class=cm>     * Cannot calculate from i = 0, 1, ... have to go from i = n - 1, n - 2, ... 1, 0</span>
<span class=cm>     * last step: s[j],...s[i - 1]</span>
<span class=cm>     * f[i] = f[j] + 1 | s[j], ... s[i - 1] is palindrome</span>
<span class=cm>     */</span>
    <span class=kd>public</span> <span class=kt>int</span> <span class=nf>minCut</span><span class=p>(</span><span class=n>String</span> <span class=n>ss</span><span class=p>)</span> <span class=p>{</span>
        <span class=kt>char</span><span class=o>[]</span> <span class=n>s</span> <span class=o>=</span> <span class=n>ss</span><span class=p>.</span><span class=na>toCharArray</span><span class=p>();</span>
        <span class=kt>int</span> <span class=n>n</span> <span class=o>=</span> <span class=n>s</span><span class=p>.</span><span class=na>length</span><span class=p>;</span>
        <span class=k>if</span> <span class=p>(</span><span class=n>n</span> <span class=o>==</span> <span class=mi>0</span><span class=p>)</span>
            <span class=k>return</span> <span class=mi>0</span><span class=p>;</span>

        <span class=kt>boolean</span><span class=o>[][]</span> <span class=n>isPalin</span> <span class=o>=</span> <span class=k>new</span> <span class=kt>boolean</span><span class=o>[</span><span class=n>n</span><span class=o>][</span><span class=n>n</span><span class=o>]</span><span class=p>;</span>

        <span class=kt>int</span><span class=o>[]</span> <span class=n>f</span> <span class=o>=</span> <span class=k>new</span> <span class=kt>int</span><span class=o>[</span><span class=n>n</span> <span class=o>+</span> <span class=mi>1</span><span class=o>]</span><span class=p>;</span>

        <span class=n>f</span><span class=o>[</span><span class=mi>0</span><span class=o>]</span> <span class=o>=</span> <span class=o>-</span><span class=mi>1</span><span class=p>;</span>

        <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>n</span><span class=p>;</span> <span class=n>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
            <span class=n>isPalin</span><span class=o>[</span><span class=n>i</span><span class=o>][</span><span class=n>i</span><span class=o>]</span> <span class=o>=</span> <span class=kc>true</span><span class=p>;</span>
            <span class=k>if</span> <span class=p>(</span><span class=n>i</span> <span class=o>+</span> <span class=mi>1</span> <span class=o>&lt;</span> <span class=n>n</span><span class=p>)</span> <span class=p>{</span>
                <span class=n>isPalin</span><span class=o>[</span><span class=n>i</span><span class=o>][</span><span class=n>i</span> <span class=o>+</span> <span class=mi>1</span><span class=o>]</span> <span class=o>=</span> <span class=n>s</span><span class=o>[</span><span class=n>i</span><span class=o>]</span> <span class=o>==</span> <span class=n>s</span><span class=o>[</span><span class=n>i</span> <span class=o>+</span> <span class=mi>1</span><span class=o>]</span><span class=p>;</span>
            <span class=p>}</span>
        <span class=p>}</span>

        <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=n>n</span> <span class=o>-</span> <span class=mi>3</span><span class=p>;</span> <span class=n>i</span> <span class=o>&gt;=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>i</span><span class=o>--</span><span class=p>)</span> <span class=p>{</span>
            <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>j</span> <span class=o>=</span> <span class=n>i</span> <span class=o>+</span> <span class=mi>2</span><span class=p>;</span> <span class=n>j</span> <span class=o>&lt;</span> <span class=n>n</span><span class=p>;</span> <span class=n>j</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
                <span class=n>isPalin</span><span class=o>[</span><span class=n>i</span><span class=o>][</span><span class=n>j</span><span class=o>]</span> <span class=o>=</span> <span class=n>isPalin</span><span class=o>[</span><span class=n>i</span> <span class=o>+</span> <span class=mi>1</span><span class=o>][</span><span class=n>j</span> <span class=o>-</span> <span class=mi>1</span><span class=o>]</span> <span class=o>&amp;&amp;</span> <span class=n>s</span><span class=o>[</span><span class=n>i</span><span class=o>]</span> <span class=o>==</span> <span class=n>s</span><span class=o>[</span><span class=n>j</span><span class=o>]</span><span class=p>;</span>
            <span class=p>}</span>
        <span class=p>}</span>

        <span class=cm>/* calculate the states */</span>
        <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;=</span> <span class=n>n</span><span class=p>;</span> <span class=n>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
            <span class=n>f</span><span class=o>[</span><span class=n>i</span><span class=o>]</span> <span class=o>=</span> <span class=n>i</span> <span class=o>-</span> <span class=mi>1</span><span class=p>;</span>
            <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>j</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>j</span> <span class=o>&lt;</span> <span class=n>i</span><span class=p>;</span> <span class=n>j</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
                <span class=k>if</span> <span class=p>(</span><span class=n>isPalin</span><span class=o>[</span><span class=n>j</span><span class=o>][</span><span class=n>i</span> <span class=o>-</span> <span class=mi>1</span><span class=o>]</span><span class=p>)</span> <span class=p>{</span>
                    <span class=n>f</span><span class=o>[</span><span class=n>i</span><span class=o>]</span> <span class=o>=</span> <span class=n>Math</span><span class=p>.</span><span class=na>min</span><span class=p>(</span><span class=n>f</span><span class=o>[</span><span class=n>i</span><span class=o>]</span><span class=p>,</span> <span class=n>f</span><span class=o>[</span><span class=n>j</span><span class=o>]</span> <span class=o>+</span> <span class=mi>1</span><span class=p>);</span>
                <span class=p>}</span>
            <span class=p>}</span>
        <span class=p>}</span>

        <span class=k>return</span> <span class=n>f</span><span class=o>[</span><span class=n>n</span><span class=o>]</span><span class=p>;</span>
    <span class=p>}</span>
<span class=p>};</span>
</code></pre></div> <div class="admonition warning"> <p class=admonition-title>Warning</p> <p>这个方法C++不能通过Leetcode和lintcode，主要是对于很长的string，<code>isPalin</code>会很大。类似于 <a href=#best-time-to-buy-and-sell-stock-iv>Best Time to Buy and Sell Stock IV</a> 中如果k很大的时候。Java版本则可以。</p> </div> <div class="admonition note"> <p class=admonition-title>Note</p> <p>技巧：在循环中需要某个性质，而这个性质又是可以很容易计算和记录 (isPalin) 我们就采用先计算所有并记录，在loop中去直接访问符合条件的结果即可。</p> </div> <h3 id=copy-books>Copy Books<a class=headerlink href=#copy-books title="Permanent link">&para;</a></h3> <h3 id=coins-in-a-line>Coins in A Line<a class=headerlink href=#coins-in-a-line title="Permanent link">&para;</a></h3> <ul> <li>要有先手“必胜”和“必败”的概念。简单来讲就是当前先手面对当前局势如果有一招能使下轮先手必败 那么当前选手就必胜。如果当前选手面对当前局势下所有招数都会使得下轮先手必胜，那么当前选手必败。</li> <li><code>f[i]</code>表示当前选手必胜(True)或必败(False).</li> <li>State transition equation: <span><span class=MathJax_Preview>f[i] = f[i - 1] == \text{false}\ OR\ f[i - 2] == \text{false}</span><script type=math/tex>f[i] = f[i - 1] == \text{false}\ OR\ f[i - 2] == \text{false}</script></span></li> <li>此题注意初始条件和必胜和必败的概念就不会有什么差错。</li> </ul> <p><img alt=coins-in-a-line src=../fig/coins-in-a-line.png></p> <div class=tabbed-set data-tabs=14:2><input checked=checked id=__tabbed_14_1 name=__tabbed_14 type=radio><label for=__tabbed_14_1>DB solution</label><div class=tabbed-content> <div class=highlight><pre><span></span><code><span class=k>class</span> <span class=nc>Solution</span> <span class=p>{</span>
<span class=k>public</span><span class=o>:</span>
    <span class=kt>bool</span> <span class=n>firstWillWin</span><span class=p>(</span><span class=kt>int</span> <span class=n>n</span><span class=p>)</span> <span class=p>{</span>
        <span class=k>if</span> <span class=p>(</span><span class=n>n</span> <span class=o>==</span> <span class=mi>0</span><span class=p>)</span>
            <span class=k>return</span> <span class=nb>false</span><span class=p>;</span>

        <span class=kt>bool</span> <span class=n>f</span><span class=p>[</span><span class=n>n</span><span class=p>];</span>
        <span class=n>f</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span> <span class=o>=</span> <span class=nb>false</span><span class=p>;</span>

        <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;=</span> <span class=mi>2</span><span class=p>;</span> <span class=n>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
            <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>]</span> <span class=o>=</span> <span class=nb>true</span><span class=p>;</span>
        <span class=p>}</span>

        <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>3</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;=</span> <span class=n>n</span><span class=p>;</span> <span class=n>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
            <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>]</span> <span class=o>=</span>  <span class=p>(</span><span class=n>f</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=mi>1</span><span class=p>]</span> <span class=o>==</span> <span class=nb>false</span><span class=p>)</span> <span class=o>||</span> <span class=p>(</span><span class=n>f</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=mi>2</span><span class=p>]</span> <span class=o>==</span> <span class=nb>false</span><span class=p>);</span>
        <span class=p>}</span>

        <span class=k>return</span> <span class=n>f</span><span class=p>[</span><span class=n>n</span><span class=p>];</span>
    <span class=p>}</span>
<span class=p>};</span>
</code></pre></div> </div> <input id=__tabbed_14_2 name=__tabbed_14 type=radio><label for=__tabbed_14_2>Math solution</label><div class=tabbed-content> <div class=highlight><pre><span></span><code><span class=c1>// You can actualy found the pattern if you have written several states. f[i] = i % 3</span>
<span class=c1>// 0 1 2 3 4 5 6 7 8 9 10</span>
<span class=c1>// F T T F T T F T T F T</span>
<span class=k>class</span> <span class=nc>Solution</span> <span class=p>{</span>
<span class=k>public</span><span class=o>:</span>
    <span class=kt>bool</span> <span class=n>firstWillWin</span><span class=p>(</span><span class=kt>int</span> <span class=n>n</span><span class=p>)</span> <span class=p>{</span>
        <span class=k>return</span> <span class=n>n</span> <span class=o>%</span> <span class=mi>3</span><span class=p>;</span>
    <span class=p>}</span>
<span class=p>};</span>
</code></pre></div> </div> </div> <h3 id=backpack>Backpack<a class=headerlink href=#backpack title="Permanent link">&para;</a></h3> <ul> <li>Give <code>n</code> items with size <code>A[i]</code> and backpack size: <code>M</code>. Find the max total size that can fit in the backpack.</li> <li>We can reduce the size of f to two rolls. We can even reduce it to just one dimention. same technique can also be used in Backpack II and Backpack V.</li> </ul> <div class=tabbed-set data-tabs=15:2><input checked=checked id=__tabbed_15_1 name=__tabbed_15 type=radio><label for=__tabbed_15_1>C++ DP</label><div class=tabbed-content> <div class=highlight><pre><span></span><code><span class=k>class</span> <span class=nc>Solution</span> <span class=p>{</span>
<span class=k>public</span><span class=o>:</span>
    <span class=kt>int</span> <span class=n>backPack</span><span class=p>(</span><span class=kt>int</span> <span class=n>m</span><span class=p>,</span> <span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;</span> <span class=n>A</span><span class=p>)</span> <span class=p>{</span>
        <span class=kt>int</span> <span class=n>n</span> <span class=o>=</span> <span class=n>A</span><span class=p>.</span><span class=n>size</span><span class=p>();</span>
        <span class=k>if</span> <span class=p>(</span><span class=n>n</span> <span class=o>==</span> <span class=mi>0</span><span class=p>)</span>
            <span class=k>return</span> <span class=mi>0</span><span class=p>;</span>

        <span class=kt>bool</span> <span class=n>f</span><span class=p>[</span><span class=n>n</span> <span class=o>+</span> <span class=mi>1</span><span class=p>][</span><span class=n>m</span> <span class=o>+</span> <span class=mi>1</span><span class=p>];</span>

        <span class=cm>/* init */</span>
        <span class=n>f</span><span class=p>[</span><span class=mi>0</span><span class=p>][</span><span class=mi>0</span><span class=p>]</span> <span class=o>=</span> <span class=nb>true</span><span class=p>;</span>
        <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>j</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span> <span class=n>j</span> <span class=o>&lt;=</span> <span class=n>m</span><span class=p>;</span> <span class=n>j</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
            <span class=n>f</span><span class=p>[</span><span class=mi>0</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>=</span> <span class=nb>false</span><span class=p>;</span>
        <span class=p>}</span>

        <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;=</span> <span class=n>n</span><span class=p>;</span> <span class=n>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
            <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>j</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>j</span> <span class=o>&lt;=</span> <span class=n>m</span><span class=p>;</span> <span class=n>j</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
                <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>=</span> <span class=n>f</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=mi>1</span><span class=p>][</span><span class=n>j</span><span class=p>];</span> <span class=cm>/* must first init f[i][j] */</span>
                <span class=k>if</span> <span class=p>(</span><span class=n>j</span> <span class=o>&gt;=</span> <span class=n>A</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=mi>1</span><span class=p>])</span> <span class=p>{</span>
                    <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>=</span> <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>||</span> <span class=n>f</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=mi>1</span><span class=p>][</span><span class=n>j</span> <span class=o>-</span> <span class=n>A</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=mi>1</span><span class=p>]];</span>
                    <span class=c1>//f[i][j] = f[i - 1][j] || f[i - 1][j - A[i - 1]]; /* this is wrong */</span>
                <span class=p>}</span>
            <span class=p>}</span>
        <span class=p>}</span>

        <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>j</span> <span class=o>=</span> <span class=n>m</span><span class=p>;</span> <span class=n>j</span> <span class=o>&gt;=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>j</span><span class=o>--</span><span class=p>)</span> <span class=p>{</span>
            <span class=k>if</span> <span class=p>(</span><span class=n>f</span><span class=p>[</span><span class=n>n</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>==</span> <span class=nb>true</span><span class=p>)</span>
                <span class=k>return</span> <span class=n>j</span><span class=p>;</span>
        <span class=p>}</span>

        <span class=k>return</span> <span class=mi>0</span><span class=p>;</span>
    <span class=p>}</span>
<span class=p>};</span>
</code></pre></div> </div> <input id=__tabbed_15_2 name=__tabbed_15 type=radio><label for=__tabbed_15_2>C++ DP log(n) space</label><div class=tabbed-content> <div class=highlight><pre><span></span><code><span class=k>class</span> <span class=nc>Solution</span> <span class=p>{</span>
<span class=k>public</span><span class=o>:</span>
    <span class=kt>int</span> <span class=n>backPack</span><span class=p>(</span><span class=kt>int</span> <span class=n>m</span><span class=p>,</span> <span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;</span> <span class=n>A</span><span class=p>)</span> <span class=p>{</span>
        <span class=kt>int</span> <span class=n>n</span> <span class=o>=</span> <span class=n>A</span><span class=p>.</span><span class=n>size</span><span class=p>();</span>
        <span class=k>if</span> <span class=p>(</span><span class=n>n</span> <span class=o>==</span> <span class=mi>0</span><span class=p>)</span>
            <span class=k>return</span> <span class=mi>0</span><span class=p>;</span>

        <span class=kt>bool</span> <span class=n>f</span><span class=p>[</span><span class=n>m</span> <span class=o>+</span> <span class=mi>1</span><span class=p>];</span>

        <span class=cm>/* init */</span>
        <span class=n>f</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span> <span class=o>=</span> <span class=nb>true</span><span class=p>;</span>
        <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>j</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span> <span class=n>j</span> <span class=o>&lt;=</span> <span class=n>m</span><span class=p>;</span> <span class=n>j</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
            <span class=n>f</span><span class=p>[</span><span class=n>j</span><span class=p>]</span> <span class=o>=</span> <span class=nb>false</span><span class=p>;</span>
        <span class=p>}</span>

        <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;=</span> <span class=n>n</span><span class=p>;</span> <span class=n>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
            <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>j</span> <span class=o>=</span> <span class=n>m</span><span class=p>;</span> <span class=n>j</span> <span class=o>&gt;=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>j</span><span class=o>--</span><span class=p>)</span> <span class=p>{</span>
                <span class=k>if</span> <span class=p>(</span><span class=n>j</span> <span class=o>&gt;=</span> <span class=n>A</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=mi>1</span><span class=p>])</span> <span class=p>{</span>
                    <span class=n>f</span><span class=p>[</span><span class=n>j</span><span class=p>]</span> <span class=o>=</span> <span class=n>f</span><span class=p>[</span><span class=n>j</span><span class=p>]</span> <span class=o>||</span> <span class=n>f</span><span class=p>[</span><span class=n>j</span> <span class=o>-</span> <span class=n>A</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=mi>1</span><span class=p>]];</span>
                <span class=p>}</span>
            <span class=p>}</span>
        <span class=p>}</span>

        <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>j</span> <span class=o>=</span> <span class=n>m</span><span class=p>;</span> <span class=n>j</span> <span class=o>&gt;=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>j</span><span class=o>--</span><span class=p>)</span> <span class=p>{</span>
            <span class=k>if</span> <span class=p>(</span><span class=n>f</span><span class=p>[</span><span class=n>j</span><span class=p>]</span> <span class=o>==</span> <span class=nb>true</span><span class=p>)</span>
                <span class=k>return</span> <span class=n>j</span><span class=p>;</span>
        <span class=p>}</span>

        <span class=k>return</span> <span class=mi>0</span><span class=p>;</span>
    <span class=p>}</span>
<span class=p>};</span>
</code></pre></div> </div> </div> <h3 id=backpack-v>Backpack V<a class=headerlink href=#backpack-v title="Permanent link">&para;</a></h3> <ul> <li>This problem could follow the analysis from Backpack.</li> <li>Instead of memorize the boolean value whether first <code>i</code> items can fill the weight <code>w</code>. We record in <code>f[i][w]</code> the total number of possible fills of the weight <code>w</code> by first <code>i</code> items.</li> <li>We need to initialize the state <code>f[i][j]</code> first then to update it.</li> </ul> <div class=tabbed-set data-tabs=16:2><input checked=checked id=__tabbed_16_1 name=__tabbed_16 type=radio><label for=__tabbed_16_1>C++ DP</label><div class=tabbed-content> <div class=highlight><pre><span></span><code><span class=k>class</span> <span class=nc>Solution</span> <span class=p>{</span>
<span class=k>public</span><span class=o>:</span>
    <span class=kt>int</span> <span class=n>backPackV</span><span class=p>(</span><span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;&amp;</span> <span class=n>nums</span><span class=p>,</span> <span class=kt>int</span> <span class=n>T</span><span class=p>)</span> <span class=p>{</span>
        <span class=kt>int</span> <span class=n>n</span> <span class=o>=</span> <span class=n>nums</span><span class=p>.</span><span class=n>size</span><span class=p>();</span>
        <span class=k>if</span> <span class=p>(</span><span class=n>n</span> <span class=o>==</span> <span class=mi>0</span><span class=p>)</span> <span class=p>{</span>
            <span class=k>return</span> <span class=mi>0</span><span class=p>;</span>
        <span class=p>}</span>

        <span class=kt>int</span> <span class=n>f</span><span class=p>[</span><span class=n>n</span> <span class=o>+</span> <span class=mi>1</span><span class=p>][</span><span class=n>T</span> <span class=o>+</span> <span class=mi>1</span><span class=p>];</span>
        <span class=n>f</span><span class=p>[</span><span class=mi>0</span><span class=p>][</span><span class=mi>0</span><span class=p>]</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span>

        <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>j</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span> <span class=n>j</span> <span class=o>&lt;=</span> <span class=n>T</span><span class=p>;</span> <span class=n>j</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
            <span class=n>f</span><span class=p>[</span><span class=mi>0</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
        <span class=p>}</span>

        <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;=</span> <span class=n>n</span><span class=p>;</span> <span class=n>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
            <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>j</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>j</span> <span class=o>&lt;=</span> <span class=n>T</span><span class=p>;</span> <span class=n>j</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
                <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>=</span> <span class=n>f</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=mi>1</span><span class=p>][</span><span class=n>j</span><span class=p>];</span>
                <span class=k>if</span> <span class=p>(</span><span class=n>j</span> <span class=o>&gt;=</span> <span class=n>nums</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=mi>1</span><span class=p>])</span> <span class=p>{</span>
                    <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>+=</span> <span class=n>f</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=mi>1</span><span class=p>][</span><span class=n>j</span> <span class=o>-</span> <span class=n>nums</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=mi>1</span><span class=p>]];</span>
                <span class=p>}</span>
            <span class=p>}</span>
        <span class=p>}</span>

        <span class=k>return</span> <span class=n>f</span><span class=p>[</span><span class=n>n</span><span class=p>][</span><span class=n>T</span><span class=p>];</span>
    <span class=p>}</span>
<span class=p>};</span>
</code></pre></div> </div> <input id=__tabbed_16_2 name=__tabbed_16 type=radio><label for=__tabbed_16_2>C++ DP log(n) space</label><div class=tabbed-content> <div class=highlight><pre><span></span><code><span class=k>class</span> <span class=nc>Solution</span> <span class=p>{</span>
<span class=k>public</span><span class=o>:</span>
    <span class=kt>int</span> <span class=n>backPackV</span><span class=p>(</span><span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;&amp;</span> <span class=n>nums</span><span class=p>,</span> <span class=kt>int</span> <span class=n>T</span><span class=p>)</span> <span class=p>{</span>
        <span class=kt>int</span> <span class=n>n</span> <span class=o>=</span> <span class=n>nums</span><span class=p>.</span><span class=n>size</span><span class=p>();</span>
        <span class=k>if</span> <span class=p>(</span><span class=n>n</span> <span class=o>==</span> <span class=mi>0</span><span class=p>)</span> <span class=p>{</span>
            <span class=k>return</span> <span class=mi>0</span><span class=p>;</span>
        <span class=p>}</span>

        <span class=kt>int</span> <span class=n>f</span><span class=p>[</span><span class=n>T</span> <span class=o>+</span> <span class=mi>1</span><span class=p>];</span>
        <span class=n>f</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span>

        <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>j</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span> <span class=n>j</span> <span class=o>&lt;=</span> <span class=n>T</span><span class=p>;</span> <span class=n>j</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
            <span class=n>f</span><span class=p>[</span><span class=n>j</span><span class=p>]</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
        <span class=p>}</span>
        <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;=</span> <span class=n>n</span><span class=p>;</span> <span class=n>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
            <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>j</span> <span class=o>=</span> <span class=n>T</span><span class=p>;</span> <span class=n>j</span> <span class=o>&gt;=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>j</span><span class=o>--</span><span class=p>)</span> <span class=p>{</span>
                <span class=c1>//f[j] = f[j - A[i - 1]] ==&gt; f&#39;[j]</span>
                <span class=k>if</span> <span class=p>(</span><span class=n>j</span> <span class=o>&gt;=</span> <span class=n>nums</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=mi>1</span><span class=p>])</span> <span class=p>{</span>
                    <span class=c1>// f&#39;[j]</span>
                    <span class=c1>// cover old f[j]</span>
                    <span class=n>f</span><span class=p>[</span><span class=n>j</span><span class=p>]</span> <span class=o>+=</span> <span class=n>f</span><span class=p>[</span><span class=n>j</span> <span class=o>-</span> <span class=n>nums</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=mi>1</span><span class=p>]];</span>
                <span class=p>}</span>
            <span class=p>}</span>
        <span class=p>}</span>

        <span class=k>return</span> <span class=n>f</span><span class=p>[</span><span class=n>T</span><span class=p>];</span>
    <span class=p>}</span>
<span class=p>};</span>
</code></pre></div> </div> </div> <h3 id=backpack-vi>Backpack VI<a class=headerlink href=#backpack-vi title="Permanent link">&para;</a></h3> <ul> <li>这道题等同于Leetcode里 Combinations Sum IV</li> <li>这里可以随便取，似乎题目变得无法下手，考虑“最后一步”这个技巧不能用了，因为最后一步可以是任意一个了。</li> <li>但仍然可以用子问题来考虑。先不管最后一步是哪一个，最后一步之前的相加的总和一定是 <code>Target - x</code>. 这样就转化成一个子问题可以用DP来做。 具体做法我们可以对于每一个小于“总承重”的重量进行枚举最后一步<code>x</code>. 可能的<code>x</code>是<code>A[0], ..., A[i - 1]</code>中任意一个.</li> <li>Must initialize <code>f[i] = 0</code>. Because some of the state won't be updated (indicate they are not possible to be fill).</li> </ul> <div class=tabbed-set data-tabs=17:2><input checked=checked id=__tabbed_17_1 name=__tabbed_17 type=radio><label for=__tabbed_17_1>C++ DP</label><div class=tabbed-content> <div class=highlight><pre><span></span><code><span class=k>class</span> <span class=nc>Solution</span> <span class=p>{</span>
<span class=k>public</span><span class=o>:</span>
    <span class=kt>int</span> <span class=n>backPackVI</span><span class=p>(</span><span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;&amp;</span> <span class=n>nums</span><span class=p>,</span> <span class=kt>int</span> <span class=n>T</span><span class=p>)</span> <span class=p>{</span>
        <span class=kt>int</span> <span class=n>n</span> <span class=o>=</span> <span class=n>nums</span><span class=p>.</span><span class=n>size</span><span class=p>();</span>
        <span class=k>if</span> <span class=p>(</span><span class=n>n</span> <span class=o>==</span> <span class=mi>0</span><span class=p>)</span> <span class=p>{</span>
            <span class=k>return</span> <span class=mi>0</span><span class=p>;</span>
        <span class=p>}</span>
        <span class=kt>int</span> <span class=n>f</span><span class=p>[</span><span class=n>T</span> <span class=o>+</span> <span class=mi>1</span><span class=p>];</span>
        <span class=n>f</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span>
        <span class=cm>/* for each sub problem */</span>
        <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;=</span> <span class=n>T</span><span class=p>;</span> <span class=n>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
            <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>]</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
            <span class=cm>/* enumerate the last step */</span>
            <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>j</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>j</span> <span class=o>&lt;</span> <span class=n>n</span><span class=p>;</span> <span class=n>j</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
                <span class=k>if</span> <span class=p>(</span><span class=n>i</span> <span class=o>&gt;=</span> <span class=n>nums</span><span class=p>[</span><span class=n>j</span><span class=p>])</span> <span class=p>{</span>
                    <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>]</span> <span class=o>+=</span> <span class=n>f</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=n>nums</span><span class=p>[</span><span class=n>j</span><span class=p>]];</span>
                <span class=p>}</span>
            <span class=p>}</span>
        <span class=p>}</span>

        <span class=k>return</span> <span class=n>f</span><span class=p>[</span><span class=n>T</span><span class=p>];</span>
    <span class=p>}</span>
<span class=p>};</span>
</code></pre></div> </div> <input id=__tabbed_17_2 name=__tabbed_17 type=radio><label for=__tabbed_17_2>Output result</label><div class=tabbed-content> <div class=highlight><pre><span></span><code><span class=c1>// f[i]: 存多少种方式</span>
<span class=c1>// pi[i]: 如果 f[i] &gt;= 1, 最后一个数字可以是pi[i]</span>
<span class=k>class</span> <span class=nc>Solution</span> <span class=p>{</span>
<span class=k>public</span><span class=o>:</span>
    <span class=kt>int</span> <span class=n>backPackVI</span><span class=p>(</span><span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;&amp;</span> <span class=n>nums</span><span class=p>,</span> <span class=kt>int</span> <span class=n>T</span><span class=p>)</span> <span class=p>{</span>
        <span class=kt>int</span> <span class=n>n</span> <span class=o>=</span> <span class=n>nums</span><span class=p>.</span><span class=n>size</span><span class=p>();</span>
        <span class=k>if</span> <span class=p>(</span><span class=n>n</span> <span class=o>==</span> <span class=mi>0</span><span class=p>)</span> <span class=p>{</span>
            <span class=k>return</span> <span class=mi>0</span><span class=p>;</span>
        <span class=p>}</span>

        <span class=kt>int</span> <span class=n>f</span><span class=p>[</span><span class=n>T</span> <span class=o>+</span> <span class=mi>1</span><span class=p>];</span>
        <span class=cm>/* pi[i]: 如果i可拼出(f[i] &gt;= 1), 最后一个是pi[i] */</span>
        <span class=kt>int</span> <span class=n>pi</span><span class=p>[</span><span class=n>T</span> <span class=o>+</span> <span class=mi>1</span><span class=p>];</span>
        <span class=n>f</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span>

        <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;=</span> <span class=n>T</span><span class=p>;</span> <span class=n>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
            <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>]</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
            <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>j</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>j</span> <span class=o>&lt;</span> <span class=n>n</span><span class=p>;</span> <span class=n>j</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
                <span class=k>if</span> <span class=p>(</span><span class=n>i</span> <span class=o>&gt;=</span> <span class=n>nums</span><span class=p>[</span><span class=n>j</span><span class=p>])</span> <span class=p>{</span>
                    <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>]</span> <span class=o>+=</span> <span class=n>f</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=n>nums</span><span class=p>[</span><span class=n>j</span><span class=p>]];</span>
                    <span class=cm>/* 最后一个是nums[j]的可拼出i */</span>
                    <span class=k>if</span> <span class=p>(</span><span class=n>f</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=n>nums</span><span class=p>[</span><span class=n>j</span><span class=p>]]</span> <span class=o>&gt;</span> <span class=mi>0</span><span class=p>)</span> <span class=p>{</span>
                        <span class=cm>/* 纪录下来 */</span>
                        <span class=n>pi</span><span class=p>[</span><span class=n>i</span><span class=p>]</span> <span class=o>=</span> <span class=n>nums</span><span class=p>[</span><span class=n>j</span><span class=p>];</span>
                    <span class=p>}</span>
                <span class=p>}</span>
            <span class=p>}</span>
        <span class=p>}</span>

        <span class=k>if</span> <span class=p>(</span><span class=n>f</span><span class=p>[</span><span class=n>T</span><span class=p>]</span> <span class=o>&gt;</span> <span class=mi>0</span><span class=p>)</span> <span class=p>{</span>
            <span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=n>T</span><span class=p>;</span>
            <span class=n>cout</span> <span class=o>&lt;&lt;</span> <span class=n>i</span> <span class=o>&lt;&lt;</span> <span class=s>&quot;=&quot;</span> <span class=o>&lt;&lt;</span> <span class=n>endl</span><span class=p>;</span>
            <span class=k>while</span> <span class=p>(</span><span class=n>i</span> <span class=o>!=</span> <span class=mi>0</span><span class=p>)</span> <span class=p>{</span>
                <span class=c1>// sum is i now;</span>
                <span class=c1>// last number is pi[i]</span>
                <span class=c1>// previuos sum is i - pi[i]</span>
                <span class=n>cout</span> <span class=o>&lt;&lt;</span> <span class=n>pi</span><span class=p>[</span><span class=n>i</span><span class=p>]</span> <span class=o>&lt;&lt;</span> <span class=n>endl</span><span class=p>;</span>
                <span class=n>i</span> <span class=o>-=</span> <span class=n>pi</span><span class=p>[</span><span class=n>i</span><span class=p>];</span>
            <span class=p>}</span>
        <span class=p>}</span>

        <span class=k>return</span> <span class=n>f</span><span class=p>[</span><span class=n>T</span><span class=p>];</span>
    <span class=p>}</span>
<span class=p>};</span>
</code></pre></div> </div> </div> <h2 id=summary-dynamic-programming-types>Summary Dynamic Programming Types<a class=headerlink href=#summary-dynamic-programming-types title="Permanent link">&para;</a></h2> <h3 id=_3>划分型动态规划特点<a class=headerlink href=#_3 title="Permanent link">&para;</a></h3> <ul> <li>给定长度为N的序列或字符串，要求划分成若干段<ol> <li>段数不限，或指定K段</li> <li>每一段满足一定的性质</li> </ol> </li> <li>类似于序列型动态规划，但是通常要加上段数信息<ol> <li>类似于序列型动态规划，但是通常要加上段数信息</li> <li>一般用<code>f[i][j]</code>记录前i个元素(元素0~i-1)分成j段的性质，如最小代价</li> <li>把状态<code>f[i]</code>或<code>f[i][j]</code>初始化为极大值或极小值。一方面，这样有利于在更新状态时计算最 大或最小值；另一方面，在更新状态是可以通过查看子状态是否为极值来判断当前一步更新是否有意义。 典型题目：1. Perfect Squares, 全部状态都有意义，可省略检查。2. Coin Change 有些 数额是无法用给定面值的硬币兑换，更新前需检查状态是否为极致以判断当前更新是否有意义。</li> </ol> </li> <li>划分性动态规划总结<ol> <li>要求将一个序列或字符串划分成若干满足要求的片段</li> <li>解决方法：最后一步/最后一段</li> <li>枚举最后一段的起点</li> <li>如果题目不指定段数，用 f[i] 表示前 i 个元素分段后的可行性/最值，可行性，方式数： Perfect Squares, Palindrome Partition II</li> <li>如果题目指定段数，用 f[i][j]表示前 i 个元素分成 j 段后的可行性/最值，可行性，方式数：Copy Books</li> </ol> </li> <li>背包型动态规划类型<ol> <li>布尔值</li> <li>计数</li> <li>最值</li> <li>单一物品</li> <li>无限多物品</li> </ol> </li> <li>背包型动态规划空间优化<ol> <li>滚动数组</li> <li>单个数组</li> </ol> </li> <li>背包型动态规划总结</li> <li>背包问题的数组大小与总承重有关</li> <li>Backpack 可行性背包<ol> <li>要求不超过Target时能拼出的最大重量</li> <li>记录前i个物品能不能拼出重量w</li> </ol> </li> <li>Backpack V, Backpack VI, 计数型背包<ol> <li>要求有多少种方式拼出重量Target</li> <li>Backpack V：记录前i个物品有多少种方式拼出重量w</li> <li>Backpack VI：记录有多少种方式(可重复)拼出重量w</li> </ol> </li> <li>关键点</li> <li>最后一步<ol> <li><strong>最后一个背包内的物品是哪个</strong></li> <li><strong>最后一个物品有没有进背包</strong></li> </ol> </li> </ul> <div class="admonition note"> <p class=admonition-title>Note</p> <p>注意在loop中要先初始化<code>f[i][j]</code>, 然后再去更新，否者如果if语句判断false的时候是没法更新<code>f[i][j]</code>的。例如题目：Backpack 和 Backpack V</p> </div> <h2 id=lecture-5>Lecture 5<a class=headerlink href=#lecture-5 title="Permanent link">&para;</a></h2> <table> <thead> <tr> <th>Problem</th> <th>Category</th> </tr> </thead> <tbody> <tr> <td><a href=#backpack-ii>Backpack II</a></td> <td>背包型</td> </tr> <tr> <td><a href=#backpack-iii>Backpack III</a></td> <td>背包型</td> </tr> <tr> <td><a href=#coins-in-a-line-iii>Coins in A Line III</a></td> <td>博弈型</td> </tr> <tr> <td><a href=#longest-palindromic-subsequence>Longest Palindromic Subsequence</a></td> <td>区间型</td> </tr> <tr> <td><a href=#burst-balloons>Burst Balloons</a></td> <td>区间型</td> </tr> <tr> <td><a href=#scramble-string>Scramble String</a></td> <td>区间型</td> </tr> </tbody> </table> <h3 id=backpack-ii>Backpack II<a class=headerlink href=#backpack-ii title="Permanent link">&para;</a></h3> <p>Given <code>n</code> items with size <code>A[i]</code> and value <code>V[i]</code>, and a backpack with size <code>m</code>. What's the maximum value can you put into the backpack?</p> <p>Example</p> <p>Given 4 items with size <code>[2, 3, 5, 7]</code> and value <code>[1, 5, 2, 4]</code>, and a backpack with size 10. The maximum value is 9.</p> <ul> <li>思考方式任然是从最后一个物品选还是不选，只是我们现在考虑的是价值。此时状态就不能是可行性 <a href=#backpack>Backpack</a>或者多少种了<a href=#backpack-v>Backpack V</a>, 我们要纪录总价值。</li> <li>State: <code>f[i][w]</code> represent the value of the first <code>i</code> items that weight <code>w</code>.</li> <li>State transition equation: <span><span class=MathJax_Preview>f[i][w] = max(f[i - 1][w],\ f[i - 1][w - A[i - 1]] + V[i - 1] | w ≥ A[i-1] \text{且}\ f[i-1][w-A[i-1]] \neq -1)</span><script type=math/tex>f[i][w] = max(f[i - 1][w],\ f[i - 1][w - A[i - 1]] + V[i - 1] | w ≥ A[i-1] \text{且}\ f[i-1][w-A[i-1]] \neq -1)</script></span></li> <li>Initialization: <code>f[0][0] = 0</code>, <code>f[0][1] = -1, ... f[0][w] = -1</code>. <code>-1</code> 代表不能被拼出。</li> </ul> <div class=tabbed-set data-tabs=18:1><input checked=checked id=__tabbed_18_1 name=__tabbed_18 type=radio><label for=__tabbed_18_1>C++ DP O(n^2) space</label><div class=tabbed-content></div> </div> <div class=highlight><pre><span></span><code><span class=k>class</span> <span class=nc>Solution</span> <span class=p>{</span>
<span class=k>public</span><span class=o>:</span>
    <span class=kt>int</span> <span class=n>backPackII</span> <span class=p>(</span><span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;</span> <span class=n>A</span><span class=p>,</span> <span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;</span> <span class=n>V</span><span class=p>,</span> <span class=kt>int</span> <span class=n>m</span><span class=p>)</span> <span class=p>{</span>
        <span class=kt>int</span> <span class=n>n</span> <span class=o>=</span> <span class=n>A</span><span class=p>.</span><span class=n>szie</span><span class=p>();</span>

        <span class=k>if</span> <span class=p>(</span><span class=n>n</span> <span class=o>==</span> <span class=mi>0</span><span class=p>)</span> <span class=k>return</span> <span class=mi>0</span><span class=p>;</span>

        <span class=kt>int</span> <span class=n>f</span><span class=p>[</span><span class=n>n</span> <span class=o>+</span> <span class=mi>1</span><span class=p>][</span><span class=n>m</span> <span class=o>+</span> <span class=mi>1</span><span class=p>];</span>
        <span class=n>f</span><span class=p>[</span><span class=mi>0</span><span class=p>][</span><span class=mi>0</span><span class=p>]</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
        <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>j</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span> <span class=n>j</span> <span class=o>&lt;</span> <span class=n>m</span><span class=p>;</span> <span class=o>++</span><span class=n>j</span><span class=p>)</span> <span class=p>{</span>
            <span class=n>f</span><span class=p>[</span><span class=mi>0</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>=</span> <span class=mi>-1</span><span class=p>;</span>
        <span class=p>}</span>

        <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;=</span> <span class=n>n</span><span class=p>;</span> <span class=o>++</span><span class=n>i</span><span class=p>)</span> <span class=p>{</span>
            <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>j</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span> <span class=n>j</span> <span class=o>&lt;=</span> <span class=n>m</span><span class=p>;</span> <span class=o>++</span><span class=n>j</span><span class=p>)</span> <span class=p>{</span>
                <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>=</span> <span class=n>f</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=mi>1</span><span class=p>][</span><span class=n>j</span><span class=p>];</span>
                <span class=k>if</span> <span class=p>(</span><span class=n>f</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=mi>1</span><span class=p>][</span><span class=n>j</span> <span class=o>-</span> <span class=n>A</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=mi>1</span><span class=p>]]</span> <span class=o>!=</span> <span class=mi>-1</span> <span class=o>&amp;&amp;</span> <span class=n>j</span> <span class=o>&gt;=</span> <span class=n>A</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=mi>1</span><span class=p>])</span> <span class=p>{</span>
                    <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>=</span> <span class=n>max</span><span class=p>(</span><span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>],</span> <span class=n>f</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=mi>1</span><span class=p>][</span><span class=n>j</span> <span class=o>-</span> <span class=n>A</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=mi>1</span><span class=p>]]</span> <span class=o>+</span> <span class=n>V</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=mi>1</span><span class=p>]);</span>
                <span class=p>}</span>
            <span class=p>}</span>
        <span class=p>}</span>

        <span class=kt>int</span> <span class=n>res</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
        <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>j</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>j</span> <span class=o>&lt;=</span> <span class=n>m</span><span class=p>;</span> <span class=o>++</span><span class=n>j</span><span class=p>)</span> <span class=p>{</span>
            <span class=k>if</span><span class=p>(</span><span class=n>f</span><span class=p>[</span><span class=n>n</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>!=</span> <span class=mi>-1</span> <span class=o>&amp;&amp;</span> <span class=n>f</span><span class=p>[</span><span class=n>n</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>&gt;</span> <span class=n>res</span><span class=p>)</span> <span class=p>{</span>
                <span class=n>res</span> <span class=o>=</span> <span class=n>f</span><span class=p>[</span><span class=n>n</span><span class=p>][</span><span class=n>j</span><span class=p>];</span>
            <span class=p>}</span>
        <span class=p>}</span>

        <span class=k>return</span> <span class=n>res</span><span class=p>;</span>
    <span class=p>}</span>
<span class=p>};</span>
</code></pre></div> <div class=tabbed-set data-tabs=19:1><input checked=checked id=__tabbed_19_1 name=__tabbed_19 type=radio><label for=__tabbed_19_1>C++ DP O(n) space</label><div class=tabbed-content></div> </div> <div class=highlight><pre><span></span><code><span class=k>class</span> <span class=nc>Solution</span> <span class=p>{</span>
<span class=k>public</span><span class=o>:</span>
    <span class=kt>int</span> <span class=n>backPackII</span> <span class=p>(</span><span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;</span> <span class=n>A</span><span class=p>,</span> <span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;</span> <span class=n>V</span><span class=p>,</span> <span class=kt>int</span> <span class=n>m</span><span class=p>)</span> <span class=p>{</span>
        <span class=kt>int</span> <span class=n>n</span> <span class=o>=</span> <span class=n>A</span><span class=p>.</span><span class=n>szie</span><span class=p>();</span>

        <span class=k>if</span> <span class=p>(</span><span class=n>n</span> <span class=o>==</span> <span class=mi>0</span><span class=p>)</span> <span class=k>return</span> <span class=mi>0</span><span class=p>;</span>

        <span class=kt>int</span> <span class=n>f</span><span class=p>[</span><span class=n>m</span> <span class=o>+</span> <span class=mi>1</span><span class=p>];</span>
        <span class=n>f</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
        <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>j</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span> <span class=n>j</span> <span class=o>&lt;</span> <span class=n>m</span><span class=p>;</span> <span class=o>++</span><span class=n>j</span><span class=p>)</span> <span class=p>{</span>
            <span class=n>f</span><span class=p>[</span><span class=mi>0</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>=</span> <span class=mi>-1</span><span class=p>;</span>
        <span class=p>}</span>

        <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;=</span> <span class=n>n</span><span class=p>;</span> <span class=o>++</span><span class=n>i</span><span class=p>)</span> <span class=p>{</span>
            <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>j</span> <span class=o>=</span> <span class=n>m</span><span class=p>;</span> <span class=n>j</span> <span class=o>&gt;=</span> <span class=mi>0</span><span class=p>;</span> <span class=o>--</span><span class=n>j</span><span class=p>)</span> <span class=p>{</span>
                <span class=k>if</span> <span class=p>(</span><span class=n>f</span><span class=p>[</span><span class=n>j</span> <span class=o>-</span> <span class=n>A</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=mi>1</span><span class=p>]]</span> <span class=o>!=</span> <span class=mi>-1</span> <span class=o>&amp;&amp;</span> <span class=n>j</span> <span class=o>&gt;=</span> <span class=n>A</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=mi>1</span><span class=p>])</span> <span class=p>{</span>
                    <span class=n>f</span><span class=p>[</span><span class=n>j</span><span class=p>]</span> <span class=o>=</span> <span class=n>max</span><span class=p>(</span><span class=n>f</span><span class=p>[</span><span class=n>j</span><span class=p>],</span> <span class=n>f</span><span class=p>[</span><span class=n>j</span> <span class=o>-</span> <span class=n>A</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=mi>1</span><span class=p>]]</span> <span class=o>+</span> <span class=n>V</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=mi>1</span><span class=p>]);</span>
                <span class=p>}</span>
            <span class=p>}</span>
        <span class=p>}</span>

        <span class=kt>int</span> <span class=n>res</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
        <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>j</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>j</span> <span class=o>&lt;=</span> <span class=n>m</span><span class=p>;</span> <span class=o>++</span><span class=n>j</span><span class=p>)</span> <span class=p>{</span>
            <span class=k>if</span><span class=p>(</span><span class=n>f</span><span class=p>[</span><span class=n>j</span><span class=p>]</span> <span class=o>!=</span> <span class=mi>-1</span> <span class=o>&amp;&amp;</span> <span class=n>f</span><span class=p>[</span><span class=n>j</span><span class=p>]</span> <span class=o>&gt;</span> <span class=n>res</span><span class=p>)</span> <span class=p>{</span>
                <span class=n>res</span> <span class=o>=</span> <span class=n>f</span><span class=p>[</span><span class=n>j</span><span class=p>];</span>
            <span class=p>}</span>
        <span class=p>}</span>

        <span class=k>return</span> <span class=n>res</span><span class=p>;</span>
    <span class=p>}</span>
<span class=p>};</span>
</code></pre></div> <h3 id=backpack-iii>Backpack III<a class=headerlink href=#backpack-iii title="Permanent link">&para;</a></h3> <p>Given <code>n</code> kind of items with size <code>A[i]</code> and value <code>V[i]</code>( each item has an infinite number available) and a backpack with size <code>m</code>. What's the maximum value can you put into the backpack?</p> <p>Example</p> <p>Given 4 items with size <code>[2, 3, 5, 7]</code> and value <code>[1, 5, 2, 4]</code>, and a backpack with size 10. The maximum value is 15.</p> <ul> <li>We can follow the "last step" principle, assume the last item in and not in the backpack. But when we do this, we notice that the last one item could also be in the previous because we have infinite times of the item available. We cannot proceed.</li> <li>Instead of thinking the "last one" in the final answer, we can think the "last one" that has been selected. This paradigm shift enables use to tackle the problem more cleverly. We can enumerate the last type (not the last one in the final result) of items we can select.</li> <li>State: <code>f[i][w]</code>: 前 <code>i</code> <strong>种</strong>物品能够拼成重量为 <code>w</code> 的最大价值</li> <li>Transition equation: <span><span class=MathJax_Preview>f[i][w] = \max_{k \ge 0}{f[i-1[w], f[i - 1][j - k A[i -1]] + k V[i-1]}</span><script type=math/tex>f[i][w] = \max_{k \ge 0}{f[i-1[w], f[i - 1][j - k A[i -1]] + k V[i-1]}</script></span></li> </ul> <p><img alt="Backpack III Optimization" src=../fig/backpack-iii-optimize.png></p> <div class=highlight><pre><span></span><code><span class=k>class</span> <span class=nc>Solution</span> <span class=p>{</span>
<span class=k>public</span><span class=o>:</span>
    <span class=kt>int</span> <span class=n>backPackIII</span><span class=p>(</span><span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;&amp;</span> <span class=n>A</span><span class=p>,</span> <span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;&amp;</span> <span class=n>V</span><span class=p>,</span> <span class=kt>int</span> <span class=n>m</span><span class=p>)</span> <span class=p>{</span>
        <span class=kt>int</span> <span class=n>n</span> <span class=o>=</span> <span class=n>A</span><span class=p>.</span><span class=n>size</span><span class=p>();</span>
        <span class=k>if</span> <span class=p>(</span><span class=n>n</span> <span class=o>==</span> <span class=mi>0</span><span class=p>)</span> <span class=p>{</span>
            <span class=k>return</span> <span class=mi>0</span><span class=p>;</span>
        <span class=p>}</span>

        <span class=kt>int</span> <span class=n>f</span><span class=p>[</span><span class=n>m</span> <span class=o>+</span> <span class=mi>1</span><span class=p>];</span>

        <span class=cm>/* init */</span>
        <span class=n>f</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
        <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>j</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span> <span class=n>j</span> <span class=o>&lt;=</span> <span class=n>m</span><span class=p>;</span> <span class=n>j</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
            <span class=n>f</span><span class=p>[</span><span class=n>j</span><span class=p>]</span> <span class=o>=</span> <span class=mi>-1</span><span class=p>;</span>
        <span class=p>}</span>

        <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;=</span> <span class=n>n</span><span class=p>;</span> <span class=n>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
            <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>j</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>j</span> <span class=o>&lt;=</span> <span class=n>m</span><span class=p>;</span> <span class=n>j</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
                <span class=k>if</span> <span class=p>(</span><span class=n>f</span><span class=p>[</span><span class=n>j</span> <span class=o>-</span> <span class=n>A</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=mi>1</span><span class=p>]]</span> <span class=o>!=</span> <span class=mi>-1</span> <span class=o>&amp;&amp;</span> <span class=n>j</span> <span class=o>&gt;=</span> <span class=n>A</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=mi>1</span><span class=p>])</span> <span class=p>{</span>
                    <span class=n>f</span><span class=p>[</span><span class=n>j</span><span class=p>]</span> <span class=o>=</span> <span class=n>max</span><span class=p>(</span><span class=n>f</span><span class=p>[</span><span class=n>j</span><span class=p>],</span> <span class=n>f</span><span class=p>[</span><span class=n>j</span> <span class=o>-</span> <span class=n>A</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=mi>1</span><span class=p>]]</span> <span class=o>+</span> <span class=n>V</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=mi>1</span><span class=p>]);</span>
                <span class=p>}</span>
            <span class=p>}</span>
        <span class=p>}</span>

        <span class=kt>int</span> <span class=n>res</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
        <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>j</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>j</span> <span class=o>&lt;=</span> <span class=n>m</span><span class=p>;</span> <span class=n>j</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
            <span class=k>if</span> <span class=p>(</span><span class=n>f</span><span class=p>[</span><span class=n>j</span><span class=p>]</span> <span class=o>!=</span> <span class=mi>-1</span> <span class=o>&amp;&amp;</span> <span class=n>f</span><span class=p>[</span><span class=n>j</span><span class=p>]</span> <span class=o>&gt;</span> <span class=n>res</span><span class=p>)</span> <span class=p>{</span>
                <span class=n>res</span> <span class=o>=</span> <span class=n>f</span><span class=p>[</span><span class=n>j</span><span class=p>];</span>
            <span class=p>}</span>
        <span class=p>}</span>

        <span class=k>return</span> <span class=n>res</span><span class=p>;</span>
    <span class=p>}</span>
<span class=p>};</span>
</code></pre></div> <div class="admonition note"> <p class=admonition-title>Note</p> <p>Notice the solution is identical to the <a href=#backpack-ii>Backpack II</a> except one line (line 18), but you should notice there is a long way from <a href=#backpack-ii>Backpack II</a> to <a href=#backpack-iii>Backpack III</a>. See the detailed explaination of this problem in <a href=../../../../../leetcode/dynamic-programming/notes/#knapsack-iii>Dynamic Programming</a></p> </div> <h3 id=coins-in-a-line-iii>Coins in A Line III<a class=headerlink href=#coins-in-a-line-iii title="Permanent link">&para;</a></h3> <p>There are <code>n</code> coins in a line. Two players take turns to take a coin from one of the ends of the line until there are no more coins left. The player with the larger amount of money wins. Could you please decide the first player will win or lose?</p> <ul> <li> <p>这是一个博弈问题。看上去很难入手。要对题目认真审视。我开始的时候就没有懂得题意。下面是我的错误分析。</p> <div class=highlight><pre><span></span><code>/***************** WRONG ***************************
* 当前局面：a[i], ... a[j]
* Alice = A, Bob = B,
* Sa = A - B;
* 先手: Alice A + a[i](a[j])
* Bob = B,
* 下一轮：a[i+1], ... a[j]
* Alice = A&#39; = A + a[i], Bob = B&#39; = B,
* Sb = B - A&#39;;
* 先手：Bob B + a[i + 1] (a[j - 1])
* 后手：Alice: A&#39;;
* ...
*
* *** Sb = B - A - a[i]
* *** Sb = -Sa - a[i]
*
* **************** WRONG ****************************/
</code></pre></div> </li> <li> <p>注意这道题问的是先手是否会赢。所以应该以“先手”这个关键词出发。就是第一步。这一点明确了， 再重新分析，问题迎刃而解。</p> <div class=highlight><pre><span></span><code>/* 注意：我们的题意是问先手是否必胜。则当考虑先手出手之前的状态
*
* 当前局面：a[0], ... a[n-1]
* Alice = A = 0, Bob = B = 0,
* delta: Sa = A - B = 0;
* 先手: Alice 取 a[i](或者a[j]), 目标是最大化A - B
* A = a[i]
* B = 0,
* 在接下来的每轮中，Bob尽最大努力去最大化B - A
* 最终：Alice 获得 A + a[i],
*        Bob 获得 B,
* 注意：最终结果指的是“必胜”或“必败”的法则走到最后.
* 必胜必败概念：先手在当前局面有一种可能性“必胜”则“必胜”，没有一种&quot;必胜&quot;可能性便“必败”。
* 我们想知道的是Sa = A + a[i] - B = -Sb + a[i]是否会大于0
*
* 我们发现 Sa = -Sb + a[i]
* 这是个子问题。子问题是相对于先手Alice来讲的，子问题可以看做每次轮到Alice的局面(先手), Alice 的问题规模都变小了。
* State: f[i][j] = Alice面对局面a[i], ... a[j]时能得到的最大的于对手的数值差。
* Equation: f[i][j] = max(a[i] - f[i+1][j], a[j] - f[i][j-1])
* Init: f[0][0] = 0;
*       f[i][i] = a[i];
* 区间型，写code应该是枚举长度
*/
</code></pre></div> </li> <li> <p>注意18-20行枚举长度的方法。边界情况和下标计算不能弄错。同样的code在 Longest Palindromic Subsequence 也用到。</p> </li> <li>时间复杂度<span><span class=MathJax_Preview>O(n^2)</span><script type=math/tex>O(n^2)</script></span>, 空间复杂度<span><span class=MathJax_Preview>O(n^2)</span><script type=math/tex>O(n^2)</script></span></li> </ul> <div class=highlight><pre><span></span><code><span class=k>class</span> <span class=nc>Solution</span> <span class=p>{</span>
<span class=k>public</span><span class=o>:</span>
    <span class=kt>bool</span> <span class=n>firstWillWin</span><span class=p>(</span><span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;</span> <span class=o>&amp;</span><span class=n>values</span><span class=p>)</span> <span class=p>{</span>
        <span class=kt>int</span> <span class=n>n</span> <span class=o>=</span> <span class=n>values</span><span class=p>.</span><span class=n>size</span><span class=p>();</span>
        <span class=k>if</span> <span class=p>(</span> <span class=n>n</span> <span class=o>==</span> <span class=mi>0</span><span class=p>)</span>
            <span class=k>return</span> <span class=nb>true</span><span class=p>;</span>

        <span class=kt>int</span> <span class=n>f</span><span class=p>[</span><span class=n>n</span><span class=p>][</span><span class=n>n</span><span class=p>];</span>
        <span class=n>f</span><span class=p>[</span><span class=mi>0</span><span class=p>][</span><span class=mi>0</span><span class=p>]</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>

        <span class=kt>int</span> <span class=n>j</span><span class=p>;</span>
        <span class=cm>/* init */</span>
        <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>n</span><span class=p>;</span> <span class=n>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
            <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>i</span><span class=p>]</span> <span class=o>=</span> <span class=n>values</span><span class=p>[</span><span class=n>i</span><span class=p>];</span>
        <span class=p>}</span>

        <span class=cm>/* enumerate length */</span>
        <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>len</span> <span class=o>=</span> <span class=mi>2</span><span class=p>;</span> <span class=n>len</span> <span class=o>&lt;=</span> <span class=n>n</span><span class=p>;</span> <span class=n>len</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
            <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;=</span> <span class=n>n</span> <span class=o>-</span> <span class=n>len</span><span class=p>;</span> <span class=n>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
                <span class=n>j</span> <span class=o>=</span> <span class=n>i</span> <span class=o>+</span> <span class=n>len</span> <span class=o>-</span> <span class=mi>1</span><span class=p>;</span>
                <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>=</span> <span class=n>max</span><span class=p>(</span><span class=n>values</span><span class=p>[</span><span class=n>i</span><span class=p>]</span> <span class=o>-</span> <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=o>+</span><span class=mi>1</span><span class=p>][</span><span class=n>j</span><span class=p>],</span> <span class=n>values</span><span class=p>[</span><span class=n>j</span><span class=p>]</span> <span class=o>-</span> <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=mi>-1</span><span class=p>]);</span>
            <span class=p>}</span>
        <span class=p>}</span>

        <span class=k>return</span> <span class=n>f</span><span class=p>[</span><span class=mi>0</span><span class=p>][</span><span class=n>n</span><span class=mi>-1</span><span class=p>]</span> <span class=o>&gt;=</span> <span class=mi>0</span><span class=p>;</span>
    <span class=p>}</span>
<span class=p>};</span>
</code></pre></div> <h3 id=longest-palindromic-subsequence>Longest Palindromic Subsequence<a class=headerlink href=#longest-palindromic-subsequence title="Permanent link">&para;</a></h3> <ul> <li>区间型动态规划，子问题是去头去尾之后规模便小。写出状态后关键在于初始化，初始化的是对角线。</li> <li> <p>这道题的状态要相对好想，但是初始化和结果相对复杂。</p> <div class=highlight><pre><span></span><code>* last step: a[i] == a[j]
* state: f[i][j], LPS in string s[i], ... s[j]
* equation: f[i][j] = max(f[i+1][j], f[i][j - 1], f[i-1][j-1]|s[i] == s[j]);
* init: f[0][0] = 0, f[i][i] = 1;
*  if (s[i] == s[i + 1])
*      f[i][i+1] = 2;
* result: max(f[i][j])
</code></pre></div> </li> </ul> <div class=tabbed-set data-tabs=20:2><input checked=checked id=__tabbed_20_1 name=__tabbed_20 type=radio><label for=__tabbed_20_1>C++ DP</label><div class=tabbed-content> <div class=highlight><pre><span></span><code><span class=k>public</span> <span class=k>class</span> <span class=nc>Solution</span> <span class=p>{</span>
    <span class=k>public</span> <span class=kt>int</span> <span class=nf>longestPalindromeSubseq</span><span class=p>(</span><span class=n>string</span> <span class=n>s</span><span class=p>)</span> <span class=p>{</span>
        <span class=kt>int</span> <span class=n>n</span> <span class=o>=</span> <span class=n>s</span><span class=p>.</span><span class=n>length</span><span class=p>();</span>
        <span class=k>if</span> <span class=p>(</span><span class=n>n</span> <span class=o>==</span> <span class=mi>0</span><span class=p>)</span>
            <span class=k>return</span> <span class=mi>0</span><span class=p>;</span>

        <span class=k>if</span> <span class=p>(</span><span class=n>n</span> <span class=o>==</span> <span class=mi>1</span><span class=p>)</span>
            <span class=k>return</span> <span class=mi>1</span><span class=p>;</span>

        <span class=kt>int</span> <span class=n>f</span><span class=p>[</span><span class=n>n</span><span class=p>][</span><span class=n>n</span><span class=p>];</span>
        <span class=kt>int</span> <span class=n>i</span><span class=p>,</span> <span class=n>j</span><span class=p>,</span> <span class=n>len</span><span class=p>;</span>
        <span class=n>f</span><span class=p>[</span><span class=mi>0</span><span class=p>][</span><span class=mi>0</span><span class=p>]</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>

        <span class=k>for</span> <span class=p>(</span><span class=n>i</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>n</span><span class=p>;</span> <span class=n>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
            <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>i</span><span class=p>]</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span>
        <span class=p>}</span>

        <span class=k>for</span> <span class=p>(</span><span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>n</span> <span class=o>-</span> <span class=mi>1</span><span class=p>;</span> <span class=n>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
            <span class=k>if</span> <span class=p>(</span><span class=n>s</span><span class=p>[</span><span class=n>i</span><span class=p>]</span> <span class=o>==</span> <span class=n>s</span><span class=p>[</span><span class=n>i</span> <span class=o>+</span> <span class=mi>1</span><span class=p>])</span> <span class=p>{</span>
                <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>i</span> <span class=o>+</span> <span class=mi>1</span><span class=p>]</span> <span class=o>=</span> <span class=mi>2</span><span class=p>;</span>
            <span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
                <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>i</span> <span class=o>+</span> <span class=mi>1</span><span class=p>]</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span>
            <span class=p>}</span>
        <span class=p>}</span>

        <span class=cm>/* enumerate the len */</span>
        <span class=k>for</span> <span class=p>(</span><span class=n>len</span> <span class=o>=</span> <span class=mi>3</span><span class=p>;</span> <span class=n>len</span> <span class=o>&lt;=</span> <span class=n>n</span><span class=p>;</span> <span class=n>len</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
            <span class=k>for</span> <span class=p>(</span><span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;=</span> <span class=n>n</span> <span class=o>-</span> <span class=n>len</span><span class=p>;</span> <span class=n>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
                <span class=n>j</span> <span class=o>=</span> <span class=n>i</span> <span class=o>+</span> <span class=n>len</span> <span class=o>-</span> <span class=mi>1</span><span class=p>;</span>
                <span class=cm>/* init */</span>
                <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>=</span> <span class=n>f</span><span class=p>[</span><span class=n>i</span> <span class=o>+</span> <span class=mi>1</span><span class=p>][</span><span class=n>j</span><span class=p>];</span>       <span class=c1>// remove left</span>

                <span class=k>if</span> <span class=p>(</span><span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span> <span class=o>-</span> <span class=mi>1</span><span class=p>]</span> <span class=o>&gt;</span> <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>])</span> <span class=p>{</span> <span class=c1>// remove right</span>
                    <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>=</span> <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span> <span class=o>-</span> <span class=mi>1</span><span class=p>];</span>
                <span class=p>}</span>

                <span class=k>if</span> <span class=p>(</span><span class=n>s</span><span class=p>[</span><span class=n>i</span><span class=p>]</span> <span class=o>==</span> <span class=n>s</span><span class=p>[</span><span class=n>j</span><span class=p>]</span> <span class=o>&amp;&amp;</span> <span class=n>f</span><span class=p>[</span><span class=n>i</span> <span class=o>+</span> <span class=mi>1</span><span class=p>][</span><span class=n>j</span> <span class=o>-</span> <span class=mi>1</span><span class=p>]</span> <span class=o>+</span> <span class=mi>2</span> <span class=o>&gt;</span> <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>])</span> <span class=p>{</span>
                    <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>=</span> <span class=n>f</span><span class=p>[</span><span class=n>i</span> <span class=o>+</span> <span class=mi>1</span><span class=p>][</span><span class=n>j</span> <span class=o>-</span> <span class=mi>1</span><span class=p>]</span> <span class=o>+</span> <span class=mi>2</span><span class=p>;</span>
                <span class=p>}</span>
            <span class=p>}</span>
        <span class=p>}</span>

        <span class=kt>int</span> <span class=n>res</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
        <span class=k>for</span> <span class=p>(</span><span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>n</span><span class=p>;</span> <span class=n>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
            <span class=k>for</span> <span class=p>(</span><span class=n>j</span> <span class=o>=</span> <span class=n>i</span><span class=p>;</span> <span class=n>j</span> <span class=o>&lt;</span> <span class=n>n</span><span class=p>;</span> <span class=n>j</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
                <span class=k>if</span> <span class=p>(</span><span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>&gt;</span> <span class=n>res</span><span class=p>)</span> <span class=p>{</span>
                    <span class=n>res</span> <span class=o>=</span> <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>];</span>
                <span class=p>}</span>
            <span class=p>}</span>
        <span class=p>}</span>

        <span class=k>return</span> <span class=n>res</span><span class=p>;</span>
    <span class=p>}</span>
<span class=p>}</span>
</code></pre></div> </div> <input id=__tabbed_20_2 name=__tabbed_20 type=radio><label for=__tabbed_20_2>Java memoization</label><div class=tabbed-content> <div class=highlight><pre><span></span><code><span class=kd>public</span> <span class=kd>class</span> <span class=nc>Solution</span> <span class=p>{</span>
    <span class=kt>int</span><span class=o>[][]</span> <span class=n>f</span> <span class=o>=</span> <span class=kc>null</span><span class=p>;</span>
    <span class=kt>char</span><span class=o>[]</span> <span class=n>s</span> <span class=o>=</span> <span class=kc>null</span><span class=p>;</span>

    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>compute</span><span class=p>()</span> <span class=p>{</span>
        <span class=k>if</span> <span class=p>(</span><span class=n>f</span><span class=o>[</span><span class=n>i</span><span class=o>][</span><span class=n>j</span><span class=o>]</span> <span class=o>!=</span> <span class=o>-</span><span class=mi>1</span><span class=p>)</span>
            <span class=k>return</span><span class=p>;</span>

        <span class=k>if</span> <span class=p>(</span><span class=n>i</span> <span class=o>==</span> <span class=n>j</span><span class=p>)</span> <span class=p>{</span>
            <span class=n>f</span><span class=o>[</span><span class=n>i</span><span class=o>][</span><span class=n>j</span><span class=o>]</span> <span class=o>=</span> <span class=p>(</span><span class=n>s</span><span class=o>[</span><span class=n>i</span><span class=o>]</span> <span class=o>==</span> <span class=n>s</span><span class=o>[</span><span class=n>j</span><span class=o>]</span><span class=p>)</span> <span class=o>?</span> <span class=mi>2</span> <span class=p>:</span> <span class=mi>1</span><span class=p>;</span>
            <span class=k>return</span><span class=p>;</span>
        <span class=p>}</span>

        <span class=n>compute</span><span class=p>(</span><span class=n>i</span><span class=p>,</span> <span class=n>j</span> <span class=o>-</span> <span class=mi>1</span><span class=p>);</span>
        <span class=n>compute</span><span class=p>(</span><span class=n>i</span> <span class=o>+</span> <span class=mi>1</span><span class=p>,</span> <span class=n>j</span><span class=p>);</span>
        <span class=n>compute</span><span class=p>(</span><span class=n>i</span> <span class=o>+</span> <span class=mi>1</span><span class=p>,</span> <span class=n>j</span> <span class=o>-</span> <span class=mi>1</span><span class=p>);</span>

        <span class=n>f</span><span class=o>[</span><span class=n>i</span><span class=o>][</span><span class=n>j</span><span class=o>]</span> <span class=o>=</span> <span class=n>Math</span><span class=p>.</span><span class=na>max</span><span class=p>(</span><span class=n>f</span><span class=o>[</span><span class=n>i</span><span class=o>][</span><span class=n>j</span> <span class=o>-</span> <span class=mi>1</span><span class=o>]</span><span class=p>,</span> <span class=n>f</span><span class=o>[</span><span class=n>i</span> <span class=o>+</span> <span class=mi>1</span><span class=o>][</span><span class=n>j</span><span class=o>]</span><span class=p>);</span>
        <span class=k>if</span> <span class=p>(</span><span class=n>s</span><span class=o>[</span><span class=n>i</span><span class=o>]</span> <span class=o>==</span> <span class=n>s</span><span class=o>[</span><span class=n>j</span><span class=o>]</span><span class=p>)</span> <span class=p>{</span>
            <span class=n>f</span><span class=o>[</span><span class=n>i</span><span class=o>][</span><span class=n>j</span><span class=o>]</span> <span class=o>=</span> <span class=n>Math</span><span class=p>.</span><span class=na>max</span><span class=p>(</span><span class=n>f</span><span class=o>[</span><span class=n>i</span><span class=o>][</span><span class=n>j</span><span class=o>]</span><span class=p>,</span> <span class=n>f</span><span class=o>[</span><span class=n>i</span> <span class=o>+</span> <span class=mi>1</span><span class=o>][</span><span class=n>j</span> <span class=o>-</span> <span class=mi>1</span><span class=o>]</span> <span class=o>+</span> <span class=mi>2</span><span class=p>);</span>
        <span class=p>}</span>
    <span class=p>}</span>

    <span class=kd>public</span> <span class=kt>int</span> <span class=nf>longestPalindromeSubseq</span><span class=p>(</span><span class=n>String</span> <span class=n>ss</span><span class=p>)</span> <span class=p>{</span>
        <span class=n>s</span> <span class=o>=</span> <span class=n>ss</span><span class=p>.</span><span class=na>toCharArry</span><span class=p>();</span>
        <span class=kt>int</span> <span class=n>n</span> <span class=o>=</span> <span class=n>s</span><span class=p>.</span><span class=na>length</span><span class=p>;</span>
        <span class=k>if</span> <span class=p>(</span><span class=n>n</span> <span class=o>==</span> <span class=mi>0</span><span class=p>)</span> <span class=p>{</span>
            <span class=k>return</span> <span class=mi>0</span><span class=p>;</span>
        <span class=p>}</span>

        <span class=n>f</span> <span class=o>=</span> <span class=k>new</span> <span class=kt>int</span><span class=o>[</span><span class=n>n</span><span class=o>][</span><span class=n>n</span><span class=o>]</span><span class=p>;</span>

        <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>n</span><span class=p>;</span> <span class=o>++</span><span class=n>i</span><span class=p>)</span> <span class=p>{</span>
            <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>j</span> <span class=o>=</span> <span class=n>i</span><span class=p>;</span> <span class=n>j</span> <span class=o>&lt;</span> <span class=n>n</span><span class=p>;</span> <span class=o>++</span><span class=n>j</span><span class=p>)</span> <span class=p>{</span>
                <span class=n>f</span><span class=o>[</span><span class=n>i</span><span class=o>][</span><span class=n>j</span><span class=o>]</span> <span class=o>=</span> <span class=o>-</span><span class=mi>1</span><span class=p>;</span>
            <span class=p>}</span>
        <span class=p>}</span>

        <span class=n>compute</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=n>n</span> <span class=mi>1</span><span class=p>);</span>
        <span class=k>return</span> <span class=n>f</span><span class=o>[</span><span class=mi>0</span><span class=o>][</span><span class=n>n</span> <span class=o>-</span> <span class=mi>1</span><span class=o>]</span><span class=p>;</span>
    <span class=p>}</span>
<span class=p>}</span>
</code></pre></div> </div> </div> <div class="admonition note"> <p class=admonition-title>Note</p> <p>划分型动态规划枚举的是长度而不是下标。</p> </div> <h3 id=burst-balloons>Burst Balloons<a class=headerlink href=#burst-balloons title="Permanent link">&para;</a></h3> <ul> <li>This is a hard problem. you should very carefully to analyze the problem and write down the equation. Here is my first attempt, which made a mistake.</li> <li>You should play closely attention to the boundary of the for loop and the state transition equaltion.</li> <li>The time complexity is <span><span class=MathJax_Preview>O(n^3)</span><script type=math/tex>O(n^3)</script></span> , and space complexity is <span><span class=MathJax_Preview>O(n^3)</span><script type=math/tex>O(n^3)</script></span></li> </ul> <div class=highlight><pre><span></span><code><span class=k>class</span> <span class=nc>Solution</span> <span class=p>{</span>
<span class=k>public</span><span class=o>:</span>
    <span class=cm>/**</span>
<span class=cm>     * @param nums a list of integer</span>
<span class=cm>     * @return an integer, maximum coins</span>
<span class=cm>     */</span>
    <span class=kt>int</span> <span class=n>maxCoins</span><span class=p>(</span><span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;&amp;</span> <span class=n>nums</span><span class=p>)</span> <span class=p>{</span>
        <span class=kt>int</span> <span class=n>n</span> <span class=o>=</span> <span class=n>nums</span><span class=p>.</span><span class=n>size</span><span class=p>();</span>
        <span class=k>if</span> <span class=p>(</span><span class=n>n</span> <span class=o>==</span> <span class=mi>1</span><span class=p>)</span> <span class=p>{</span>
            <span class=k>return</span> <span class=n>nums</span><span class=p>[</span><span class=mi>0</span><span class=p>];</span>
        <span class=p>}</span>

        <span class=n>nums</span><span class=p>.</span><span class=n>insert</span><span class=p>(</span><span class=n>nums</span><span class=p>.</span><span class=n>begin</span><span class=p>(),</span> <span class=mi>1</span><span class=p>);</span>
        <span class=n>nums</span><span class=p>.</span><span class=n>push_back</span><span class=p>(</span><span class=mi>1</span><span class=p>);</span>
        <span class=kt>int</span> <span class=n>f</span><span class=p>[</span><span class=n>n</span> <span class=o>+</span> <span class=mi>2</span><span class=p>][</span><span class=n>n</span> <span class=o>+</span> <span class=mi>2</span><span class=p>];</span>
        <span class=kt>int</span> <span class=n>i</span><span class=p>,</span> <span class=n>j</span><span class=p>,</span> <span class=n>k</span><span class=p>,</span> <span class=n>len</span><span class=p>;</span>

        <span class=cm>/* f[i][j] = maxi&lt;k&lt;j{f[i][k] + f[k][j] + a[i] * a[k] * a[j]} */</span>
        <span class=k>for</span> <span class=p>(</span><span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>n</span> <span class=o>+</span> <span class=mi>1</span><span class=p>;</span> <span class=n>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
            <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>i</span> <span class=o>+</span> <span class=mi>1</span><span class=p>]</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
        <span class=p>}</span>

        <span class=k>for</span> <span class=p>(</span><span class=n>len</span> <span class=o>=</span> <span class=mi>3</span><span class=p>;</span> <span class=n>len</span> <span class=o>&lt;=</span> <span class=n>n</span> <span class=o>+</span> <span class=mi>2</span><span class=p>;</span> <span class=n>len</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span><span class=cm>/*边界：长度枚举到n+2 */</span>
            <span class=k>for</span> <span class=p>(</span><span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;=</span> <span class=n>n</span> <span class=o>-</span> <span class=n>len</span> <span class=o>+</span> <span class=mi>2</span><span class=p>;</span> <span class=n>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span><span class=cm>/*边界：i是要从0开始，j到n+1, len = j - i + 1*/</span>
                <span class=n>j</span> <span class=o>=</span> <span class=n>i</span> <span class=o>+</span> <span class=n>len</span> <span class=o>-</span> <span class=mi>1</span><span class=p>;</span>
                <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
                <span class=k>for</span> <span class=p>(</span><span class=n>k</span> <span class=o>=</span> <span class=n>i</span> <span class=o>+</span> <span class=mi>1</span><span class=p>;</span> <span class=n>k</span> <span class=o>&lt;</span> <span class=n>j</span><span class=p>;</span> <span class=n>k</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span><span class=cm>/*边界: k是要burst的气球，我们说f[i][j]是不包括nums[i]和nums[j]的maxCoins*/</span>
                    <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>=</span> <span class=n>max</span><span class=p>(</span><span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>],</span> <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>k</span><span class=p>]</span> <span class=o>+</span> <span class=n>f</span><span class=p>[</span><span class=n>k</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>+</span> <span class=n>nums</span><span class=p>[</span><span class=n>i</span><span class=p>]</span> <span class=o>*</span> <span class=n>nums</span><span class=p>[</span><span class=n>k</span><span class=p>]</span> <span class=o>*</span> <span class=n>nums</span><span class=p>[</span><span class=n>j</span><span class=p>]);</span>
                <span class=p>}</span>
            <span class=p>}</span>
        <span class=p>}</span>

        <span class=k>return</span> <span class=n>f</span><span class=p>[</span><span class=mi>0</span><span class=p>][</span><span class=n>n</span> <span class=o>+</span> <span class=mi>1</span><span class=p>];</span>
    <span class=p>}</span>
<span class=p>};</span>
</code></pre></div> <h3 id=scramble-string>Scramble String<a class=headerlink href=#scramble-string title="Permanent link">&para;</a></h3> <ul> <li>Here is the analysis</li> <li>这里时间复杂度达到了<span><span class=MathJax_Preview>O(n^4)</span><script type=math/tex>O(n^4)</script></span>, 空间复杂度通过降维处理为<span><span class=MathJax_Preview>O(n^3)</span><script type=math/tex>O(n^3)</script></span>.</li> </ul> <div class=highlight><pre><span></span><code>/*  ---------------------
 * |  s1     |  s2      |  S
 *  ---------------------
 *  ---------------------
 * |  t1     |  t2      |  T
 *  ---------------------
 * Last step: s1 &lt;==&gt; t1 &amp;&amp; s2 &lt;==&gt; t2 OR s1 &lt;==&gt; t2 &amp;&amp; S2 &lt;==&gt; t1
 * Subproblem: s1 &lt; S
 * state: f[i][j][h][k] 代表是否S中从i到j的字符是由T中从h到k的字符scramble
 * 因为长度一样，所以我们可以对状态进行降维处理。
 * state: f[i][j][k]: 代表 s[i], ... s[i + k - 1] 是否是 t[j], ... t[j + k - * 1] scramble string.
 * equation: f[i][j][k] = (f[i][j][w] &amp;&amp; f[i + w][j + w] || f[i][j + k - w][w] &amp;&amp; f[i + w][j][k - w]) for all 0 &lt; w &lt; k
 * init: f[0][0][0] = ? (不重要)
 *       if (s[i] == t[j] &amp;&amp; k == 1) {
 *          f[i][j][1] = true;
 *       }
 *
 */
</code></pre></div> <div class=highlight><pre><span></span><code><span class=k>class</span> <span class=nc>Solution</span> <span class=p>{</span>
<span class=k>public</span><span class=o>:</span>
    <span class=cm>/* *</span>
<span class=cm>     * f[i][j][k] = OR_{0 &lt; w &lt; k}(f[i][j][w] &amp;&amp; f[i+w][j+w][k-w]) OR (f[i][j+w][w] &amp;&amp; f[i+w][j][)</span>
<span class=cm>     */</span>
    <span class=kt>bool</span> <span class=n>isScramble</span><span class=p>(</span><span class=n>string</span><span class=o>&amp;</span> <span class=n>s1</span><span class=p>,</span> <span class=n>string</span><span class=o>&amp;</span> <span class=n>s2</span><span class=p>)</span> <span class=p>{</span>
        <span class=kt>int</span> <span class=n>m</span> <span class=o>=</span> <span class=n>s1</span><span class=p>.</span><span class=n>length</span><span class=p>();</span>
        <span class=kt>int</span> <span class=n>n</span> <span class=o>=</span> <span class=n>s2</span><span class=p>.</span><span class=n>length</span><span class=p>();</span>
        <span class=k>if</span> <span class=p>(</span><span class=n>m</span> <span class=o>!=</span> <span class=n>n</span><span class=p>)</span>
            <span class=k>return</span> <span class=nb>false</span><span class=p>;</span>

        <span class=k>if</span> <span class=p>(</span><span class=n>m</span> <span class=o>==</span> <span class=mi>0</span><span class=p>)</span>
            <span class=k>return</span> <span class=nb>true</span><span class=p>;</span>

        <span class=kt>int</span> <span class=n>f</span><span class=p>[</span><span class=n>n</span><span class=p>][</span><span class=n>n</span><span class=p>][</span><span class=n>n</span> <span class=o>+</span> <span class=mi>1</span><span class=p>];</span>
        <span class=kt>int</span> <span class=n>i</span><span class=p>,</span> <span class=n>j</span><span class=p>,</span> <span class=n>k</span><span class=p>,</span> <span class=n>w</span><span class=p>;</span>

        <span class=cm>/* init */</span>
        <span class=k>for</span> <span class=p>(</span><span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>n</span><span class=p>;</span> <span class=n>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
            <span class=k>for</span> <span class=p>(</span><span class=n>j</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>j</span> <span class=o>&lt;</span> <span class=n>n</span><span class=p>;</span> <span class=n>j</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
                <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>][</span><span class=mi>1</span><span class=p>]</span> <span class=o>=</span> <span class=n>s1</span><span class=p>[</span><span class=n>i</span><span class=p>]</span> <span class=o>==</span> <span class=n>s2</span><span class=p>[</span><span class=n>j</span><span class=p>];</span>
            <span class=p>}</span>
        <span class=p>}</span>

        <span class=k>for</span> <span class=p>(</span><span class=n>k</span> <span class=o>=</span> <span class=mi>2</span><span class=p>;</span> <span class=n>k</span> <span class=o>&lt;=</span> <span class=n>n</span><span class=p>;</span> <span class=n>k</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
            <span class=k>for</span> <span class=p>(</span><span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;=</span> <span class=n>n</span> <span class=o>-</span> <span class=n>k</span><span class=p>;</span> <span class=n>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
                <span class=k>for</span> <span class=p>(</span><span class=n>j</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>j</span> <span class=o>&lt;=</span> <span class=n>n</span> <span class=o>-</span> <span class=n>k</span><span class=p>;</span> <span class=n>j</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
                    <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>][</span><span class=n>k</span><span class=p>]</span> <span class=o>=</span> <span class=nb>false</span><span class=p>;</span>
                    <span class=c1>//enumerate partition position (s1&#39;s length)</span>
                    <span class=k>for</span> <span class=p>(</span><span class=n>w</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span> <span class=n>w</span> <span class=o>&lt;</span> <span class=n>k</span><span class=p>;</span> <span class=n>w</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
                        <span class=c1>// case 1: no swap match</span>
                        <span class=k>if</span> <span class=p>(</span><span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>][</span><span class=n>w</span><span class=p>]</span> <span class=o>&amp;&amp;</span> <span class=n>f</span><span class=p>[</span><span class=n>i</span> <span class=o>+</span> <span class=n>w</span><span class=p>][</span><span class=n>j</span> <span class=o>+</span> <span class=n>w</span><span class=p>][</span><span class=n>k</span> <span class=o>-</span> <span class=n>w</span><span class=p>])</span> <span class=p>{</span>
                            <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>][</span><span class=n>k</span><span class=p>]</span> <span class=o>=</span> <span class=nb>true</span><span class=p>;</span>
                            <span class=k>break</span><span class=p>;</span>
                        <span class=p>}</span>
                        <span class=c1>// case 2: swap match</span>
                        <span class=k>if</span> <span class=p>(</span><span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span> <span class=o>+</span> <span class=n>k</span> <span class=o>-</span> <span class=n>w</span><span class=p>][</span><span class=n>w</span><span class=p>]</span> <span class=o>&amp;&amp;</span> <span class=n>f</span><span class=p>[</span><span class=n>i</span> <span class=o>+</span> <span class=n>w</span><span class=p>][</span><span class=n>j</span><span class=p>][</span><span class=n>k</span> <span class=o>-</span> <span class=n>w</span><span class=p>])</span> <span class=p>{</span>
                            <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>][</span><span class=n>k</span><span class=p>]</span> <span class=o>=</span> <span class=nb>true</span><span class=p>;</span>
                            <span class=k>break</span><span class=p>;</span>
                        <span class=p>}</span>
                    <span class=p>}</span>

                <span class=p>}</span>
            <span class=p>}</span>

        <span class=p>}</span>

        <span class=k>return</span> <span class=n>f</span><span class=p>[</span><span class=mi>0</span><span class=p>][</span><span class=mi>0</span><span class=p>][</span><span class=n>n</span><span class=p>];</span>
    <span class=p>}</span>
<span class=p>};</span>
</code></pre></div> <h2 id=_4>区间型动态规划总结<a class=headerlink href=#_4 title="Permanent link">&para;</a></h2> <ul> <li>给定一个序列/字符串，进行一些操作</li> <li>最后一步会将序列/字符串去头/去尾</li> <li>剩下的会是一个区间<code>[i, j]</code></li> <li>状态自然定义为<code>f[i][j]</code>，表示面对子序列<code>[i, …, j]</code>时的最优性质</li> <li>写程序时注意要枚举区间长度</li> </ul> <h2 id=lecture-6>Lecture 6<a class=headerlink href=#lecture-6 title="Permanent link">&para;</a></h2> <table> <thead> <tr> <th>Problem</th> <th>Category</th> </tr> </thead> <tbody> <tr> <td><a href=#longest-common-subsequence>Longest Common Subsequence</a></td> <td></td> </tr> <tr> <td><a href=#interleaving-string>Interleaving String</a></td> <td></td> </tr> <tr> <td><a href=#edit-distance>Edit Distance</a></td> <td></td> </tr> <tr> <td><a href=#distinct-subsequences>Distinct Subsequences</a></td> <td></td> </tr> <tr> <td><a href=#regular-expression-matching>Regular Expression Matching</a></td> <td></td> </tr> <tr> <td><a href=#wildcard-matching>Wildcard Matching</a></td> <td></td> </tr> <tr> <td><a href=#ones-and-zeroes>Ones and Zeroes</a></td> <td></td> </tr> </tbody> </table> <h3 id=longest-common-subsequence>Longest Common Subsequence<a class=headerlink href=#longest-common-subsequence title="Permanent link">&para;</a></h3> <ul> <li>State: <code>f[i][j]</code>, LCS of the first <code>i</code> chars from A and the first <code>j</code> chars from B.</li> <li>定义状态是一定要注意下标的意义。在这里我们指的是前i个字符和前j个字符</li> <li>notice we can initialize the base case inside the loop.</li> </ul> <div class=highlight><pre><span></span><code><span class=k>class</span> <span class=nc>Solution</span> <span class=p>{</span>
<span class=k>public</span><span class=o>:</span>
    <span class=kt>int</span> <span class=n>longestCommonSubsequence</span><span class=p>(</span><span class=n>string</span> <span class=n>A</span><span class=p>,</span> <span class=n>string</span> <span class=n>B</span><span class=p>)</span> <span class=p>{</span>
        <span class=kt>int</span> <span class=n>m</span> <span class=o>=</span> <span class=n>A</span><span class=p>.</span><span class=n>length</span><span class=p>();</span>
        <span class=kt>int</span> <span class=n>n</span> <span class=o>=</span> <span class=n>B</span><span class=p>.</span><span class=n>length</span><span class=p>();</span>

        <span class=k>if</span> <span class=p>(</span><span class=n>m</span> <span class=o>==</span> <span class=mi>0</span> <span class=o>||</span> <span class=n>n</span> <span class=o>==</span> <span class=mi>0</span><span class=p>)</span> <span class=p>{</span>
            <span class=k>return</span> <span class=mi>0</span><span class=p>;</span>
        <span class=p>}</span>

        <span class=kt>int</span> <span class=n>f</span><span class=p>[</span><span class=n>m</span> <span class=o>+</span> <span class=mi>1</span><span class=p>][</span><span class=n>n</span> <span class=o>+</span> <span class=mi>1</span><span class=p>];</span>

        <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;=</span><span class=n>m</span><span class=p>;</span> <span class=o>++</span><span class=n>i</span><span class=p>)</span> <span class=p>{</span>
            <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>j</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>j</span> <span class=o>&lt;=</span><span class=n>n</span><span class=p>;</span> <span class=o>++</span><span class=n>j</span><span class=p>)</span> <span class=p>{</span>
                <span class=k>if</span> <span class=p>(</span><span class=n>i</span> <span class=o>==</span> <span class=mi>0</span> <span class=o>||</span> <span class=n>j</span> <span class=o>==</span> <span class=mi>0</span><span class=p>)</span> <span class=p>{</span>
                    <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
                    <span class=k>continue</span><span class=p>;</span>
                <span class=p>}</span>

                <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>=</span> <span class=n>max</span><span class=p>(</span><span class=n>f</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=mi>1</span><span class=p>][</span><span class=n>j</span><span class=p>],</span> <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span> <span class=o>-</span> <span class=mi>1</span><span class=p>]);</span>
                <span class=k>if</span> <span class=p>(</span><span class=n>A</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=mi>1</span><span class=p>]</span> <span class=o>==</span> <span class=n>B</span><span class=p>[</span><span class=n>j</span> <span class=o>-</span> <span class=mi>1</span><span class=p>])</span> <span class=p>{</span>
                    <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>=</span> <span class=n>max</span><span class=p>(</span><span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>],</span> <span class=n>f</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=mi>1</span><span class=p>][</span><span class=n>j</span> <span class=o>-</span> <span class=mi>1</span><span class=p>]</span> <span class=o>+</span> <span class=mi>1</span><span class=p>);</span>
                <span class=p>}</span>
            <span class=p>}</span>
        <span class=p>}</span>

        <span class=k>return</span> <span class=n>f</span><span class=p>[</span><span class=n>m</span><span class=p>][</span><span class=n>n</span><span class=p>];</span>
    <span class=p>}</span>
<span class=p>};</span>
</code></pre></div> <h3 id=interleaving-string>Interleaving String<a class=headerlink href=#interleaving-string title="Permanent link">&para;</a></h3> <ul> <li>Consider the where the last char in s3 came from, either from s1 or s2.</li> <li>state: <code>f[i][j]</code>, whether the <strong>first <code>i</code></strong> from <code>s1</code> and the <strong>first <code>j</code></strong> from <code>s2</code> is interleaving of the <strong>first <code>i + j</code></strong> from <code>s3</code>.</li> <li>equation: <code>f[i][j] = (f[i][j - 1] &amp;&amp; s[i + j - 1] == s2[j - 1]) || (f[i - 1][j] &amp;&amp; s[i + j - 1] == s1[i - 1])</code></li> <li>we may attempt to have 3d matrix for the DP, but we can reduce the state representation by noticing the index of <code>s3</code> can be derived from index of<code>s1</code> and <code>s2</code>.</li> </ul> <div class=highlight><pre><span></span><code><span class=cm>/* *</span>
<span class=cm> * last step: last s3[k - 1] == s1[m - 1] || s3[k - 1] == s2[n - 1]</span>
<span class=cm> * state: f[i][j][k]: s3[0],..s[k - 1] is interleaving of s1[0], ... s[i - 1] and s2[0], .. s[j - 1]</span>
<span class=cm> * equation 1: f[i][j][k] = (f[i][j - 1][k - 1] &amp;&amp; s3[k - 1] == s1[i - 1])</span>
<span class=cm> *  || (f[i - 1][j][k - 1] &amp;&amp; s3[k - 1] == s2[j - 1])</span>
<span class=cm> * equation 2: f[i][j] = (f[i][j - 1] &amp;&amp; s[i + j - 1] == s2[j - 1])</span>
<span class=cm> *  || (f[i - 1][j] &amp;&amp; s[i + j - 1] == s1[i - 1])</span>
<span class=cm> * init: f[0][0] = 1;</span>
<span class=cm> * f[0][0] = false if k &gt; 0</span>
<span class=cm> */</span>
<span class=k>class</span> <span class=nc>Solution</span> <span class=p>{</span>
<span class=k>public</span><span class=o>:</span>
    <span class=kt>bool</span> <span class=n>isInterleave</span><span class=p>(</span><span class=n>string</span> <span class=n>s1</span><span class=p>,</span> <span class=n>string</span> <span class=n>s2</span><span class=p>,</span> <span class=n>string</span> <span class=n>s3</span><span class=p>)</span> <span class=p>{</span>
        <span class=kt>int</span> <span class=n>m</span> <span class=o>=</span> <span class=n>s1</span><span class=p>.</span><span class=n>length</span><span class=p>();</span>
        <span class=kt>int</span> <span class=n>n</span> <span class=o>=</span> <span class=n>s2</span><span class=p>.</span><span class=n>length</span><span class=p>();</span>
        <span class=kt>int</span> <span class=n>k</span> <span class=o>=</span> <span class=n>s3</span><span class=p>.</span><span class=n>length</span><span class=p>();</span>
        <span class=k>if</span> <span class=p>(</span><span class=n>m</span> <span class=o>+</span> <span class=n>n</span> <span class=o>!=</span> <span class=n>k</span><span class=p>)</span>
            <span class=k>return</span> <span class=nb>false</span><span class=p>;</span>

        <span class=n>f</span><span class=p>[</span><span class=n>m</span> <span class=o>+</span> <span class=mi>1</span><span class=p>][</span><span class=n>n</span> <span class=o>+</span> <span class=mi>1</span><span class=p>];</span>
        <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;=</span> <span class=n>m</span><span class=p>;</span> <span class=o>++</span><span class=n>i</span><span class=p>)</span> <span class=p>{</span>
            <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>j</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>j</span> <span class=o>&lt;=</span> <span class=n>n</span><span class=p>;</span> <span class=o>++</span><span class=n>j</span><span class=p>)</span> <span class=p>{</span>
                <span class=k>if</span> <span class=p>(</span><span class=n>i</span> <span class=o>==</span> <span class=mi>0</span> <span class=o>||</span> <span class=n>j</span> <span class=o>==</span> <span class=mi>0</span><span class=p>)</span> <span class=p>{</span>
                    <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>=</span> <span class=nb>false</span><span class=p>;</span>
                    <span class=k>continue</span><span class=p>;</span>
                <span class=p>}</span>

                <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>=</span> <span class=nb>false</span><span class=p>;</span>
                <span class=k>if</span> <span class=p>(</span><span class=n>i</span> <span class=o>&gt;</span> <span class=mi>0</span> <span class=o>&amp;&amp;</span> <span class=n>s1</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=mi>1</span><span class=p>]</span> <span class=o>==</span> <span class=n>s3</span><span class=p>[</span><span class=n>i</span> <span class=o>+</span> <span class=n>j</span> <span class=o>-</span> <span class=mi>1</span><span class=p>])</span> <span class=p>{</span>
                    <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>|=</span> <span class=n>f</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=mi>1</span><span class=p>][</span><span class=n>j</span><span class=p>];</span>
                <span class=p>}</span>

                <span class=k>if</span> <span class=p>(</span><span class=n>j</span> <span class=o>&gt;</span> <span class=mi>0</span> <span class=o>&amp;&amp;</span> <span class=n>s2</span><span class=p>[</span><span class=n>j</span> <span class=o>-</span> <span class=mi>1</span><span class=p>]</span> <span class=o>==</span> <span class=n>s3</span><span class=p>[</span><span class=n>i</span> <span class=o>+</span> <span class=n>j</span> <span class=o>-</span> <span class=mi>1</span><span class=p>])</span> <span class=p>{</span>
                    <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>|=</span> <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span> <span class=o>-</span> <span class=mi>1</span><span class=p>];</span>
                <span class=p>}</span>
            <span class=p>}</span>
        <span class=p>}</span>

        <span class=k>return</span> <span class=n>f</span><span class=p>[</span><span class=n>m</span><span class=p>][</span><span class=n>n</span><span class=p>];</span>
    <span class=p>}</span>
<span class=p>};</span>
</code></pre></div> <h3 id=edit-distance>Edit Distance<a class=headerlink href=#edit-distance title="Permanent link">&para;</a></h3> <ul> <li>Notice the state update is not straightforward, you need to have the correct setting first and then write down the state transition equation. We define the state as follows <code>f[i][j]</code> is the edit distance to make the first <code>i</code> chars in <code>A</code> and first <code>j</code> chars in <code>B</code> the same.</li> <li>To make A and B the same, their last step need to be the same. There are three editing operations:<ol> <li>Insert a char at the end of <code>A</code>, so that <code>A[-1] == B[-1]</code>. The state should be updated as <code>f[i][j] = f[i][j - 1] + 1</code>. This assignment operation purely mean that I can get <code>f[i][j]</code> from subproblem result. It <strong>doesn't</strong> indicate any of ther iteration of the string. You cannot have it like <code>f[i][j] = f[i - 1][j - 1] + 1</code>.</li> <li>Delete a char at the end of <code>A</code>, so that <code>A[-1] == B[-1]</code>. The state update should be <code>f[i][j] = f[i - 1][j] + 1</code>.</li> <li>Replace a char at the end of <code>A</code>, so that <code>A[-1] == B[-1]</code>. The state update should be <code>f[i][j] = f[i - 1][j - 1] + 1</code>.</li> <li>No operation is needed, the last chars of the arrays are the same, such as <code>A[-1] == B[-1]</code>. The state update should be <code>f[i][j] = f[i - 1][j - 1]</code>.</li> </ol> </li> <li>notice the state represent the <strong>edit distance</strong>, don't try to correlate it to the index to the string <strong>after the edit</strong>, no string is changed while calculating the edit distance <code>f[i][j]</code>.</li> </ul> <p><img alt="Edit Distance" src=../fig/edit-distance.png></p> <div class=tabbed-set data-tabs=21:2><input checked=checked id=__tabbed_21_1 name=__tabbed_21 type=radio><label for=__tabbed_21_1>C++ DP Space O(mn)</label><div class=tabbed-content> <div class=highlight><pre><span></span><code><span class=k>class</span> <span class=nc>Solution</span> <span class=p>{</span>
<span class=k>public</span><span class=o>:</span>
    <span class=cm>/* *</span>
<span class=cm>    * State: f[i][j] is the minimum number of steps to edit w1 to w2.</span>
<span class=cm>    * f[i][j] = f[i][j - 1] + 1; insert</span>
<span class=cm>    *         = f[i - 1][j] + 1; delete</span>
<span class=cm>    *         = f[i - 1][j - 1] + 1; replace</span>
<span class=cm>    *         = f[i - 1][j - 1]; no opration needed</span>
<span class=cm>    */</span>
    <span class=kt>int</span> <span class=n>minDistance</span><span class=p>(</span><span class=n>string</span> <span class=n>word1</span><span class=p>,</span> <span class=n>string</span> <span class=n>word2</span><span class=p>)</span> <span class=p>{</span>
        <span class=kt>int</span> <span class=n>m</span> <span class=o>=</span> <span class=n>word1</span><span class=p>.</span><span class=n>length</span><span class=p>();</span>
        <span class=kt>int</span> <span class=n>n</span> <span class=o>=</span> <span class=n>word2</span><span class=p>.</span><span class=n>length</span><span class=p>();</span>

        <span class=kt>int</span> <span class=n>f</span><span class=p>[</span><span class=n>m</span> <span class=o>+</span> <span class=mi>1</span><span class=p>][</span><span class=n>n</span> <span class=o>+</span> <span class=mi>1</span><span class=p>];</span>

        <span class=n>f</span><span class=p>[</span><span class=mi>0</span><span class=p>][</span><span class=mi>0</span><span class=p>]</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
        <span class=kt>int</span> <span class=n>i</span><span class=p>,</span> <span class=n>j</span><span class=p>;</span>

        <span class=k>for</span> <span class=p>(</span><span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;=</span> <span class=n>m</span><span class=p>;</span> <span class=n>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
            <span class=k>for</span> <span class=p>(</span><span class=n>j</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>j</span> <span class=o>&lt;=</span> <span class=n>n</span><span class=p>;</span> <span class=n>j</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
                <span class=cm>/* init */</span>
                <span class=k>if</span> <span class=p>(</span><span class=n>i</span> <span class=o>==</span> <span class=mi>0</span><span class=p>)</span> <span class=p>{</span>
                    <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>=</span> <span class=n>j</span><span class=p>;</span>
                    <span class=k>continue</span><span class=p>;</span>
                <span class=p>}</span>

                <span class=k>if</span> <span class=p>(</span><span class=n>j</span> <span class=o>==</span> <span class=mi>0</span><span class=p>)</span> <span class=p>{</span>
                    <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>=</span> <span class=n>i</span><span class=p>;</span>
                    <span class=k>continue</span><span class=p>;</span>
                <span class=p>}</span>
                            <span class=c1>// delete          // insert</span>
                <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>=</span> <span class=n>min</span><span class=p>(</span><span class=n>f</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=mi>1</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>+</span> <span class=mi>1</span><span class=p>,</span> <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span> <span class=o>-</span> <span class=mi>1</span><span class=p>]</span> <span class=o>+</span> <span class=mi>1</span><span class=p>);</span>
                                    <span class=c1>// replace</span>
                <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>=</span> <span class=n>min</span><span class=p>(</span><span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>],</span> <span class=n>f</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=mi>1</span><span class=p>][</span><span class=n>j</span> <span class=o>-</span> <span class=mi>1</span><span class=p>]</span> <span class=o>+</span> <span class=mi>1</span><span class=p>);</span>

                <span class=c1>// no operation</span>
                <span class=k>if</span> <span class=p>(</span><span class=n>word1</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=mi>1</span><span class=p>]</span> <span class=o>==</span> <span class=n>word2</span><span class=p>[</span><span class=n>j</span> <span class=o>-</span> <span class=mi>1</span><span class=p>])</span> <span class=p>{</span>
                    <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>=</span> <span class=n>min</span><span class=p>(</span><span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>],</span> <span class=n>f</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=mi>1</span><span class=p>][</span><span class=n>j</span> <span class=o>-</span> <span class=mi>1</span><span class=p>]);</span>
                <span class=p>}</span>

            <span class=p>}</span>
        <span class=p>}</span>

        <span class=k>return</span> <span class=n>f</span><span class=p>[</span><span class=n>m</span><span class=p>][</span><span class=n>n</span><span class=p>];</span>
    <span class=p>};</span>
<span class=p>};</span>
</code></pre></div> </div> <input id=__tabbed_21_2 name=__tabbed_21 type=radio><label for=__tabbed_21_2>C++ space O(n)</label><div class=tabbed-content> <div class=highlight><pre><span></span><code><span class=k>class</span> <span class=nc>Solution</span> <span class=p>{</span>
<span class=k>public</span><span class=o>:</span>
    <span class=cm>/* *</span>
<span class=cm>    * State: f[i][j] is the minimum number of steps to convert w1 to w2. (len(w1) &lt; len(w2))</span>
<span class=cm>    * f[i][j] = f[i][j - 1] + 1; insert</span>
<span class=cm>    *         = f[i - 1][j] + 1; delete</span>
<span class=cm>    *         = f[i - 1][j - 1] + 1; replace</span>
<span class=cm>    *         = f[i - 1][j - 1]; no opration needed</span>
<span class=cm>    *</span>
<span class=cm>    */</span>
    <span class=kt>int</span> <span class=n>minDistance</span><span class=p>(</span><span class=n>string</span> <span class=n>word1</span><span class=p>,</span> <span class=n>string</span> <span class=n>word2</span><span class=p>)</span> <span class=p>{</span>
        <span class=kt>int</span> <span class=n>m</span> <span class=o>=</span> <span class=n>word1</span><span class=p>.</span><span class=n>length</span><span class=p>();</span>
        <span class=kt>int</span> <span class=n>n</span> <span class=o>=</span> <span class=n>word2</span><span class=p>.</span><span class=n>length</span><span class=p>();</span>

        <span class=kt>int</span> <span class=n>f</span><span class=p>[</span><span class=n>m</span> <span class=o>+</span> <span class=mi>1</span><span class=p>][</span><span class=n>n</span> <span class=o>+</span> <span class=mi>1</span><span class=p>];</span>

        <span class=n>f</span><span class=p>[</span><span class=mi>0</span><span class=p>][</span><span class=mi>0</span><span class=p>]</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
        <span class=kt>int</span> <span class=n>i</span><span class=p>,</span> <span class=n>j</span><span class=p>;</span>
        <span class=kt>int</span> <span class=n>prev</span> <span class=o>=</span> <span class=mi>-1</span><span class=p>;</span>
        <span class=kt>int</span> <span class=n>curr</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>

        <span class=k>for</span> <span class=p>(</span><span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;=</span> <span class=n>m</span><span class=p>;</span> <span class=n>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
            <span class=n>prev</span> <span class=o>=</span> <span class=n>curr</span><span class=p>;</span>
            <span class=n>curr</span> <span class=o>=</span> <span class=mi>1</span> <span class=o>-</span> <span class=n>curr</span><span class=p>;</span>
            <span class=k>for</span> <span class=p>(</span><span class=n>j</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>j</span> <span class=o>&lt;=</span> <span class=n>n</span><span class=p>;</span> <span class=n>j</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
                <span class=cm>/* init */</span>
                <span class=k>if</span> <span class=p>(</span><span class=n>i</span> <span class=o>==</span> <span class=mi>0</span><span class=p>)</span> <span class=p>{</span>
                    <span class=n>f</span><span class=p>[</span><span class=n>curr</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>=</span> <span class=n>j</span><span class=p>;</span>
                    <span class=k>continue</span><span class=p>;</span>
                <span class=p>}</span>

                <span class=k>if</span> <span class=p>(</span><span class=n>j</span> <span class=o>==</span> <span class=mi>0</span><span class=p>)</span> <span class=p>{</span>
                    <span class=n>f</span><span class=p>[</span><span class=n>curr</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>=</span> <span class=n>i</span><span class=p>;</span>
                    <span class=k>continue</span><span class=p>;</span>
                <span class=p>}</span>
                            <span class=c1>// delete          // insert</span>
                <span class=n>f</span><span class=p>[</span><span class=n>curr</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>=</span> <span class=n>min</span><span class=p>(</span><span class=n>f</span><span class=p>[</span><span class=n>prev</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>+</span> <span class=mi>1</span><span class=p>,</span> <span class=n>f</span><span class=p>[</span><span class=n>curr</span><span class=p>][</span><span class=n>j</span> <span class=o>-</span> <span class=mi>1</span><span class=p>]</span> <span class=o>+</span> <span class=mi>1</span><span class=p>);</span>
                                    <span class=c1>// replace</span>
                <span class=n>f</span><span class=p>[</span><span class=n>curr</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>=</span> <span class=n>min</span><span class=p>(</span><span class=n>f</span><span class=p>[</span><span class=n>curr</span><span class=p>][</span><span class=n>j</span><span class=p>],</span> <span class=n>f</span><span class=p>[</span><span class=n>prev</span><span class=p>][</span><span class=n>j</span> <span class=o>-</span> <span class=mi>1</span><span class=p>]</span> <span class=o>+</span> <span class=mi>1</span><span class=p>);</span>

                <span class=c1>// no operation</span>
                <span class=k>if</span> <span class=p>(</span><span class=n>word1</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=mi>1</span><span class=p>]</span> <span class=o>==</span> <span class=n>word2</span><span class=p>[</span><span class=n>j</span> <span class=o>-</span> <span class=mi>1</span><span class=p>])</span> <span class=p>{</span>
                    <span class=n>f</span><span class=p>[</span><span class=n>curr</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>=</span> <span class=n>min</span><span class=p>(</span><span class=n>f</span><span class=p>[</span><span class=n>curr</span><span class=p>][</span><span class=n>j</span><span class=p>],</span> <span class=n>f</span><span class=p>[</span><span class=n>prev</span><span class=p>][</span><span class=n>j</span> <span class=o>-</span> <span class=mi>1</span><span class=p>]);</span>
                <span class=p>}</span>

            <span class=p>}</span>
        <span class=p>}</span>

        <span class=k>return</span> <span class=n>f</span><span class=p>[</span><span class=n>curr</span><span class=p>][</span><span class=n>n</span><span class=p>];</span>
    <span class=p>};</span>
<span class=p>};</span>
</code></pre></div> </div> </div> <div class="admonition note"> <p class=admonition-title>Note</p> <ul> <li>When using the <code>prev</code> and <code>curr</code> to index the 2d array, don't have to strictly follow the meaning of it. What you just need to make sure is the two row is rolling and not going to overwrite a useful value.</li> <li>Notice the update of the "rolling index" is in between the two for loops. It has nothing to do with index <code>j</code>.</li> </ul> </div> <h3 id=distinct-subsequence>Distinct Subsequence<a class=headerlink href=#distinct-subsequence title="Permanent link">&para;</a></h3> <ul> <li>Last step, <code>t[n-1]</code> match to <code>s[m-1]</code> or doesn't match.</li> <li>State: <code>f[i][j]</code> is the number of subsequence for <code>t[0:j-2]</code> in <code>s[0:i-2]</code></li> <li>state transition: <code>f[i][j] = f[i - 1][j - 1]|s[i - 1] == t[j - 1] + f[i - 1][j]</code></li> </ul> <div class=highlight><pre><span></span><code><span class=k>class</span> <span class=nc>Solution</span> <span class=p>{</span>
<span class=k>public</span><span class=o>:</span>
    <span class=cm>/* *</span>
<span class=cm>     * Last step: S[m - 1] in the</span>
<span class=cm>     * S[0], ... S[m - 2], S[m - 1]</span>
<span class=cm>     * T[0], ... T[n - 2], T[n - 1]</span>
<span class=cm>     * State: f[i][j]: # of subsequence for the first j chars in T have in the first i chars in S</span>
<span class=cm>     * Equation: f[i][j] = f[i - 1][j - 1]|S[i - 1] == T[j - 1] + f[i - 1][j]</span>
<span class=cm>     * 1. S[m - 1] == T[n - 1]</span>
<span class=cm>     *    1. f[i - 1][j - 1]</span>
<span class=cm>     *    2. f[i - 1][j]</span>
<span class=cm>     * 2. S[m - 1] != T[n - 1]</span>
<span class=cm>     *    1. f[i - 1][j]</span>
<span class=cm>     * Init: f[0][0] = 1;</span>
<span class=cm>     *       f[0][i] = 0;</span>
<span class=cm>     *       f[i][0] = 1;</span>
<span class=cm>     */</span>
    <span class=kt>int</span> <span class=n>numDistinct</span><span class=p>(</span><span class=n>string</span> <span class=o>&amp;</span><span class=n>S</span><span class=p>,</span> <span class=n>string</span> <span class=o>&amp;</span><span class=n>T</span><span class=p>)</span> <span class=p>{</span>
        <span class=kt>int</span> <span class=n>m</span> <span class=o>=</span> <span class=n>S</span><span class=p>.</span><span class=n>length</span><span class=p>();</span>
        <span class=kt>int</span> <span class=n>n</span> <span class=o>=</span> <span class=n>T</span><span class=p>.</span><span class=n>length</span><span class=p>();</span>

        <span class=kt>int</span> <span class=n>f</span><span class=p>[</span><span class=n>m</span> <span class=o>+</span> <span class=mi>1</span><span class=p>][</span><span class=n>n</span> <span class=o>+</span> <span class=mi>1</span><span class=p>];</span>

        <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;=</span> <span class=n>m</span><span class=p>;</span> <span class=n>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
            <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>j</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>j</span> <span class=o>&lt;=</span> <span class=n>n</span><span class=p>;</span> <span class=n>j</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
                <span class=k>if</span> <span class=p>(</span><span class=n>i</span> <span class=o>==</span> <span class=mi>0</span> <span class=o>&amp;&amp;</span> <span class=n>j</span> <span class=o>==</span> <span class=mi>0</span><span class=p>)</span> <span class=p>{</span>
                    <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span>
                    <span class=k>continue</span><span class=p>;</span>
                <span class=p>}</span>
                <span class=k>if</span> <span class=p>(</span><span class=n>i</span> <span class=o>==</span> <span class=mi>0</span><span class=p>)</span> <span class=p>{</span>
                    <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
                    <span class=k>continue</span><span class=p>;</span>
                <span class=p>}</span>
                <span class=k>if</span> <span class=p>(</span><span class=n>j</span> <span class=o>==</span> <span class=mi>0</span><span class=p>)</span> <span class=p>{</span>
                    <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span>
                    <span class=k>continue</span><span class=p>;</span>
                <span class=p>}</span>

                <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>=</span> <span class=n>f</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=mi>1</span><span class=p>][</span><span class=n>j</span><span class=p>];</span>
                <span class=k>if</span> <span class=p>(</span><span class=n>S</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=mi>1</span><span class=p>]</span> <span class=o>==</span> <span class=n>T</span><span class=p>[</span><span class=n>j</span> <span class=o>-</span> <span class=mi>1</span><span class=p>])</span> <span class=p>{</span>
                    <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>+=</span> <span class=n>f</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=mi>1</span><span class=p>][</span><span class=n>j</span> <span class=o>-</span> <span class=mi>1</span><span class=p>];</span>
                <span class=p>}</span>
            <span class=p>}</span>
        <span class=p>}</span>

        <span class=k>return</span> <span class=n>f</span><span class=p>[</span><span class=n>m</span><span class=p>][</span><span class=n>n</span><span class=p>];</span>
    <span class=p>}</span>
<span class=p>};</span>
</code></pre></div> <h3 id=regular-expression-matching>Regular Expression Matching<a class=headerlink href=#regular-expression-matching title="Permanent link">&para;</a></h3> <div class=tabbed-set data-tabs=22:2><input checked=checked id=__tabbed_22_1 name=__tabbed_22 type=radio><label for=__tabbed_22_1>C++ DP Solution</label><div class=tabbed-content> <div class=highlight><pre><span></span><code><span class=k>class</span> <span class=nc>Solution</span> <span class=p>{</span>
<span class=k>public</span><span class=o>:</span>
    <span class=cm>/* *</span>
<span class=cm>    * Last step (last char to match in the strings):</span>
<span class=cm>    *      p[j - 1] != s[i - 1] ==&gt; f[i][j] = false;</span>
<span class=cm>    *      p[j - 1] == s[i - 1] ==&gt; f[i][j] = f[i - 1][j - 1];</span>
<span class=cm>    *      p[j - 1] == &#39;.&#39; ==&gt; f[i][j] = f[i - 1][j - 1]</span>
<span class=cm>    *</span>
<span class=cm>    *      p[j - 1] == &#39;*&#39;,</span>
<span class=cm>    * case 1   p[j - 2] == &#39;.&#39; ==&gt; f[i][j] = f[i - 1][j]; ??? why not f[i][j] = true;</span>
<span class=cm>    *          p[j - 2] != &#39;.&#39;</span>
<span class=cm>    *              p[j - 2] == s[i - 1] ==&gt; f[i][j] = f[i&#39;][j - 2] | i&#39; is the length not equal to p[j - 2].</span>
<span class=cm>    * which one?  /</span>
<span class=cm>    *             \</span>
<span class=cm>    * case 2       p[j - 2] == s[i - 1] ==&gt; f[i][j] = f[i - 1][j]</span>
<span class=cm>    *              p[j - 2] != s[i - 1] ==&gt; f[i][j] = f[i][j - 2];</span>
<span class=cm>    *</span>
<span class=cm>    * We see that case 1 and case 2 could be combined and put inside one if statement.</span>
<span class=cm>    * State: f[i][j]: the first i chars form s match regex the first j chars from p</span>
<span class=cm>    * Equation: f[i][j] =</span>
<span class=cm>    * Init: f[0][0] = 0;</span>
<span class=cm>    *       f[0][j] = ture; if p[j - 1] == &#39;*&#39;</span>
<span class=cm>    *       f[i][0] = false;</span>
<span class=cm>    */</span>
    <span class=kt>bool</span> <span class=n>isMatch</span><span class=p>(</span><span class=k>const</span> <span class=kt>char</span> <span class=o>*</span><span class=n>s</span><span class=p>,</span> <span class=k>const</span> <span class=kt>char</span> <span class=o>*</span><span class=n>p</span><span class=p>)</span> <span class=p>{</span>
        <span class=kt>int</span> <span class=n>i</span><span class=p>,</span> <span class=n>j</span><span class=p>;</span>
        <span class=kt>int</span> <span class=n>m</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
        <span class=kt>int</span> <span class=n>n</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>

        <span class=k>while</span> <span class=p>(</span><span class=n>s</span><span class=p>[</span><span class=n>m</span><span class=p>]</span> <span class=o>!=</span> <span class=sc>&#39;\0&#39;</span><span class=p>)</span> <span class=p>{</span>
            <span class=n>m</span><span class=o>++</span><span class=p>;</span>
        <span class=p>}</span>

        <span class=k>while</span> <span class=p>(</span><span class=n>p</span><span class=p>[</span><span class=n>n</span><span class=p>]</span> <span class=o>!=</span> <span class=sc>&#39;\0&#39;</span><span class=p>)</span> <span class=p>{</span>
            <span class=n>n</span><span class=o>++</span><span class=p>;</span>
        <span class=p>}</span>

        <span class=kt>int</span> <span class=n>f</span><span class=p>[</span><span class=n>m</span> <span class=o>+</span> <span class=mi>1</span><span class=p>][</span><span class=n>n</span> <span class=o>+</span> <span class=mi>1</span><span class=p>];</span>

        <span class=k>for</span> <span class=p>(</span><span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;=</span> <span class=n>m</span><span class=p>;</span> <span class=n>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
            <span class=k>for</span> <span class=p>(</span><span class=n>j</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>j</span> <span class=o>&lt;=</span> <span class=n>n</span><span class=p>;</span> <span class=n>j</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
                <span class=k>if</span> <span class=p>(</span><span class=n>i</span> <span class=o>==</span> <span class=mi>0</span> <span class=o>&amp;&amp;</span> <span class=n>j</span> <span class=o>==</span> <span class=mi>0</span><span class=p>)</span> <span class=p>{</span>
                    <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>=</span> <span class=nb>true</span><span class=p>;</span>
                    <span class=k>continue</span><span class=p>;</span>
                <span class=p>}</span>

                <span class=k>if</span> <span class=p>(</span><span class=n>j</span> <span class=o>==</span> <span class=mi>0</span><span class=p>)</span> <span class=p>{</span>
                    <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>=</span> <span class=nb>false</span><span class=p>;</span>
                    <span class=k>continue</span><span class=p>;</span>
                <span class=p>}</span>

                <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>=</span> <span class=nb>false</span><span class=p>;</span>
                <span class=k>if</span> <span class=p>(</span><span class=n>p</span><span class=p>[</span><span class=n>j</span> <span class=o>-</span> <span class=mi>1</span><span class=p>]</span> <span class=o>==</span> <span class=sc>&#39;*&#39;</span><span class=p>)</span> <span class=p>{</span>
                    <span class=c1>// matched one char at end of s, s=[----]a, p=[-----]a*</span>
                    <span class=k>if</span> <span class=p>(</span><span class=n>i</span> <span class=o>&gt;</span> <span class=mi>0</span> <span class=o>&amp;&amp;</span> <span class=n>j</span> <span class=o>&gt;</span> <span class=mi>1</span> <span class=o>&amp;&amp;</span> <span class=p>(</span><span class=n>p</span><span class=p>[</span><span class=n>j</span> <span class=o>-</span> <span class=mi>2</span><span class=p>]</span> <span class=o>==</span> <span class=sc>&#39;.&#39;</span> <span class=o>||</span> <span class=n>p</span><span class=p>[</span><span class=n>j</span> <span class=o>-</span> <span class=mi>2</span><span class=p>]</span> <span class=o>==</span> <span class=n>s</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=mi>1</span><span class=p>]))</span> <span class=p>{</span>
                        <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>|=</span> <span class=n>f</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=mi>1</span><span class=p>][</span><span class=n>j</span><span class=p>];</span> <span class=c1>//use whole p to match s[0, ... i - 2]</span>
                    <span class=p>}</span>

                    <span class=c1>// don&#39;t care the a* or .*,</span>
                    <span class=c1>// match previous chars s=[-----a], p=[------]a*</span>
                    <span class=k>if</span> <span class=p>(</span><span class=n>j</span> <span class=o>&gt;</span> <span class=mi>1</span><span class=p>)</span> <span class=p>{</span>
                        <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>|=</span> <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span> <span class=o>-</span> <span class=mi>2</span><span class=p>];</span>
                    <span class=p>}</span>
                <span class=p>}</span> <span class=k>else</span> <span class=k>if</span> <span class=p>(</span><span class=n>i</span> <span class=o>&gt;</span> <span class=mi>0</span> <span class=o>&amp;&amp;</span> <span class=p>(</span><span class=n>p</span><span class=p>[</span><span class=n>j</span> <span class=o>-</span> <span class=mi>1</span><span class=p>]</span> <span class=o>==</span> <span class=sc>&#39;.&#39;</span> <span class=o>||</span> <span class=n>p</span><span class=p>[</span><span class=n>j</span> <span class=o>-</span> <span class=mi>1</span><span class=p>]</span> <span class=o>==</span> <span class=n>s</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=mi>1</span><span class=p>]))</span> <span class=p>{</span>
                    <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>=</span> <span class=n>f</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=mi>1</span><span class=p>][</span><span class=n>j</span> <span class=o>-</span> <span class=mi>1</span><span class=p>];</span>
                <span class=p>}</span>
            <span class=p>}</span>
        <span class=p>}</span>

        <span class=k>return</span> <span class=n>f</span><span class=p>[</span><span class=n>m</span><span class=p>][</span><span class=n>n</span><span class=p>];</span>
    <span class=p>}</span>
<span class=p>};</span>
</code></pre></div> </div> <input id=__tabbed_22_2 name=__tabbed_22 type=radio><label for=__tabbed_22_2>C++ recursive solution</label><div class=tabbed-content> <div class=highlight><pre><span></span><code><span class=c1>// The idea is to deal with each case one by one.</span>
<span class=k>class</span> <span class=nc>Solution</span> <span class=p>{</span>
<span class=k>public</span><span class=o>:</span>
    <span class=kt>bool</span> <span class=n>isMatch</span><span class=p>(</span><span class=n>string</span> <span class=n>s</span><span class=p>,</span> <span class=n>string</span> <span class=n>p</span><span class=p>)</span> <span class=p>{</span>
        <span class=cm>/* base cases when none left or only one char left */</span>
        <span class=k>if</span> <span class=p>(</span><span class=n>p</span><span class=p>.</span><span class=n>empty</span><span class=p>())</span> <span class=k>return</span> <span class=n>s</span><span class=p>.</span><span class=n>empty</span><span class=p>();</span>
        <span class=k>if</span> <span class=p>(</span><span class=n>p</span><span class=p>.</span><span class=n>length</span><span class=p>()</span> <span class=o>==</span> <span class=mi>1</span><span class=p>)</span> <span class=p>{</span>
            <span class=k>return</span> <span class=p>(</span><span class=n>s</span><span class=p>.</span><span class=n>length</span><span class=p>()</span> <span class=o>==</span> <span class=mi>1</span> <span class=o>&amp;&amp;</span> <span class=p>(</span><span class=n>s</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span> <span class=o>==</span> <span class=n>p</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span> <span class=o>||</span> <span class=n>p</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span> <span class=o>==</span> <span class=sc>&#39;.&#39;</span><span class=p>));</span>
        <span class=p>}</span>

        <span class=k>if</span> <span class=p>(</span><span class=n>p</span><span class=p>[</span><span class=mi>1</span><span class=p>]</span> <span class=o>!=</span> <span class=sc>&#39;*&#39;</span><span class=p>)</span> <span class=p>{</span>
            <span class=k>if</span> <span class=p>(</span><span class=n>s</span><span class=p>.</span><span class=n>empty</span><span class=p>())</span> <span class=k>return</span> <span class=nb>false</span><span class=p>;</span>
            <span class=k>return</span> <span class=p>(</span><span class=n>s</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span> <span class=o>==</span> <span class=n>p</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span> <span class=o>||</span> <span class=n>p</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span> <span class=o>==</span> <span class=sc>&#39;.&#39;</span><span class=p>)</span> <span class=o>&amp;&amp;</span> <span class=n>isMatch</span><span class=p>(</span><span class=n>s</span><span class=p>.</span><span class=n>substr</span><span class=p>(</span><span class=mi>1</span><span class=p>),</span> <span class=n>p</span><span class=p>.</span><span class=n>substr</span><span class=p>(</span><span class=mi>1</span><span class=p>));</span>
        <span class=p>}</span>
        <span class=cm>/* p[1] == &#39;*&#39; */</span>
        <span class=k>while</span> <span class=p>(</span><span class=o>!</span><span class=n>s</span><span class=p>.</span><span class=n>empty</span><span class=p>()</span> <span class=o>&amp;&amp;</span> <span class=p>(</span><span class=n>s</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span> <span class=o>==</span> <span class=n>p</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span> <span class=o>||</span> <span class=n>p</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span> <span class=o>==</span> <span class=sc>&#39;.&#39;</span><span class=p>))</span> <span class=p>{</span>
            <span class=cm>/* consider the case: s=&quot;aaaabcd&quot;, p=&quot;.*b*cd&quot;*/</span>
            <span class=k>if</span> <span class=p>(</span><span class=n>isMatch</span><span class=p>(</span><span class=n>s</span><span class=p>,</span> <span class=n>p</span><span class=p>.</span><span class=n>substr</span><span class=p>(</span><span class=mi>2</span><span class=p>)))</span> <span class=k>return</span> <span class=nb>true</span><span class=p>;</span>
            <span class=n>s</span> <span class=o>=</span> <span class=n>s</span><span class=p>.</span><span class=n>substr</span><span class=p>(</span><span class=mi>1</span><span class=p>);</span>
        <span class=p>}</span>

        <span class=cm>/* consider the case: s=&quot;aaaaa&quot;, p=&quot;a*&quot; and case s=&quot;aaaaa&quot;, p=&quot;a*b&quot; */</span>
        <span class=k>return</span> <span class=n>isMatch</span><span class=p>(</span><span class=n>s</span><span class=p>,</span> <span class=n>p</span><span class=p>.</span><span class=n>substr</span><span class=p>(</span><span class=mi>2</span><span class=p>));</span> <span class=cm>/* how comes? */</span>
    <span class=p>}</span>
<span class=p>};</span>
</code></pre></div> </div> </div> <h3 id=wildcard-matching>Wildcard Matching<a class=headerlink href=#wildcard-matching title="Permanent link">&para;</a></h3> <ul> <li>不需要知道'<em>'最多能匹配几个字符。在当前step只需考虑用'</em>'去匹配一个字符或者完全不匹配就覆盖了 所有的情况。至于最终可以匹配几个，是在多个step中的信息。当前step并不需要关心.</li> <li>When <code>p[j - 1] == '*'</code>, since we don't know '<em>' match how many chars in s? In the first solution, I used a third loop to check. We can think it in this way, for <code>p[j - 1] == '*'</code>, we can use '</em>' to match the trailing character or not to use '*' to match previously. the we have <code>f[i][j] = f[i - 1][j] | f[i][j - 1]</code>.</li> </ul> <div class=tabbed-set data-tabs=23:2><input checked=checked id=__tabbed_23_1 name=__tabbed_23 type=radio><label for=__tabbed_23_1>C++ O(mnk)</label><div class=tabbed-content> <div class=highlight><pre><span></span><code><span class=k>class</span> <span class=nc>Solution</span> <span class=p>{</span>
<span class=k>public</span><span class=o>:</span>
    <span class=cm>/* *</span>
<span class=cm>    * last step:</span>
<span class=cm>    *   p[j - 1] == &#39;?&#39;</span>
<span class=cm>    *      f[i][j] = f[i - 1][j - 1]</span>
<span class=cm>    *   s[i - 1] == p[j - 1]</span>
<span class=cm>    *      f[i][j] = f[i - 1][j - 1]</span>
<span class=cm>    *   p[j - 1] == &#39;*&#39;, (&#39;*&#39; may match k of trailng characters from s, but we don&#39;t know how many)</span>
<span class=cm>    *      f[i][j] = f[i][j - 1] OR f[i - 1][j - 1] OR f[i - 2][j - 1], .. f[i - k][j - 1]</span>
<span class=cm>    * State: f[i][j]: the first i chars from s match the first j letters from p</span>
<span class=cm>    * Equation:</span>
<span class=cm>    * Init: f[0][0] = true;</span>
<span class=cm>    *       f[i][0] = false;</span>
<span class=cm>    *       f[0][j] = true; if (p[j - 1] == &quot;*&quot; &amp;&amp; j == 1)</span>
<span class=cm>    * calculate by DP:</span>
<span class=cm>    *       f[0][j] = false; if (j &gt; 1)</span>
<span class=cm>    */</span>
    <span class=kt>bool</span> <span class=n>isMatch</span><span class=p>(</span><span class=k>const</span> <span class=kt>char</span> <span class=o>*</span><span class=n>s</span><span class=p>,</span> <span class=k>const</span> <span class=kt>char</span> <span class=o>*</span><span class=n>p</span><span class=p>)</span> <span class=p>{</span>
        <span class=kt>int</span> <span class=n>m</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
        <span class=kt>int</span> <span class=n>n</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
        <span class=kt>int</span> <span class=n>i</span><span class=p>,</span> <span class=n>j</span><span class=p>,</span> <span class=n>k</span><span class=p>;</span>
        <span class=k>while</span> <span class=p>(</span><span class=n>s</span><span class=p>[</span><span class=n>m</span><span class=p>]</span> <span class=o>!=</span> <span class=sc>&#39;\0&#39;</span><span class=p>)</span> <span class=p>{</span>
            <span class=n>m</span><span class=o>++</span><span class=p>;</span>
        <span class=p>}</span>
        <span class=k>while</span> <span class=p>(</span><span class=n>p</span><span class=p>[</span><span class=n>n</span><span class=p>]</span> <span class=o>!=</span> <span class=sc>&#39;\0&#39;</span><span class=p>)</span> <span class=p>{</span>
            <span class=n>n</span><span class=o>++</span><span class=p>;</span>
        <span class=p>}</span>

        <span class=kt>int</span> <span class=n>f</span><span class=p>[</span><span class=n>m</span> <span class=o>+</span> <span class=mi>1</span><span class=p>][</span><span class=n>n</span> <span class=o>+</span> <span class=mi>1</span><span class=p>];</span>

        <span class=k>for</span> <span class=p>(</span><span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;=</span> <span class=n>m</span><span class=p>;</span> <span class=n>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
            <span class=k>for</span> <span class=p>(</span><span class=n>j</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>j</span> <span class=o>&lt;=</span> <span class=n>n</span><span class=p>;</span> <span class=n>j</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
                <span class=k>if</span> <span class=p>(</span><span class=n>i</span> <span class=o>==</span> <span class=mi>0</span> <span class=o>&amp;&amp;</span> <span class=n>j</span> <span class=o>==</span> <span class=mi>0</span><span class=p>)</span> <span class=p>{</span>
                    <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>=</span> <span class=nb>true</span><span class=p>;</span>
                    <span class=k>continue</span><span class=p>;</span>
                <span class=p>}</span>

                <span class=k>if</span> <span class=p>(</span><span class=n>j</span> <span class=o>==</span> <span class=mi>0</span><span class=p>)</span> <span class=p>{</span>
                    <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>=</span> <span class=nb>false</span><span class=p>;</span>
                    <span class=k>continue</span><span class=p>;</span>
                <span class=p>}</span>

                <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>=</span> <span class=nb>false</span><span class=p>;</span>
                <span class=k>if</span> <span class=p>(</span><span class=n>p</span><span class=p>[</span><span class=n>j</span> <span class=o>-</span> <span class=mi>1</span><span class=p>]</span> <span class=o>==</span> <span class=sc>&#39;*&#39;</span><span class=p>)</span> <span class=p>{</span>
                    <span class=c1>// k == i indicate the special case: f[0][1] (s=&quot;&quot;, p=&quot;*&quot;)</span>
                    <span class=k>for</span> <span class=p>(</span><span class=n>k</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>k</span> <span class=o>&lt;=</span> <span class=n>i</span><span class=p>;</span> <span class=n>k</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
                        <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>|=</span> <span class=n>f</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=n>k</span><span class=p>][</span><span class=n>j</span> <span class=o>-</span> <span class=mi>1</span><span class=p>];</span>
                    <span class=p>}</span>
                <span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
                    <span class=k>if</span> <span class=p>(</span><span class=n>i</span> <span class=o>&gt;</span> <span class=mi>0</span> <span class=o>&amp;&amp;</span> <span class=p>(</span><span class=n>p</span><span class=p>[</span><span class=n>j</span> <span class=o>-</span> <span class=mi>1</span><span class=p>]</span> <span class=o>==</span> <span class=sc>&#39;?&#39;</span> <span class=o>||</span> <span class=n>s</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=mi>1</span><span class=p>]</span> <span class=o>==</span> <span class=n>p</span><span class=p>[</span><span class=n>j</span> <span class=o>-</span> <span class=mi>1</span><span class=p>]))</span> <span class=p>{</span>
                        <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>=</span> <span class=n>f</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=mi>1</span><span class=p>][</span><span class=n>j</span> <span class=o>-</span> <span class=mi>1</span><span class=p>];</span>
                    <span class=p>}</span>
                <span class=p>}</span>
            <span class=p>}</span>
        <span class=p>}</span>

        <span class=k>return</span> <span class=n>f</span><span class=p>[</span><span class=n>m</span><span class=p>][</span><span class=n>n</span><span class=p>];</span>
    <span class=p>}</span>
<span class=p>};</span>
</code></pre></div> </div> <input id=__tabbed_23_2 name=__tabbed_23 type=radio><label for=__tabbed_23_2>C++ O(mn)</label><div class=tabbed-content> <div class=highlight><pre><span></span><code><span class=k>class</span> <span class=nc>Solution</span> <span class=p>{</span>
<span class=k>public</span><span class=o>:</span>
    <span class=kt>bool</span> <span class=n>isMatch</span><span class=p>(</span><span class=k>const</span> <span class=kt>char</span> <span class=o>*</span><span class=n>s</span><span class=p>,</span> <span class=k>const</span> <span class=kt>char</span> <span class=o>*</span><span class=n>p</span><span class=p>)</span> <span class=p>{</span>
        <span class=c1>// write your code here</span>
        <span class=kt>int</span> <span class=n>m</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
        <span class=kt>int</span> <span class=n>n</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
        <span class=kt>int</span> <span class=n>i</span><span class=p>,</span> <span class=n>j</span><span class=p>,</span> <span class=n>k</span><span class=p>;</span>
        <span class=k>while</span> <span class=p>(</span><span class=n>s</span><span class=p>[</span><span class=n>m</span><span class=p>]</span> <span class=o>!=</span> <span class=sc>&#39;\0&#39;</span><span class=p>)</span> <span class=p>{</span>
            <span class=n>m</span><span class=o>++</span><span class=p>;</span>
        <span class=p>}</span>
        <span class=k>while</span> <span class=p>(</span><span class=n>p</span><span class=p>[</span><span class=n>n</span><span class=p>]</span> <span class=o>!=</span> <span class=sc>&#39;\0&#39;</span><span class=p>)</span> <span class=p>{</span>
            <span class=n>n</span><span class=o>++</span><span class=p>;</span>
        <span class=p>}</span>

        <span class=kt>int</span> <span class=n>f</span><span class=p>[</span><span class=n>m</span> <span class=o>+</span> <span class=mi>1</span><span class=p>][</span><span class=n>n</span> <span class=o>+</span> <span class=mi>1</span><span class=p>];</span>

        <span class=k>for</span> <span class=p>(</span><span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;=</span> <span class=n>m</span><span class=p>;</span> <span class=n>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
            <span class=k>for</span> <span class=p>(</span><span class=n>j</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>j</span> <span class=o>&lt;=</span> <span class=n>n</span><span class=p>;</span> <span class=n>j</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
                <span class=k>if</span> <span class=p>(</span><span class=n>i</span> <span class=o>==</span> <span class=mi>0</span> <span class=o>&amp;&amp;</span> <span class=n>j</span> <span class=o>==</span> <span class=mi>0</span><span class=p>)</span> <span class=p>{</span>
                    <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>=</span> <span class=nb>true</span><span class=p>;</span>
                    <span class=k>continue</span><span class=p>;</span>
                <span class=p>}</span>

                <span class=k>if</span> <span class=p>(</span><span class=n>j</span> <span class=o>==</span> <span class=mi>0</span><span class=p>)</span> <span class=p>{</span>
                    <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>=</span> <span class=nb>false</span><span class=p>;</span>
                    <span class=k>continue</span><span class=p>;</span>
                <span class=p>}</span>

                <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>=</span> <span class=nb>false</span><span class=p>;</span>
                <span class=k>if</span> <span class=p>(</span><span class=n>p</span><span class=p>[</span><span class=n>j</span> <span class=o>-</span> <span class=mi>1</span><span class=p>]</span> <span class=o>==</span> <span class=sc>&#39;*&#39;</span><span class=p>)</span> <span class=p>{</span>
                    <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>=</span> <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span> <span class=o>-</span> <span class=mi>1</span><span class=p>];</span> <span class=c1>// ignore the &#39;*&#39;, match nothing</span>
                    <span class=k>if</span> <span class=p>(</span><span class=n>i</span> <span class=o>&gt;</span> <span class=mi>0</span><span class=p>)</span> <span class=p>{</span>
                        <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>|=</span> <span class=n>f</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=mi>1</span><span class=p>][</span><span class=n>j</span><span class=p>];</span> <span class=c1>// match the trailing char from s and continue</span>
                    <span class=p>}</span>
                <span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
                    <span class=k>if</span> <span class=p>(</span><span class=n>i</span> <span class=o>&gt;</span> <span class=mi>0</span> <span class=o>&amp;&amp;</span> <span class=p>(</span><span class=n>p</span><span class=p>[</span><span class=n>j</span> <span class=o>-</span> <span class=mi>1</span><span class=p>]</span> <span class=o>==</span> <span class=sc>&#39;?&#39;</span> <span class=o>||</span> <span class=n>s</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=mi>1</span><span class=p>]</span> <span class=o>==</span> <span class=n>p</span><span class=p>[</span><span class=n>j</span> <span class=o>-</span> <span class=mi>1</span><span class=p>]))</span> <span class=p>{</span>
                        <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>=</span> <span class=n>f</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=mi>1</span><span class=p>][</span><span class=n>j</span> <span class=o>-</span> <span class=mi>1</span><span class=p>];</span>
                    <span class=p>}</span>
                <span class=p>}</span>
            <span class=p>}</span>
        <span class=p>}</span>

        <span class=k>return</span> <span class=n>f</span><span class=p>[</span><span class=n>m</span><span class=p>][</span><span class=n>n</span><span class=p>];</span>
    <span class=p>}</span>
<span class=p>};</span>
</code></pre></div> </div> </div> <h3 id=ones-and-zeroes>Ones and Zeroes<a class=headerlink href=#ones-and-zeroes title="Permanent link">&para;</a></h3> <ul> <li>This is essentially a backpack problem see the backpack problem. The key to solve the problem is taking the last item or do not take the last item.</li> <li>技巧：背包问题的“最后一步”是指最后一个“物品”在结果中或者不再结果中.</li> </ul> <div class=tabbed-set data-tabs=24:2><input checked=checked id=__tabbed_24_1 name=__tabbed_24 type=radio><label for=__tabbed_24_1>C++ DP O(mnk)</label><div class=tabbed-content> <div class=highlight><pre><span></span><code><span class=k>class</span> <span class=nc>Solution</span> <span class=p>{</span>
<span class=k>public</span><span class=o>:</span>
    <span class=cm>/* *</span>
<span class=cm>    * 背包问题，最后一个进“背包”，最后一个不进。</span>
<span class=cm>    * State: f[i][j][k]: maximum of k strs can be formed by i zeros and j ones.</span>
<span class=cm>    * Equation: f[i][j][k] = max(f[i][j][k - 1], f[i - a][j - b][k - 1] + 1| i &gt; a and j &gt; b)</span>
<span class=cm>    * Init: f[i][j][0] = 0</span>
<span class=cm>    *</span>
<span class=cm>    */</span>
    <span class=kt>int</span> <span class=n>findMaxForm</span><span class=p>(</span><span class=n>vector</span><span class=o>&lt;</span><span class=n>string</span><span class=o>&gt;&amp;</span> <span class=n>strs</span><span class=p>,</span> <span class=kt>int</span> <span class=n>m</span><span class=p>,</span> <span class=kt>int</span> <span class=n>n</span><span class=p>)</span> <span class=p>{</span>
        <span class=kt>int</span> <span class=n>len</span> <span class=o>=</span> <span class=n>strs</span><span class=p>.</span><span class=n>size</span><span class=p>();</span>
        <span class=kt>int</span> <span class=n>cnt0</span><span class=p>[</span><span class=n>len</span><span class=p>];</span>
        <span class=kt>int</span> <span class=n>cnt1</span><span class=p>[</span><span class=n>len</span><span class=p>];</span>
        <span class=kt>int</span> <span class=n>i</span><span class=p>,</span> <span class=n>j</span><span class=p>,</span> <span class=n>k</span><span class=p>;</span>
        <span class=kt>int</span> <span class=n>f</span><span class=p>[</span><span class=n>m</span> <span class=o>+</span> <span class=mi>1</span><span class=p>][</span><span class=n>n</span> <span class=o>+</span> <span class=mi>1</span><span class=p>][</span><span class=n>len</span> <span class=o>+</span> <span class=mi>1</span><span class=p>];</span>
        <span class=cm>/* count all the zeros and ones */</span>
        <span class=k>for</span> <span class=p>(</span><span class=n>k</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>k</span> <span class=o>&lt;</span> <span class=n>len</span><span class=p>;</span> <span class=n>k</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
            <span class=n>cnt0</span><span class=p>[</span><span class=n>k</span><span class=p>]</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
            <span class=n>cnt1</span><span class=p>[</span><span class=n>k</span><span class=p>]</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
            <span class=k>for</span> <span class=p>(</span><span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>strs</span><span class=p>[</span><span class=n>k</span><span class=p>].</span><span class=n>length</span><span class=p>();</span> <span class=n>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
                <span class=k>if</span> <span class=p>(</span><span class=n>strs</span><span class=p>[</span><span class=n>k</span><span class=p>][</span><span class=n>i</span><span class=p>]</span> <span class=o>==</span> <span class=sc>&#39;0&#39;</span><span class=p>)</span> <span class=p>{</span>
                    <span class=n>cnt0</span><span class=p>[</span><span class=n>k</span><span class=p>]</span><span class=o>++</span><span class=p>;</span>
                <span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
                    <span class=n>cnt1</span><span class=p>[</span><span class=n>k</span><span class=p>]</span><span class=o>++</span><span class=p>;</span>
                <span class=p>}</span>
            <span class=p>}</span>
        <span class=p>}</span>

        <span class=k>for</span> <span class=p>(</span><span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;=</span> <span class=n>m</span><span class=p>;</span> <span class=n>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
            <span class=k>for</span> <span class=p>(</span><span class=n>j</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>j</span> <span class=o>&lt;=</span> <span class=n>n</span><span class=p>;</span> <span class=n>j</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
                <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>][</span><span class=mi>0</span><span class=p>]</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
            <span class=p>}</span>
        <span class=p>}</span>

        <span class=cm>/* k started from 1 */</span>
        <span class=k>for</span> <span class=p>(</span><span class=n>k</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span> <span class=n>k</span> <span class=o>&lt;=</span> <span class=n>len</span><span class=p>;</span> <span class=n>k</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
            <span class=k>for</span> <span class=p>(</span><span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;=</span> <span class=n>m</span><span class=p>;</span> <span class=n>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
                <span class=k>for</span> <span class=p>(</span><span class=n>j</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>j</span> <span class=o>&lt;=</span> <span class=n>n</span><span class=p>;</span> <span class=n>j</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
                    <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>][</span><span class=n>k</span><span class=p>]</span> <span class=o>=</span> <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>][</span><span class=n>k</span> <span class=o>-</span> <span class=mi>1</span><span class=p>];</span>
                    <span class=k>if</span> <span class=p>(</span><span class=n>i</span> <span class=o>&gt;=</span> <span class=n>cnt0</span><span class=p>[</span><span class=n>k</span> <span class=o>-</span> <span class=mi>1</span><span class=p>]</span> <span class=o>&amp;&amp;</span> <span class=n>j</span> <span class=o>&gt;=</span> <span class=n>cnt1</span><span class=p>[</span><span class=n>k</span> <span class=o>-</span> <span class=mi>1</span><span class=p>])</span> <span class=p>{</span>
                        <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>][</span><span class=n>k</span><span class=p>]</span> <span class=o>=</span> <span class=n>max</span><span class=p>(</span><span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>][</span><span class=n>k</span><span class=p>],</span> <span class=n>f</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=n>cnt0</span><span class=p>[</span><span class=n>k</span> <span class=o>-</span> <span class=mi>1</span><span class=p>]][</span><span class=n>j</span> <span class=o>-</span> <span class=n>cnt1</span><span class=p>[</span><span class=n>k</span> <span class=o>-</span> <span class=mi>1</span><span class=p>]][</span><span class=n>k</span> <span class=o>-</span> <span class=mi>1</span><span class=p>]</span> <span class=o>+</span> <span class=mi>1</span><span class=p>);</span>
                    <span class=p>}</span>
                <span class=p>}</span>
            <span class=p>}</span>
        <span class=p>}</span>

        <span class=k>return</span> <span class=n>f</span><span class=p>[</span><span class=n>m</span><span class=p>][</span><span class=n>n</span><span class=p>][</span><span class=n>len</span><span class=p>];</span>
    <span class=p>}</span>
<span class=p>};</span>
</code></pre></div> </div> <input id=__tabbed_24_2 name=__tabbed_24 type=radio><label for=__tabbed_24_2>C++ DP O(nk)</label><div class=tabbed-content> <div class=highlight><pre><span></span><code><span class=k>class</span> <span class=nc>Solution</span> <span class=p>{</span>
<span class=k>public</span><span class=o>:</span>
    <span class=kt>int</span> <span class=n>findMaxForm</span><span class=p>(</span><span class=n>vector</span><span class=o>&lt;</span><span class=n>string</span><span class=o>&gt;&amp;</span> <span class=n>strs</span><span class=p>,</span> <span class=kt>int</span> <span class=n>m</span><span class=p>,</span> <span class=kt>int</span> <span class=n>n</span><span class=p>)</span> <span class=p>{</span>
        <span class=kt>int</span> <span class=n>len</span> <span class=o>=</span> <span class=n>strs</span><span class=p>.</span><span class=n>size</span><span class=p>();</span>
        <span class=kt>int</span> <span class=n>cnt0</span><span class=p>[</span><span class=n>len</span><span class=p>];</span>
        <span class=kt>int</span> <span class=n>cnt1</span><span class=p>[</span><span class=n>len</span><span class=p>];</span>
        <span class=kt>int</span> <span class=n>i</span><span class=p>,</span> <span class=n>j</span><span class=p>,</span> <span class=n>k</span><span class=p>;</span>
        <span class=cm>/* count all the zeros and ones */</span>
        <span class=k>for</span> <span class=p>(</span><span class=n>k</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>k</span> <span class=o>&lt;</span> <span class=n>len</span><span class=p>;</span> <span class=n>k</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
            <span class=n>cnt0</span><span class=p>[</span><span class=n>k</span><span class=p>]</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
            <span class=n>cnt1</span><span class=p>[</span><span class=n>k</span><span class=p>]</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
            <span class=k>for</span> <span class=p>(</span><span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>strs</span><span class=p>[</span><span class=n>k</span><span class=p>].</span><span class=n>length</span><span class=p>();</span> <span class=n>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
                <span class=k>if</span> <span class=p>(</span><span class=n>strs</span><span class=p>[</span><span class=n>k</span><span class=p>][</span><span class=n>i</span><span class=p>]</span> <span class=o>==</span> <span class=sc>&#39;0&#39;</span><span class=p>)</span> <span class=p>{</span>
                    <span class=n>cnt0</span><span class=p>[</span><span class=n>k</span><span class=p>]</span><span class=o>++</span><span class=p>;</span>
                <span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
                    <span class=n>cnt1</span><span class=p>[</span><span class=n>k</span><span class=p>]</span><span class=o>++</span><span class=p>;</span>
                <span class=p>}</span>
            <span class=p>}</span>
        <span class=p>}</span>
        <span class=kt>int</span> <span class=n>f</span><span class=p>[</span><span class=n>m</span> <span class=o>+</span> <span class=mi>1</span><span class=p>][</span><span class=n>n</span> <span class=o>+</span> <span class=mi>1</span><span class=p>][</span><span class=n>len</span> <span class=o>+</span> <span class=mi>1</span><span class=p>];</span>
        <span class=kt>int</span> <span class=n>prev</span><span class=p>,</span> <span class=n>curr</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>

        <span class=k>for</span> <span class=p>(</span><span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;=</span> <span class=n>m</span><span class=p>;</span> <span class=n>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
            <span class=k>for</span> <span class=p>(</span><span class=n>j</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>j</span> <span class=o>&lt;=</span> <span class=n>n</span><span class=p>;</span> <span class=n>j</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
                <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>][</span><span class=n>curr</span><span class=p>]</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
            <span class=p>}</span>
        <span class=p>}</span>

        <span class=cm>/* k started from 1 */</span>
        <span class=k>for</span> <span class=p>(</span><span class=n>k</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span> <span class=n>k</span> <span class=o>&lt;=</span> <span class=n>len</span><span class=p>;</span> <span class=n>k</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
            <span class=n>prev</span> <span class=o>=</span> <span class=n>curr</span><span class=p>;</span>
            <span class=n>curr</span> <span class=o>=</span> <span class=mi>1</span> <span class=o>-</span> <span class=n>curr</span><span class=p>;</span>
            <span class=k>for</span> <span class=p>(</span><span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;=</span> <span class=n>m</span><span class=p>;</span> <span class=n>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
                <span class=k>for</span> <span class=p>(</span><span class=n>j</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>j</span> <span class=o>&lt;=</span> <span class=n>n</span><span class=p>;</span> <span class=n>j</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
                    <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>][</span><span class=n>curr</span><span class=p>]</span> <span class=o>=</span> <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>][</span><span class=n>prev</span><span class=p>];</span>
                    <span class=k>if</span> <span class=p>(</span><span class=n>i</span> <span class=o>&gt;=</span> <span class=n>cnt0</span><span class=p>[</span><span class=n>k</span> <span class=o>-</span> <span class=mi>1</span><span class=p>]</span> <span class=o>&amp;&amp;</span> <span class=n>j</span> <span class=o>&gt;=</span> <span class=n>cnt1</span><span class=p>[</span><span class=n>k</span> <span class=o>-</span> <span class=mi>1</span><span class=p>])</span> <span class=p>{</span>
                        <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>][</span><span class=n>curr</span><span class=p>]</span> <span class=o>=</span> <span class=n>max</span><span class=p>(</span><span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>][</span><span class=n>curr</span><span class=p>],</span> <span class=n>f</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=n>cnt0</span><span class=p>[</span><span class=n>k</span> <span class=o>-</span> <span class=mi>1</span><span class=p>]][</span><span class=n>j</span> <span class=o>-</span> <span class=n>cnt1</span><span class=p>[</span><span class=n>k</span> <span class=o>-</span> <span class=mi>1</span><span class=p>]][</span><span class=n>prev</span><span class=p>]</span> <span class=o>+</span> <span class=mi>1</span><span class=p>);</span>
                    <span class=p>}</span>
                <span class=p>}</span>
            <span class=p>}</span>
        <span class=p>}</span>

        <span class=k>return</span> <span class=n>f</span><span class=p>[</span><span class=n>m</span><span class=p>][</span><span class=n>n</span><span class=p>][</span><span class=n>curr</span><span class=p>];</span>
    <span class=p>}</span>
<span class=p>};</span>
</code></pre></div> </div> </div> <h2 id=_5>双序列型动态规划总结<a class=headerlink href=#_5 title="Permanent link">&para;</a></h2> <ul> <li>两个一维序列/字符串</li> <li>突破口<ol> <li>串A和串B的最后一个字符是否匹配</li> <li>是否需要串A/串B的最后一个字符</li> <li>缩减问题规模</li> </ol> </li> <li>数组下标表示序列<code>A</code>前<code>i</code>个，序列<code>B</code>前<code>j</code>个: <code>f[i][j]</code></li> <li>初始条件和边界情况<ol> <li>空串如何处理</li> <li>计数型(情况1+情况2+…)以及最值型(min/max{情况1，情况2，…})</li> </ol> </li> <li>匹配的情况下勿忘+1(操作数多1次，匹配长度多1)</li> </ul> <h2 id=lecture-7>Lecture 7<a class=headerlink href=#lecture-7 title="Permanent link">&para;</a></h2> <table> <thead> <tr> <th>Problem</th> <th>Category</th> </tr> </thead> <tbody> <tr> <td><a href=#minimum-adjustment-cost>Minimum Adjustment Cost</a></td> <td></td> </tr> <tr> <td><a href=#k-sum>K Sum</a></td> <td>背包型</td> </tr> <tr> <td><a href=#longest-increasing-subsequence>Longest Increasing Subsequence</a></td> <td>序列型</td> </tr> <tr> <td><a href=#k-edit-distance>K Edit Distance</a></td> <td>双序列 + Trie</td> </tr> <tr> <td><a href=#frog-jump>Frog Jump</a></td> <td>坐标 + 状态</td> </tr> <tr> <td><a href=#maximal-square>Maximal Square</a></td> <td>坐标</td> </tr> <tr> <td><a href=#maximal-rectangle>Maximal Rectangle</a></td> <td></td> </tr> </tbody> </table> <h3 id=minimum-adjustment-cost>Minimum Adjustment Cost<a class=headerlink href=#minimum-adjustment-cost title="Permanent link">&para;</a></h3> <ul> <li>The key is how to come up the last step and the induction. The key is to come up a sensable modle of the problem. See the analysis in the code comments.</li> <li>The hard part of the problem is how to prove the the range: <code>1 &lt;= B[i] &lt;= 100</code>, so that we can create the state array <code>f[n + 1][100 + 1]</code></li> <li>The initial value of this DP problem is not obvious. You have to pay attention to the initial condition of this problem, it different from the provious DP problems.</li> </ul> <div class=highlight><pre><span></span><code><span class=k>class</span> <span class=nc>Solution</span> <span class=p>{</span>
<span class=k>public</span><span class=o>:</span>
    <span class=cm>/**</span>
<span class=cm>     * 技巧：要看作把A数组通过变化变成B数组。最后一步考虑把A[i]变成B[i].</span>
<span class=cm>     *       这样比在A的基础上变化更容易考虑递推关系</span>
<span class=cm>     * Last step: change A[i] to B[i], result[i] = result[i - 1] + abs(B[i] - A[i])</span>
<span class=cm>     * State: f[i][j]: the cost of changing the first i element in A,</span>
<span class=cm>     *        and the last elemnet A[i - 1] changed is changed to j (j == B[i])</span>
<span class=cm>     * Induction: A[i - 1] --&gt; j, A[i - 2] --&gt; k, |j - k| &lt; target ==&gt; j - target &lt;= k &lt;= j + target</span>
<span class=cm>     * Equation: f[i][j] = min_{j - target &lt;= k &lt;= j + target, 1 &lt;= k &lt;= 100}(f[i - 1][k] + abs(j - A[i]))</span>
<span class=cm>     * Init: f[0][0] = ?</span>
<span class=cm>     *       f[1][k] = abs(k - A[0])</span>
<span class=cm>     */</span>
    <span class=kt>int</span> <span class=n>MinAdjustmentCost</span><span class=p>(</span><span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;</span> <span class=n>A</span><span class=p>,</span> <span class=kt>int</span> <span class=n>target</span><span class=p>)</span> <span class=p>{</span>
        <span class=kt>int</span> <span class=n>n</span> <span class=o>=</span> <span class=n>A</span><span class=p>.</span><span class=n>size</span><span class=p>();</span>

        <span class=kt>int</span> <span class=n>f</span><span class=p>[</span><span class=n>n</span> <span class=o>+</span> <span class=mi>1</span><span class=p>][</span><span class=mi>100</span> <span class=o>+</span> <span class=mi>1</span><span class=p>];</span>
        <span class=kt>int</span> <span class=n>i</span><span class=p>,</span> <span class=n>j</span><span class=p>,</span> <span class=n>k</span><span class=p>;</span>

        <span class=k>for</span> <span class=p>(</span><span class=n>j</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span> <span class=n>j</span> <span class=o>&lt;=</span> <span class=mi>100</span><span class=p>;</span> <span class=n>j</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
            <span class=n>f</span><span class=p>[</span><span class=mi>1</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>=</span> <span class=n>abs</span><span class=p>(</span><span class=n>j</span> <span class=o>-</span> <span class=n>A</span><span class=p>[</span><span class=mi>0</span><span class=p>]);</span>
        <span class=p>}</span>

        <span class=k>for</span> <span class=p>(</span><span class=n>i</span> <span class=o>=</span> <span class=mi>2</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;=</span> <span class=n>n</span><span class=p>;</span> <span class=n>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
            <span class=k>for</span> <span class=p>(</span><span class=n>j</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span> <span class=n>j</span> <span class=o>&lt;=</span> <span class=mi>100</span><span class=p>;</span> <span class=n>j</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
                <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>=</span> <span class=n>INT_MAX</span><span class=p>;</span>
                <span class=k>for</span> <span class=p>(</span><span class=n>k</span> <span class=o>=</span> <span class=n>j</span> <span class=o>-</span> <span class=n>target</span><span class=p>;</span> <span class=n>k</span> <span class=o>&lt;=</span> <span class=n>j</span> <span class=o>+</span> <span class=n>target</span><span class=p>;</span> <span class=n>k</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
                    <span class=k>if</span> <span class=p>(</span><span class=n>k</span> <span class=o>&lt;</span> <span class=mi>1</span> <span class=o>||</span> <span class=n>k</span> <span class=o>&gt;</span> <span class=mi>100</span><span class=p>)</span> <span class=p>{</span>
                        <span class=k>continue</span><span class=p>;</span>
                    <span class=p>}</span>

                    <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>=</span> <span class=n>min</span><span class=p>(</span><span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>],</span> <span class=n>f</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=mi>1</span><span class=p>][</span><span class=n>k</span><span class=p>]</span> <span class=o>+</span> <span class=n>abs</span><span class=p>(</span><span class=n>j</span> <span class=o>-</span> <span class=n>A</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=mi>1</span><span class=p>]));</span>
                <span class=p>}</span>
            <span class=p>}</span>
        <span class=p>}</span>

        <span class=kt>int</span> <span class=n>res</span> <span class=o>=</span> <span class=n>INT_MAX</span><span class=p>;</span>
        <span class=k>for</span> <span class=p>(</span><span class=n>j</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span> <span class=n>j</span> <span class=o>&lt;=</span> <span class=mi>100</span><span class=p>;</span> <span class=n>j</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
            <span class=n>res</span> <span class=o>=</span> <span class=n>min</span><span class=p>(</span><span class=n>res</span><span class=p>,</span> <span class=n>f</span><span class=p>[</span><span class=n>n</span><span class=p>][</span><span class=n>j</span><span class=p>]);</span>
        <span class=p>}</span>

        <span class=k>return</span> <span class=n>res</span><span class=p>;</span>
    <span class=p>}</span>
<span class=p>};</span>
</code></pre></div> <div class="admonition note"> <p class=admonition-title>Note</p> <p>The space complexity is <span><span class=MathJax_Preview>O(100n)</span><script type=math/tex>O(100n)</script></span>. The time complexity is <span><span class=MathJax_Preview>O(1002n)</span><script type=math/tex>O(1002n)</script></span>.</p> </div> <h3 id=k-sum>K Sum<a class=headerlink href=#k-sum title="Permanent link">&para;</a></h3> <ul> <li>This is a backpack problem which is very similar to the problem <a href=#backpack-vi>Backpack VI</a></li> <li>背包问题的话，总承重要进状态，也就是说<code>target</code>要进状态。其他还有什么要进状态呢？这就要求认真分析题目。</li> <li>对于这种类似求不放回的组合数的过程，不要尝试去用循环来决定某一个元素是否被选中。而是要结合 induction的想法，从某个特殊的步骤着眼，在这个步骤中考虑选中或者不选某个元素（本身带有循环的意思， 任何一个元素只能被选中一次，和不选一次）</li> <li>下面代码注释中给出了我最初的错误分析，随后又给出了正确的分析。对比二者不同，争取以后少犯类似错误。</li> <li>关键需要注意的是初始化。先把<code>f[0][q][s]</code>全部初始化为0，然后再初始化<code>f[0][0][0]</code>。这两个步骤不能颠倒顺序，</li> <li>注意也可以在for loop中初始化f[0][0][0]。</li> <li>Time complexity <span><span class=MathJax_Preview>O(n \cdot k \cdot \text{target})</span><script type=math/tex>O(n \cdot k \cdot \text{target})</script></span>, space complexity <span><span class=MathJax_Preview>O(n \cdot k \cdot \text{target})</span><script type=math/tex>O(n \cdot k \cdot \text{target})</script></span>. We can use rolling array to reduce the space complexity to <span><span class=MathJax_Preview>O(k \cdot \text{target})</span><script type=math/tex>O(k \cdot \text{target})</script></span>.</li> </ul> <div class=tabbed-set data-tabs=25:2><input checked=checked id=__tabbed_25_1 name=__tabbed_25 type=radio><label for=__tabbed_25_1>C++ DP</label><div class=tabbed-content> <div class=highlight><pre><span></span><code><span class=k>class</span> <span class=nc>Solution</span> <span class=p>{</span>
<span class=k>public</span><span class=o>:</span>
    <span class=cm>/**</span>
<span class=cm>    * This is a backpack problem,</span>
<span class=cm>    * Last step: A[i] is selected or not selected.</span>
<span class=cm>    * State: f[i][j]: total solution of i element can sum up to j.</span>
<span class=cm>    * Equation: f[i][j] = f[i - 1][j] + f[i - 1][j - A[i - 1]]|j &gt; A[i - 1] for all i == k.</span>
<span class=cm>    * Equation: f[i][j] = sum(f[i - 1][j - A[k]] | 0 &lt;= k &lt;= i - 1, j &gt; A[k]).</span>
<span class=cm>    * Init: f[0][0] = 1; // ?</span>
<span class=cm>    *       f[0][j] = 0</span>
<span class=cm>    * ******************** WRONG *********************************</span>
<span class=cm>    * ******************** CORRECT *******************************</span>
<span class=cm>    * Last step: A[i - 1] is selected or not selected.</span>
<span class=cm>    *            If selected, we should select k - 1 numbers from A[0], .. A[n - 2] that sum to target - A[i - 1].</span>
<span class=cm>    *            If not selected, we should select k number from A[0], .. A[n - 2] that sum to target.</span>
<span class=cm>    * State: f[i][k][s]: total solution of selecting k element from first i element that sum up to j.</span>
<span class=cm>    * Equation: f[i][k][s] = f[i - 1][k][s] + f[i - 1][k - 1][s - A[i - 1]]|s &gt; A[i - 1].</span>
<span class=cm>    * Init: f[0][0][0] = 1; // ?</span>
<span class=cm>    *       f[0][k][s] = 0</span>
<span class=cm>    *</span>
<span class=cm>    */</span>
    <span class=kt>int</span> <span class=n>kSum</span><span class=p>(</span><span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;</span> <span class=n>A</span><span class=p>,</span> <span class=kt>int</span> <span class=n>k</span><span class=p>,</span> <span class=kt>int</span> <span class=n>target</span><span class=p>)</span> <span class=p>{</span>
        <span class=c1>// wirte your code here</span>
        <span class=kt>int</span> <span class=n>n</span> <span class=o>=</span> <span class=n>A</span><span class=p>.</span><span class=n>size</span><span class=p>();</span>

        <span class=kt>int</span> <span class=n>f</span><span class=p>[</span><span class=n>n</span> <span class=o>+</span> <span class=mi>1</span><span class=p>][</span><span class=n>k</span> <span class=o>+</span> <span class=mi>1</span><span class=p>][</span><span class=n>target</span> <span class=o>+</span> <span class=mi>1</span><span class=p>];</span>
        <span class=kt>int</span> <span class=n>i</span><span class=p>,</span> <span class=n>q</span><span class=p>,</span> <span class=n>s</span><span class=p>;</span>

        <span class=c1>// init</span>
        <span class=k>for</span> <span class=p>(</span><span class=n>q</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>q</span> <span class=o>&lt;=</span> <span class=n>k</span><span class=p>;</span> <span class=n>q</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
            <span class=k>for</span> <span class=p>(</span><span class=n>s</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>s</span> <span class=o>&lt;=</span> <span class=n>target</span><span class=p>;</span> <span class=n>s</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
                <span class=n>f</span><span class=p>[</span><span class=mi>0</span><span class=p>][</span><span class=n>q</span><span class=p>][</span><span class=n>s</span><span class=p>]</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
            <span class=p>}</span>
        <span class=p>}</span>

        <span class=n>f</span><span class=p>[</span><span class=mi>0</span><span class=p>][</span><span class=mi>0</span><span class=p>][</span><span class=mi>0</span><span class=p>]</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span>

        <span class=k>for</span> <span class=p>(</span><span class=n>i</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;=</span> <span class=n>n</span><span class=p>;</span> <span class=n>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
            <span class=k>for</span> <span class=p>(</span><span class=n>q</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>q</span> <span class=o>&lt;=</span> <span class=n>k</span><span class=p>;</span> <span class=n>q</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
                <span class=k>for</span> <span class=p>(</span><span class=n>s</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>s</span> <span class=o>&lt;=</span> <span class=n>target</span><span class=p>;</span> <span class=n>s</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
                    <span class=c1>// not select A[i - 1]</span>
                    <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>q</span><span class=p>][</span><span class=n>s</span><span class=p>]</span> <span class=o>=</span> <span class=n>f</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=mi>1</span><span class=p>][</span><span class=n>q</span><span class=p>][</span><span class=n>s</span><span class=p>];</span>

                    <span class=c1>// select A[i - 1]</span>
                    <span class=k>if</span> <span class=p>(</span><span class=n>q</span> <span class=o>&gt;=</span> <span class=mi>1</span> <span class=o>&amp;&amp;</span> <span class=n>s</span> <span class=o>&gt;=</span> <span class=n>A</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=mi>1</span><span class=p>])</span> <span class=p>{</span>
                        <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>q</span><span class=p>][</span><span class=n>s</span><span class=p>]</span> <span class=o>+=</span> <span class=n>f</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=mi>1</span><span class=p>][</span><span class=n>q</span> <span class=o>-</span> <span class=mi>1</span><span class=p>][</span><span class=n>s</span> <span class=o>-</span> <span class=n>A</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=mi>1</span><span class=p>]];</span>
                    <span class=p>}</span>
                <span class=p>}</span>
            <span class=p>}</span>
        <span class=p>}</span>

        <span class=k>return</span> <span class=n>f</span><span class=p>[</span><span class=n>n</span><span class=p>][</span><span class=n>k</span><span class=p>][</span><span class=n>target</span><span class=p>];</span>
    <span class=p>}</span>
<span class=p>};</span>
</code></pre></div> </div> <input id=__tabbed_25_2 name=__tabbed_25 type=radio><label for=__tabbed_25_2>C++ DP space optimized</label><div class=tabbed-content> <div class=highlight><pre><span></span><code><span class=k>class</span> <span class=nc>Solution</span> <span class=p>{</span>
<span class=k>public</span><span class=o>:</span>
    <span class=kt>int</span> <span class=n>kSum</span><span class=p>(</span><span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;</span> <span class=n>A</span><span class=p>,</span> <span class=kt>int</span> <span class=n>k</span><span class=p>,</span> <span class=kt>int</span> <span class=n>target</span><span class=p>)</span> <span class=p>{</span>
        <span class=c1>// wirte your code here</span>
        <span class=kt>int</span> <span class=n>n</span> <span class=o>=</span> <span class=n>A</span><span class=p>.</span><span class=n>size</span><span class=p>();</span>

        <span class=kt>int</span> <span class=n>f</span><span class=p>[</span><span class=n>n</span> <span class=o>+</span> <span class=mi>1</span><span class=p>][</span><span class=n>k</span> <span class=o>+</span> <span class=mi>1</span><span class=p>][</span><span class=n>target</span> <span class=o>+</span> <span class=mi>1</span><span class=p>];</span>
        <span class=kt>int</span> <span class=n>i</span><span class=p>,</span> <span class=n>q</span><span class=p>,</span> <span class=n>s</span><span class=p>;</span>
        <span class=kt>int</span> <span class=n>curr</span> <span class=o>=</span> <span class=mi>0</span><span class=p>,</span> <span class=n>prev</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>

        <span class=c1>// init</span>
        <span class=k>for</span> <span class=p>(</span><span class=n>q</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>q</span> <span class=o>&lt;=</span> <span class=n>k</span><span class=p>;</span> <span class=n>q</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
            <span class=k>for</span> <span class=p>(</span><span class=n>s</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>s</span> <span class=o>&lt;=</span> <span class=n>target</span><span class=p>;</span> <span class=n>s</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
                <span class=n>f</span><span class=p>[</span><span class=n>curr</span><span class=p>][</span><span class=n>q</span><span class=p>][</span><span class=n>s</span><span class=p>]</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
            <span class=p>}</span>
        <span class=p>}</span>

        <span class=n>f</span><span class=p>[</span><span class=n>curr</span><span class=p>][</span><span class=mi>0</span><span class=p>][</span><span class=mi>0</span><span class=p>]</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span>

        <span class=k>for</span> <span class=p>(</span><span class=n>i</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;=</span> <span class=n>n</span><span class=p>;</span> <span class=n>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
            <span class=n>prev</span> <span class=o>=</span> <span class=n>curr</span><span class=p>;</span>
            <span class=n>curr</span> <span class=o>=</span> <span class=mi>1</span> <span class=o>-</span> <span class=n>curr</span> <span class=p>;</span>
            <span class=k>for</span> <span class=p>(</span><span class=n>q</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>q</span> <span class=o>&lt;=</span> <span class=n>k</span><span class=p>;</span> <span class=n>q</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
                <span class=k>for</span> <span class=p>(</span><span class=n>s</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>s</span> <span class=o>&lt;=</span> <span class=n>target</span><span class=p>;</span> <span class=n>s</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
                    <span class=c1>// not select A[i - 1]</span>
                    <span class=n>f</span><span class=p>[</span><span class=n>curr</span><span class=p>][</span><span class=n>q</span><span class=p>][</span><span class=n>s</span><span class=p>]</span> <span class=o>=</span> <span class=n>f</span><span class=p>[</span><span class=n>prev</span><span class=p>][</span><span class=n>q</span><span class=p>][</span><span class=n>s</span><span class=p>];</span>

                    <span class=c1>// select A[i - 1]</span>
                    <span class=k>if</span> <span class=p>(</span><span class=n>q</span> <span class=o>&gt;=</span> <span class=mi>1</span> <span class=o>&amp;&amp;</span> <span class=n>s</span> <span class=o>&gt;=</span> <span class=n>A</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=mi>1</span><span class=p>])</span> <span class=p>{</span>
                        <span class=n>f</span><span class=p>[</span><span class=n>curr</span><span class=p>][</span><span class=n>q</span><span class=p>][</span><span class=n>s</span><span class=p>]</span> <span class=o>+=</span> <span class=n>f</span><span class=p>[</span><span class=n>prev</span><span class=p>][</span><span class=n>q</span> <span class=o>-</span> <span class=mi>1</span><span class=p>][</span><span class=n>s</span> <span class=o>-</span> <span class=n>A</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=mi>1</span><span class=p>]];</span>
                    <span class=p>}</span>
                <span class=p>}</span>
            <span class=p>}</span>
        <span class=p>}</span>

        <span class=k>return</span> <span class=n>f</span><span class=p>[</span><span class=n>curr</span><span class=p>][</span><span class=n>k</span><span class=p>][</span><span class=n>target</span><span class=p>];</span>
    <span class=p>}</span>
<span class=p>};</span>
</code></pre></div> </div> </div> <h3 id=longest-increasing-subsequence_1><a href=#longest-increasing-subsequence>Longest Increasing Subsequence</a><a class=headerlink href=#longest-increasing-subsequence_1 title="Permanent link">&para;</a></h3> <h3 id=k-edit-distance>K Edit Distance<a class=headerlink href=#k-edit-distance title="Permanent link">&para;</a></h3> <h3 id=frog-jump>Frog Jump<a class=headerlink href=#frog-jump title="Permanent link">&para;</a></h3> <ul> <li>You could use naive solution to iterate all the possible cases and use memoization to speed up.</li> <li>In that case, you can also use binary search to located a stone in the array which help to improve the complexity.</li> <li>But the best solution is to use a map to keep all the possible steps for a stone.</li> </ul> <div class=tabbed-set data-tabs=26:1><input checked=checked id=__tabbed_26_1 name=__tabbed_26 type=radio><label for=__tabbed_26_1>C++ map to set</label><div class=tabbed-content> <div class=highlight><pre><span></span><code><span class=k>class</span> <span class=nc>Solution</span> <span class=p>{</span>
<span class=k>public</span><span class=o>:</span>
    <span class=kt>bool</span> <span class=n>canCross</span><span class=p>(</span><span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;&amp;</span> <span class=n>stones</span><span class=p>)</span> <span class=p>{</span>
        <span class=kt>int</span> <span class=n>n</span> <span class=o>=</span> <span class=n>stones</span><span class=p>.</span><span class=n>size</span><span class=p>();</span>
        <span class=n>unordered_map</span><span class=o>&lt;</span><span class=kt>int</span><span class=p>,</span> <span class=n>unordered_set</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;&gt;</span> <span class=n>hmap</span><span class=p>;</span>

        <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>stones</span><span class=p>.</span><span class=n>size</span><span class=p>();</span> <span class=n>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
            <span class=n>hmap</span><span class=p>[</span><span class=n>stones</span><span class=p>[</span><span class=n>i</span><span class=p>]]</span> <span class=o>=</span> <span class=n>unordered_set</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;</span><span class=p>();</span>
        <span class=p>}</span>

        <span class=n>hmap</span><span class=p>[</span><span class=n>stones</span><span class=p>[</span><span class=mi>0</span><span class=p>]].</span><span class=n>insert</span><span class=p>(</span><span class=mi>0</span><span class=p>);</span>

        <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>stones</span><span class=p>.</span><span class=n>size</span><span class=p>();</span> <span class=n>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
            <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=nl>k</span><span class=p>:</span> <span class=n>hmap</span><span class=p>[</span><span class=n>stones</span><span class=p>[</span><span class=n>i</span><span class=p>]])</span> <span class=p>{</span>
                <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>s</span> <span class=o>=</span> <span class=n>k</span> <span class=o>-</span> <span class=mi>1</span><span class=p>;</span> <span class=n>s</span> <span class=o>&lt;=</span> <span class=n>k</span> <span class=o>+</span> <span class=mi>1</span><span class=p>;</span> <span class=n>s</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
                    <span class=k>if</span> <span class=p>(</span><span class=n>s</span> <span class=o>&gt;</span> <span class=mi>0</span> <span class=o>&amp;&amp;</span> <span class=n>hmap</span><span class=p>.</span><span class=n>find</span><span class=p>(</span><span class=n>stones</span><span class=p>[</span><span class=n>i</span><span class=p>]</span> <span class=o>+</span> <span class=n>s</span><span class=p>)</span> <span class=o>!=</span> <span class=n>hmap</span><span class=p>.</span><span class=n>end</span><span class=p>())</span> <span class=p>{</span>
                        <span class=n>hmap</span><span class=p>[</span><span class=n>stones</span><span class=p>[</span><span class=n>i</span><span class=p>]</span> <span class=o>+</span> <span class=n>s</span><span class=p>].</span><span class=n>insert</span><span class=p>(</span><span class=n>s</span><span class=p>);</span>
                    <span class=p>}</span>
                <span class=p>}</span>
            <span class=p>}</span>
        <span class=p>}</span>

        <span class=k>return</span> <span class=n>hmap</span><span class=p>[</span><span class=n>stones</span><span class=p>[</span><span class=n>n</span> <span class=o>-</span> <span class=mi>1</span><span class=p>]].</span><span class=n>size</span><span class=p>()</span> <span class=o>&gt;</span> <span class=mi>0</span><span class=p>;</span>
    <span class=p>}</span>
<span class=p>};</span>
</code></pre></div> </div> </div> <h3 id=221-maximal-square><a href=../../../leetcode/stack/notes/#221-maximal-square>221. Maximal Square</a><a class=headerlink href=#221-maximal-square title="Permanent link">&para;</a></h3> <h3 id=85-maximal-rectangle><a href=../../../leetcode/stack/notes/#85-maximal-rectangle>85. Maximal Rectangle</a><a class=headerlink href=#85-maximal-rectangle title="Permanent link">&para;</a></h3> </article> </div> </div> </main> <footer class=md-footer> <nav class="md-footer__inner md-grid" aria-label=Footer> <a href=../../9chap-system-design/notes/ class="md-footer__link md-footer__link--prev" aria-label="Previous: Nine Chapter System Design" rel=prev> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </div> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Previous </span> Nine Chapter System Design </div> </div> </a> <a href=../../func-prog-in-scala/notes/ class="md-footer__link md-footer__link--next" aria-label="Next: Functional Programming Principles in Scala" rel=next> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Next </span> Functional Programming Principles in Scala </div> </div> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-footer-copyright> <div class=md-footer-copyright__highlight> Copyright &copy; 2020 Rui Han </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../../..", "features": ["navigation.tabs"], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../../../assets/javascripts/workers/search.477d984a.min.js", "version": null}</script> <script src=../../../assets/javascripts/bundle.82b56eb2.min.js></script> <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML"></script> </body> </html>